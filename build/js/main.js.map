{"version":3,"sources":["main.js","contacto/contacto.js","fotos/fotos.js","header/header.js","inicio/hero-dinamico.js","inicio/whatsapp.js","nosotros/nosotros.js","productos/productos.js","servicios/servicios.js","soporte/soporte.js","utilidades/main.js","utilidades/utilis.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_regenerator","e","t","r","n","toStringTag","i","c","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","this","setPrototypeOf","__proto__","displayName","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","ContactoController","formularioContacto","document","getElementById","botonEnviar","querySelector","mapaInteractivo","informacionMapa","init","initFormulario","initMapa","initAnimaciones","initCopyToClipboard","console","log","_this","querySelectorAll","forEach","input","addEventListener","BombasAyalaUtils","validateField","classList","contains","preventDefault","enviarFormulario","_this2","validateForm","textoOriginal","innerHTML","disabled","formData","FormData","datos","fromEntries","setTimeout","mensaje","createQuoteMessage","openWhatsApp","mostrarMensaje","reset","remove","removeFieldError","trackEvent","primerError","focus","scrollIntoView","behavior","block","tipo","mensajeAnterior","divMensaje","createElement","className","concat","insertBefore","firstChild","body","style","opacity","_this3","coordenadas","transform","googleMapsUrl","window","open","iframe","add","animateOnScroll","seccionContacto","rect","getBoundingClientRect","top","innerHeight","bottom","span","_callee","texto","original","originalColor","_t","_context","textContent","copyToClipboard","color","showToast","warn","inicializarMapaPersonalizado","initContacto","contactoController","Contacto","scrollToForm","_window$contactoContr","resetForm","_window$contactoContr2","module","exports","GaleriaController","filtroBtns","tarjetasProyecto","btnVerMas","imagenesGaleria","filtroActual","mostrandoTodos","proyectosPorPagina","setupFilters","setupVerMasButton","setupLightbox","setupAnimations","btn","cambiarFiltro","actualizarBotonVerMas","btnClickeado","b","filtro","dataset","aplicarFiltroConAnimacion","tarjeta","index","categoria","esVisible","esOculto","ocultarProyecto","mostrarProyecto","undefined","display","transition","toggleVerMasProyectos","mostrarMenosProyectos","mostrarMasProyectos","_this4","getProyectosOcultos","proyecto","_this5","_this6","Array","from","filter","categoriaProyecto","getAttribute","proyectosOcultos","_this7","img","abrirLightbox","imagen","modal","cssText","imagenAmpliada","Image","src","closeBtn","background","infoContainer","crearInfoProyecto","appendChild","cerrarModal","removeChild","overflow","target","handleEscape","removeEventListener","_tarjeta$querySelecto","_tarjeta$querySelecto2","closest","titulo","descripcion","observer","createAnimationObserver","entries","entry","isIntersecting","observe","totalProyectos","proyectosVisibles","initGaleria","galeriaController","Galeria","filtrar","_window$galeriaContro","filtrarPor","stats","_window$galeriaContro2","getStats","HeaderController","headerUnificado","contactBar","navPrincipal","menuToggle","menuOverlay","navMenu","isContactBarVisible","lastScrollTop","scrollThreshold","isMobileMenuOpen","contactBarHeight","navHeight","totalHeaderHeight","calculateDimensions","setInitialBodyMargin","setupScrollListener","setupMobileMenu","handleResize","offsetHeight","nav","total","innerWidth","marginTop","ticking","requestAnimationFrame","handleScrollEvent","passive","currentScrollTop","pageYOffset","documentElement","scrollTop","scrollDirection","Math","abs","hideContactBar","showContactBar","updateBodyMargin","stopPropagation","toggleMobileMenu","closeMobileMenu","link","openMobileMenu","_this$menuToggle","_this$navMenu","_this$menuOverlay","navContainer","_this$menuToggle2","_this$navMenu2","_this$menuOverlay2","debounce","contactBarVisible","mobileMenuOpen","scrollPosition","isMobile","dimensions","initHeader","headerController","Header","show","_window$headerControl","forceShowContactBar","hide","_window$headerControl2","forceHideContactBar","getState","_window$headerControl3","closeMenu","_window$headerControl4","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","name","test","isArray","readyState","InicioController","heroBackground","heroImage","loadingIndicator","heroSection","backgroundImages","mainImages","currentImageIndex","intervalId","isVisible","preloadImages","initializeHero","initScrollAnimations","setupVisibilityControl","setBackgroundImage","setMainImage","startImageRotation","backgroundImage","setInterval","changeToNextImage","clearInterval","initCounters","contadores","observerContadores","elemento","objetivo","parseInt","animateCounter","unobserve","threshold","contador","hidden","pauseAnimations","resumeAnimations","_this3$heroSection","heroRect","animationPlayState","allImages","currentImage","totalImages","isRotating","stopImageRotation","changeBackgroundImage","inicioController","nextImage","initializeSmoothScroll","initializeScrollAnimations","initInicio","Hero","next","_window$inicioControl","previous","_window$inicioControl2","previousImage","goTo","_window$inicioControl3","goToImage","_window$inicioControl4","pause","_window$inicioControl5","resume","_window$inicioControl6","FlotantesController","flotantesContainer","flotantes","hideThreshold","setupScrollBehavior","setupClickEffects","setupTooltips","setupWhatsAppIntegration","adjustForMobile","currentScroll","flotante","addClickEffect","trackClick","navigator","vibrate","tooltips","setAttribute","whatsappBtn","createDefaultWhatsAppMessage","setupOtherWhatsAppButtons","button","customMessage","producto","specs","createProductWhatsAppMessage","visibility","getTransformForDevice","getHiddenTransformForDevice","totalFlotantes","inicializarCotizaciones","boton","especificaciones","telefono","whatsapp","initFlotantes","flotantesController","Flotantes","_window$flotantesCont","forceShow","_window$flotantesCont2","forceHide","toggle","_window$flotantesCont3","_window$flotantesCont4","WhatsApp","quote","ownKeys","keys","getOwnPropertySymbols","getOwnPropertyDescriptor","push","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","NosotrosController","overlayVideo","iconoPlay","listaDistritos","zonas","norte","distritos","sur","este","oeste","estadisticas","experiencia","clientes","servicios","atencion","initContadoresAnimados","initMapaInteractivo","initVideoOverlay","initInformacionInicial","initBotonesCTA","zonasElementos","zona","tipoZona","getTipoZona","mostrarDistritos","zIndex","mostrarInformacionZona","map","distrito","join","item","mostrarModalVideo","trim","datosLima","getDatosLima","totalDistritos","tiempoRespuestaPromedio","accion","values","reduce","poblacionAproximada","areaCobertura","zonasCobertura","nuevasEstadisticas","nosotrosController","mostrarZona","initNosotros","_window$nosotrosContr5","_window$nosotrosContr6","Nosotros","_window$nosotrosContr","actualizarStats","_window$nosotrosContr2","actualizarEstadisticas","_window$nosotrosContr3","BombasAyala","_window$nosotrosContr4","ProductosController","filtros","productos","productosPorPagina","setupHoverEffects","setupCotizaciones","filtroClickeado","aplicarFiltro","categoriaProducto","mostrarProducto","ocultarProducto","animation","toggleVerMas","mostrarMenosProductos","mostrarMasProductos","productosOcultos","getProductosOcultos","card","termino","toLowerCase","_producto$querySelect","_producto$querySelect2","includes","visibles","ocultos","animarElementos","efectosHover","initProductos","productosController","Productos","_window$productosCont","buscar","_window$productosCont2","buscarProducto","resetear","_window$productosCont3","resetearFiltros","_window$productosCont4","ServiciosController","formularioCotizacion","servicioCards","testimonioCards","statsItems","initFormularioCotizacion","initContadores","initBotonesCotizar","initBotonesEmergencia","initAccesibilidad","enviarCotizacion","nombre","get","email","servicio","botonSubmit","el","statsObserver","numero","match","targetNumber","getServicioFromButton","selectServicio","primerInput","servicioCard","getTipoEmergencia","location","href","icono","clases","outline","outlineOffset","dispatchEvent","Event","testimonios","hasFormulario","action","category","label","field","showFieldError","message","element","start","end","duration","initServicios","serviciosController","Servicios","_window$serviciosCont","preseleccionar","_window$serviciosCont2","preseleccionarServicio","_window$serviciosCont3","SoporteController","faqItems","buscadorFAQ","formularioSoporte","chatButton","faqsOriginales","faqActivo","initFAQ","initBuscador","initFormularioSoporte","initChatSoporte","guardarFAQsOriginales","pregunta","respuesta","toggleFAQ","isActive","cerrarTodosFAQs","abrirFAQ","maxHeight","scrollHeight","textoPregunta","otherItem","otherRespuesta","otherIcono","otherPregunta","filtrarFAQs","clearBtn","terminoLower","resultadosEncontrados","_item$querySelector","_item$querySelector2","mostrarResultadosBusqueda","cantidad","parentNode","_item$querySelector3","_item$querySelector4","enviarSolicitudSoporte","prioridad","crearMensajeSoporte","consulta","tecnico","garantia","emergencia","otro","charAt","toUpperCase","baja","normal","alta","urgente","Date","toLocaleString","abrirChatSoporte","mostrarPrompChat","contarInteracciones","sessionStorage","getItem","textoBusqueda","faq","find","_item$querySelector5","_this$faqActivo$query","totalFAQs","hasChat","initSoporte","soporteController","Soporte","_window$soporteContro","abrirFAQPorTexto","_window$soporteContro2","buscarFAQ","chat","_window$soporteContro3","_window$soporteContro4","interacciones","setItem","BombasAyalaApp","isInitialized","currentPage","detectCurrentPage","controllers","config","phone","address","analytics","enabled","trackingId","checkDependencies","initGlobalComponents","initPageSpecificComponents","setupGlobalEvents","finishInitialization","error","_i","_required","dep","path","pathname","header","initInicioComponents","initProductosComponents","initServiciosComponents","initGaleriaComponents","initNosotrosComponents","initContactoComponents","initSoporteComponents","inicio","galeria","nosotros","contacto","soporte","handleGlobalError","handleUnhandledRejection","handleBeforeUnload","handlePageLoad","handleOnline","handleOffline","event","reason","loadTime","performance","now","round","hideLoaders","showContent","getAppState","loader","initialized","reload","subject","encodeURIComponent","initBombasAyalaApp","BA","app","utils","msg","callPhone","sendEmail","state","initSmoothScroll","callback","options","IntersectionObserver","rootMargin","selector","elements","isRequired","hasAttribute","type","replace","errorDiv","errorMsg","formElement","inputs","isValid","encodedMessage","url","data","gtag","event_category","event_label","initLazyLoading","images","imageObserver","removeAttribute","startTime","currentTime","timeElapsed","progress","min","floor","func","wait","timeout","_len","args","_key","clearTimeout","text","clipboard","writeText","textArea","select","execCommand","toast","colors","success","warning","info","backgroundColor","imageUrls"],"mappings":"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","file":"main.js","sourcesContent":[null,"// // ========================================\r\n// // JAVASCRIPT - SECCIÓN DE CONTACTO CORREGIDO\r\n// // ========================================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n    \r\n//     // ========================================\r\n//     // FUNCIONALIDAD DEL MAPA INTERACTIVO\r\n//     // ========================================\r\n    \r\n//     const mapaInteractivo = document.getElementById('mapaInteractivo');\r\n//     const informacionMapa = document.getElementById('informacionMapa');\r\n//     const puntoUbicacion = document.getElementById('puntoUbicacion');\r\n    \r\n//     // Coordenadas exactas (Ubicación específica)\r\n//     const coordenadasExactas = {\r\n//         lat: -12.113154,\r\n//         lng: -77.050290\r\n//     };\r\n    \r\n//     // Hover en el mapa - ocultar información\r\n//     if (mapaInteractivo && informacionMapa) {\r\n//         mapaInteractivo.addEventListener('mouseenter', function() {\r\n//             informacionMapa.style.opacity = '0';\r\n//             informacionMapa.style.transform = 'translateY(-10px)';\r\n//         });\r\n        \r\n//         mapaInteractivo.addEventListener('mouseleave', function() {\r\n//             informacionMapa.style.opacity = '1';\r\n//             informacionMapa.style.transform = 'translateY(0)';\r\n//         });\r\n//     }\r\n    \r\n//     // ========================================\r\n//     // FUNCIONALIDAD DEL FORMULARIO\r\n//     // ========================================\r\n    \r\n//     // ✅ CORREGIDO: Usar el ID correcto del HTML\r\n//     const formularioContacto = document.getElementById('formularioContacto');\r\n//     const botonEnviar = document.querySelector('.boton-enviar');\r\n    \r\n//     if (formularioContacto) {\r\n        \r\n//         // Validación en tiempo real\r\n//         const inputs = formularioContacto.querySelectorAll('input, select, textarea');\r\n        \r\n//         inputs.forEach(input => {\r\n//             input.addEventListener('blur', function() {\r\n//                 validarCampo(this);\r\n//             });\r\n            \r\n//             input.addEventListener('input', function() {\r\n//                 if (this.classList.contains('error')) {\r\n//                     validarCampo(this);\r\n//                 }\r\n//             });\r\n//         });\r\n        \r\n//         // Función de validación individual\r\n//         function validarCampo(campo) {\r\n//             const valor = campo.value.trim();\r\n//             const esRequerido = campo.hasAttribute('required');\r\n//             let esValido = true;\r\n            \r\n//             // Remover clases de error previas\r\n//             campo.classList.remove('error', 'valido');\r\n            \r\n//             // Validar campos requeridos\r\n//             if (esRequerido && valor === '') {\r\n//                 esValido = false;\r\n//             }\r\n            \r\n//             // Validar email\r\n//             if (campo.type === 'email' && valor !== '' && !validarEmail(valor)) {\r\n//                 esValido = false;\r\n//             }\r\n            \r\n//             // Validar teléfono\r\n//             if (campo.type === 'tel' && valor !== '' && !validarTelefono(valor)) {\r\n//                 esValido = false;\r\n//             }\r\n            \r\n//             // Aplicar clases\r\n//             if (esValido && valor !== '') {\r\n//                 campo.classList.add('valido');\r\n//             } else if (!esValido) {\r\n//                 campo.classList.add('error');\r\n//             }\r\n            \r\n//             return esValido;\r\n//         }\r\n        \r\n//         // Validar email\r\n//         function validarEmail(email) {\r\n//             const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n//             return regex.test(email);\r\n//         }\r\n        \r\n//         // Validar teléfono\r\n//         function validarTelefono(telefono) {\r\n//             const regex = /^[\\d\\s\\-\\+\\(\\)]{7,15}$/;\r\n//             return regex.test(telefono);\r\n//         }\r\n        \r\n//         // ✅ CORREGIDO: Envío del formulario\r\n//         formularioContacto.addEventListener('submit', function(e) {\r\n//             e.preventDefault();\r\n            \r\n//             // Validar todos los campos\r\n//             let formularioValido = true;\r\n//             inputs.forEach(input => {\r\n//                 if (!validarCampo(input)) {\r\n//                     formularioValido = false;\r\n//                 }\r\n//             });\r\n            \r\n//             if (formularioValido) {\r\n//                 enviarFormulario();\r\n//             } else {\r\n//                 mostrarMensaje('Por favor, corrige los errores en el formulario.', 'error');\r\n//                 // Scroll al primer error\r\n//                 const primerError = formularioContacto.querySelector('.error');\r\n//                 if (primerError) {\r\n//                     primerError.focus();\r\n//                     primerError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n//                 }\r\n//             }\r\n//         });\r\n        \r\n//         // Función para enviar formulario\r\n//         function enviarFormulario() {\r\n//             // Cambiar estado del botón\r\n//             const textoOriginal = botonEnviar.innerHTML;\r\n//             botonEnviar.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ENVIANDO...';\r\n//             botonEnviar.disabled = true;\r\n            \r\n//             // Obtener datos del formulario\r\n//             const datosFormulario = new FormData(formularioContacto);\r\n//             const datos = Object.fromEntries(datosFormulario);\r\n            \r\n//             // Simular envío (aquí integrarías con tu backend)\r\n//             setTimeout(() => {\r\n//                 console.log('Datos del formulario:', datos);\r\n                \r\n//                 // Mostrar mensaje de éxito\r\n//                 mostrarMensaje('¡Mensaje enviado correctamente! Nos pondremos en contacto contigo pronto.', 'exito');\r\n                \r\n//                 // Limpiar formulario\r\n//                 formularioContacto.reset();\r\n//                 inputs.forEach(input => {\r\n//                     input.classList.remove('error', 'valido');\r\n//                 });\r\n                \r\n//                 // Restaurar botón\r\n//                 botonEnviar.innerHTML = textoOriginal;\r\n//                 botonEnviar.disabled = false;\r\n                \r\n//             }, 2000);\r\n//         }\r\n        \r\n//         // Mostrar mensajes\r\n//         function mostrarMensaje(mensaje, tipo) {\r\n//             // Remover mensaje anterior si existe\r\n//             const mensajeAnterior = document.querySelector('.mensaje-formulario');\r\n//             if (mensajeAnterior) {\r\n//                 mensajeAnterior.remove();\r\n//             }\r\n            \r\n//             // Crear nuevo mensaje\r\n//             const divMensaje = document.createElement('div');\r\n//             divMensaje.className = `mensaje-formulario ${tipo}`;\r\n//             divMensaje.innerHTML = `\r\n//                 <i class=\"fas ${tipo === 'exito' ? 'fa-check-circle' : 'fa-exclamation-triangle'}\"></i>\r\n//                 <span>${mensaje}</span>\r\n//             `;\r\n            \r\n//             // Insertar mensaje\r\n//             formularioContacto.insertBefore(divMensaje, formularioContacto.firstChild);\r\n            \r\n//             // Auto-remover después de 5 segundos\r\n//             setTimeout(() => {\r\n//                 if (divMensaje) {\r\n//                     divMensaje.style.opacity = '0';\r\n//                     setTimeout(() => divMensaje.remove(), 300);\r\n//                 }\r\n//             }, 5000);\r\n//         }\r\n//     }\r\n    \r\n//     // ========================================\r\n//     // ANIMACIONES Y EFECTOS\r\n//     // ========================================\r\n    \r\n//     // ✅ CORREGIDO: Animación de entrada para elementos\r\n//     const observerOptions = {\r\n//         threshold: 0.1,\r\n//         rootMargin: '0px 0px -50px 0px'\r\n//     };\r\n    \r\n//     const observer = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 entry.target.classList.add('animado');\r\n//             }\r\n//         });\r\n//     }, observerOptions);\r\n    \r\n//     // ✅ CORREGIDO: Observar elementos para animación (usando clases correctas)\r\n//     const elementosAnimados = document.querySelectorAll('.seccion-formulario-contacto, .informacion-contacto-directo, .seccion-horarios');\r\n//     elementosAnimados.forEach(el => {\r\n//         if (el) observer.observe(el);\r\n//     });\r\n    \r\n//     // ✅ CORREGIDO: Animación simple al hacer scroll\r\n//     window.addEventListener('scroll', function() {\r\n//         const seccionContacto = document.querySelector('.seccion-contacto');\r\n//         if (seccionContacto) {\r\n//             const rect = seccionContacto.getBoundingClientRect();\r\n            \r\n//             if (rect.top < window.innerHeight && rect.bottom > 0) {\r\n//                 seccionContacto.classList.add('visible');\r\n//             }\r\n//         }\r\n//     });\r\n    \r\n//     // ========================================\r\n//     // FUNCIONES DE UTILIDAD\r\n//     // ========================================\r\n    \r\n//     // Smooth scroll para links internos\r\n//     document.querySelectorAll('a[href^=\"#\"]').forEach(link => {\r\n//         link.addEventListener('click', function(e) {\r\n//             e.preventDefault();\r\n//             const target = document.querySelector(this.getAttribute('href'));\r\n//             if (target) {\r\n//                 target.scrollIntoView({\r\n//                     behavior: 'smooth',\r\n//                     block: 'start'\r\n//                 });\r\n//             }\r\n//         });\r\n//     });\r\n    \r\n//     // Copiar información de contacto al hacer clic\r\n//     document.querySelectorAll('.detalles-contacto span').forEach(span => {\r\n//         span.addEventListener('click', function() {\r\n//             const texto = this.textContent;\r\n//             if (navigator.clipboard) {\r\n//                 navigator.clipboard.writeText(texto).then(() => {\r\n//                     // Mostrar feedback visual\r\n//                     const original = this.textContent;\r\n//                     this.textContent = '¡Copiado!';\r\n//                     this.style.color = '#27AE60'; // Verde esmeralda\r\n                    \r\n//                     setTimeout(() => {\r\n//                         this.textContent = original;\r\n//                         this.style.color = '';\r\n//                     }, 1000);\r\n//                 }).catch(() => {\r\n//                     console.log('No se pudo copiar el texto');\r\n//                 });\r\n//             }\r\n//         });\r\n//     });\r\n    \r\n//     // Preloader para el mapa\r\n//     if (mapaInteractivo) {\r\n//         const iframe = mapaInteractivo.querySelector('iframe');\r\n//         if (iframe) {\r\n//             iframe.addEventListener('load', function() {\r\n//                 mapaInteractivo.classList.add('mapa-cargado');\r\n//             });\r\n//         }\r\n//     }\r\n    \r\n//     console.log('Sistema de contacto inicializado correctamente');\r\n// });\r\n\r\n// // ========================================\r\n// // FUNCIONES ADICIONALES CORREGIDAS\r\n// // ========================================\r\n\r\n// // ✅ CORREGIDO: JavaScript separado para el mapa (ya no duplicado)\r\n// // Este código reemplaza el archivo mapacontacto.js\r\n\r\n// // Funcionalidad adicional del mapa si es necesario\r\n// function inicializarMapaPersonalizado() {\r\n//     const mapaInteractivo = document.getElementById('mapaInteractivo');\r\n//     const informacionMapa = document.getElementById('informacionMapa');\r\n    \r\n//     if (mapaInteractivo && informacionMapa) {\r\n//         // Efectos adicionales del mapa\r\n//         mapaInteractivo.addEventListener('click', function() {\r\n//             // Aquí puedes agregar funcionalidad de clic en el mapa\r\n//             console.log('Mapa clickeado');\r\n//         });\r\n//     }\r\n// }\r\n\r\n// // Inicializar mapa personalizado cuando el DOM esté listo\r\n// document.addEventListener('DOMContentLoaded', inicializarMapaPersonalizado);\r\n\r\n\r\n/**\r\n * ========================================\r\n * CONTACTO.JS - BOMBAS AYALA\r\n * Formulario de contacto y mapa interactivo\r\n * ========================================\r\n */\r\n\r\nclass ContactoController {\r\n    constructor() {\r\n        this.formularioContacto = document.getElementById('formularioContacto');\r\n        this.botonEnviar = document.querySelector('.boton-enviar');\r\n        this.mapaInteractivo = document.getElementById('mapaInteractivo');\r\n        this.informacionMapa = document.getElementById('informacionMapa');\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFormulario();\r\n        this.initMapa();\r\n        this.initAnimaciones();\r\n        this.initCopyToClipboard();\r\n        \r\n        console.log('✅ Contacto Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE CONTACTO\r\n    // ==================\r\n    initFormulario() {\r\n        if (!this.formularioContacto) return;\r\n\r\n        const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n\r\n        // Validación en tiempo real\r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioContacto.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarFormulario();\r\n        });\r\n    }\r\n\r\n    enviarFormulario() {\r\n        // Validar formulario completo\r\n        if (!BombasAyalaUtils.validateForm(this.formularioContacto)) {\r\n            this.mostrarMensaje('Por favor, corrige los errores en el formulario.', 'error');\r\n            \r\n            // Hacer scroll al primer error\r\n            const primerError = this.formularioContacto.querySelector('.error');\r\n            if (primerError) {\r\n                primerError.focus();\r\n                primerError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Cambiar estado del botón\r\n        const textoOriginal = this.botonEnviar.innerHTML;\r\n        this.botonEnviar.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ENVIANDO...';\r\n        this.botonEnviar.disabled = true;\r\n\r\n        // Obtener datos del formulario\r\n        const formData = new FormData(this.formularioContacto);\r\n        const datos = Object.fromEntries(formData);\r\n\r\n        // Simular envío\r\n        setTimeout(() => {\r\n            console.log('📧 Datos del formulario:', datos);\r\n            \r\n            // Crear mensaje para WhatsApp\r\n            const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n            \r\n            // Abrir WhatsApp\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            this.mostrarMensaje('¡Mensaje enviado correctamente! Te hemos redirigido a WhatsApp.', 'exito');\r\n            \r\n            // Limpiar formulario\r\n            this.formularioContacto.reset();\r\n            const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            this.botonEnviar.innerHTML = textoOriginal;\r\n            this.botonEnviar.disabled = false;\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('form_submit', 'contacto', 'formulario_principal');\r\n            \r\n        }, 2000);\r\n    }\r\n\r\n    mostrarMensaje(mensaje, tipo) {\r\n        // Remover mensaje anterior\r\n        const mensajeAnterior = document.querySelector('.mensaje-formulario');\r\n        if (mensajeAnterior) {\r\n            mensajeAnterior.remove();\r\n        }\r\n\r\n        // Crear nuevo mensaje\r\n        const divMensaje = document.createElement('div');\r\n        divMensaje.className = `mensaje-formulario ${tipo}`;\r\n        divMensaje.innerHTML = `\r\n            <i class=\"fas ${tipo === 'exito' ? 'fa-check-circle' : 'fa-exclamation-triangle'}\"></i>\r\n            <span>${mensaje}</span>\r\n        `;\r\n\r\n        // Insertar mensaje\r\n        this.formularioContacto.insertBefore(divMensaje, this.formularioContacto.firstChild);\r\n\r\n        // Auto-remover después de 5 segundos\r\n        setTimeout(() => {\r\n            if (divMensaje && document.body.contains(divMensaje)) {\r\n                divMensaje.style.opacity = '0';\r\n                setTimeout(() => {\r\n                    if (document.body.contains(divMensaje)) {\r\n                        divMensaje.remove();\r\n                    }\r\n                }, 300);\r\n            }\r\n        }, 5000);\r\n    }\r\n\r\n    // ==================\r\n    // MAPA INTERACTIVO\r\n    // ==================\r\n    initMapa() {\r\n        if (!this.mapaInteractivo || !this.informacionMapa) return;\r\n\r\n        // Coordenadas de Bombas Ayala\r\n        const coordenadas = {\r\n            lat: -12.113154,\r\n            lng: -77.050290\r\n        };\r\n\r\n        // Efectos hover\r\n        this.mapaInteractivo.addEventListener('mouseenter', () => {\r\n            this.informacionMapa.style.opacity = '0';\r\n            this.informacionMapa.style.transform = 'translateY(-10px)';\r\n        });\r\n\r\n        this.mapaInteractivo.addEventListener('mouseleave', () => {\r\n            this.informacionMapa.style.opacity = '1';\r\n            this.informacionMapa.style.transform = 'translateY(0)';\r\n        });\r\n\r\n        // Click en el mapa\r\n        this.mapaInteractivo.addEventListener('click', () => {\r\n            const googleMapsUrl = `https://www.google.com/maps?q=${coordenadas.lat},${coordenadas.lng}`;\r\n            window.open(googleMapsUrl, '_blank');\r\n            \r\n            BombasAyalaUtils.trackEvent('map_click', 'contacto', 'google_maps');\r\n        });\r\n\r\n        // Preloader para iframe\r\n        const iframe = this.mapaInteractivo.querySelector('iframe');\r\n        if (iframe) {\r\n            iframe.addEventListener('load', () => {\r\n                this.mapaInteractivo.classList.add('mapa-cargado');\r\n            });\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar elementos al hacer scroll\r\n        BombasAyalaUtils.animateOnScroll('.seccion-formulario-contacto, .informacion-contacto-directo, .seccion-horarios');\r\n\r\n        // Animación adicional al hacer scroll\r\n        window.addEventListener('scroll', () => {\r\n            const seccionContacto = document.querySelector('.seccion-contacto');\r\n            if (seccionContacto) {\r\n                const rect = seccionContacto.getBoundingClientRect();\r\n                \r\n                if (rect.top < window.innerHeight && rect.bottom > 0) {\r\n                    seccionContacto.classList.add('visible');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // COPIAR AL CLIPBOARD\r\n    // ==================\r\n    initCopyToClipboard() {\r\n        const elementosCopiables = document.querySelectorAll('.detalles-contacto span');\r\n        \r\n        elementosCopiables.forEach(span => {\r\n            span.addEventListener('click', async () => {\r\n                const texto = span.textContent;\r\n                \r\n                try {\r\n                    await BombasAyalaUtils.copyToClipboard(texto);\r\n                    \r\n                    // Feedback visual\r\n                    const original = span.textContent;\r\n                    const originalColor = span.style.color;\r\n                    \r\n                    span.textContent = '¡Copiado!';\r\n                    span.style.color = '#27AE60';\r\n                    \r\n                    setTimeout(() => {\r\n                        span.textContent = original;\r\n                        span.style.color = originalColor;\r\n                    }, 1000);\r\n                    \r\n                    // Toast notification\r\n                    BombasAyalaUtils.showToast(`Copiado: ${texto}`, 'success');\r\n                    \r\n                    // Tracking\r\n                    BombasAyalaUtils.trackEvent('copy_contact', 'contacto', texto);\r\n                    \r\n                } catch (err) {\r\n                    console.warn('No se pudo copiar el texto:', err);\r\n                    BombasAyalaUtils.showToast('No se pudo copiar', 'error');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // MÉTODOS PÚBLICOS\r\n    // ==================\r\n    scrollToForm() {\r\n        if (this.formularioContacto) {\r\n            this.formularioContacto.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n            });\r\n        }\r\n    }\r\n\r\n    resetForm() {\r\n        if (this.formularioContacto) {\r\n            this.formularioContacto.reset();\r\n            const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES ADICIONALES\r\n// ==================\r\n\r\n// Inicializar mapa personalizado (función legacy)\r\nfunction inicializarMapaPersonalizado() {\r\n    const mapaInteractivo = document.getElementById('mapaInteractivo');\r\n    const informacionMapa = document.getElementById('informacionMapa');\r\n    \r\n    if (mapaInteractivo && informacionMapa) {\r\n        mapaInteractivo.addEventListener('click', () => {\r\n            console.log('🗺️ Mapa clickeado');\r\n        });\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initContacto() {\r\n    window.contactoController = new ContactoController();\r\n    \r\n    // API global\r\n    window.Contacto = {\r\n        scrollToForm: () => window.contactoController?.scrollToForm(),\r\n        resetForm: () => window.contactoController?.resetForm()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initContacto();\r\n    inicializarMapaPersonalizado(); // Mantener compatibilidad\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ContactoController;\r\n}","// document.addEventListener('DOMContentLoaded', function() {\r\n//     // =============================================\r\n//     // FILTRADO DE PROYECTOS\r\n//     // =============================================\r\n//     const filtroBtns = document.querySelectorAll('.filtro-btn');\r\n//     const tarjetasProyecto = document.querySelectorAll('.tarjeta-proyecto');\r\n    \r\n//     if (filtroBtns.length && tarjetasProyecto.length) {\r\n//         filtroBtns.forEach(btn => {\r\n//             btn.addEventListener('click', function() {\r\n//                 // Quitar activo de todos los botones\r\n//                 filtroBtns.forEach(b => b.classList.remove('activo'));\r\n//                 // Añadir activo al clickeado\r\n//                 this.classList.add('activo');\r\n                \r\n//                 const filtro = this.dataset.filtro;\r\n                \r\n//                 // Filtrar proyectos\r\n//                 tarjetasProyecto.forEach(tarjeta => {\r\n//                     tarjeta.style.display = (filtro === 'todos' || tarjeta.dataset.categoria === filtro) \r\n//                         ? 'block' \r\n//                         : 'none';\r\n//                 });\r\n                \r\n//                 // Actualizar el botón \"Ver más\" después del filtrado\r\n//                 actualizarBotonVerMas(filtro);\r\n//             });\r\n//         });\r\n//     }\r\n\r\n//     // =============================================\r\n//     // GALERÍA DE IMÁGENES (Lightbox básico)\r\n//     // =============================================\r\n//     const imagenesGaleria = document.querySelectorAll('.imagen-item img');\r\n    \r\n//     imagenesGaleria.forEach(img => {\r\n//         img.addEventListener('click', function() {\r\n//             // Crear modal\r\n//             const modal = document.createElement('div');\r\n//             modal.style.cssText = `\r\n//                 position: fixed;\r\n//                 top: 0;\r\n//                 left: 0;\r\n//                 width: 100vw;\r\n//                 height: 100vh;\r\n//                 background: rgba(15, 35, 70, 0.95);\r\n//                 display: flex;\r\n//                 justify-content: center;\r\n//                 align-items: center;\r\n//                 z-index: 1000;\r\n//                 cursor: zoom-out;\r\n//             `;\r\n            \r\n//             // Crear imagen ampliada\r\n//             const imagenAmpliada = new Image();\r\n//             imagenAmpliada.src = this.src;\r\n//             imagenAmpliada.style.maxHeight = '90vh';\r\n//             imagenAmpliada.style.maxWidth = '90vw';\r\n//             imagenAmpliada.style.objectFit = 'contain';\r\n//             imagenAmpliada.style.borderRadius = '8px';\r\n            \r\n//             // Botón de cerrar\r\n//             const closeBtn = document.createElement('span');\r\n//             closeBtn.innerHTML = '&times;';\r\n//             closeBtn.style.cssText = `\r\n//                 position: absolute;\r\n//                 top: 30px;\r\n//                 right: 30px;\r\n//                 color: white;\r\n//                 font-size: 40px;\r\n//                 cursor: pointer;\r\n//             `;\r\n            \r\n//             modal.appendChild(imagenAmpliada);\r\n//             modal.appendChild(closeBtn);\r\n            \r\n//             // Cerrar al hacer click\r\n//             const cerrarModal = () => document.body.removeChild(modal);\r\n//             modal.addEventListener('click', cerrarModal);\r\n//             closeBtn.addEventListener('click', cerrarModal);\r\n            \r\n//             document.body.appendChild(modal);\r\n//         });\r\n//     });\r\n\r\n//     // =============================================\r\n//     // ANIMACIONES AL HACER SCROLL\r\n//     // =============================================\r\n//     const elementosAnimar = document.querySelectorAll('.tarjeta-proyecto, .paso-proceso, .titulo-seccion');\r\n    \r\n//     const animarAlScroll = () => {\r\n//         elementosAnimar.forEach(el => {\r\n//             const rect = el.getBoundingClientRect();\r\n//             const isVisible = (rect.top <= window.innerHeight * 0.8);\r\n            \r\n//             if (isVisible) {\r\n//                 el.style.opacity = '1';\r\n//                 el.style.transform = 'translateY(0)';\r\n//             }\r\n//         });\r\n//     };\r\n    \r\n//     // Aplicar estilos iniciales\r\n//     elementosAnimar.forEach(el => {\r\n//         el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n//         el.style.opacity = '0';\r\n//         el.style.transform = 'translateY(30px)';\r\n//     });\r\n    \r\n//     // Ejecutar al cargar y al hacer scroll\r\n//     window.addEventListener('load', animarAlScroll);\r\n//     window.addEventListener('scroll', animarAlScroll);\r\n\r\n//     // =============================================\r\n//     // FUNCIONALIDAD \"VER MÁS PROYECTOS\"\r\n//     // =============================================\r\n    \r\n//     // Variables para el control de \"Ver más\"\r\n//     const btnVerMas = document.getElementById('btnVerMas');\r\n//     let mostrandoTodos = false;\r\n//     let filtroActual = 'todos';\r\n    \r\n//     // Función para actualizar el botón \"Ver más\"\r\n//     function actualizarBotonVerMas(categoria = 'todos') {\r\n//         filtroActual = categoria;\r\n        \r\n//         // Contar proyectos ocultos que coinciden con el filtro actual\r\n//         const proyectosOcultos = Array.from(tarjetasProyecto).filter(proyecto => {\r\n//             const categoriaProyecto = proyecto.getAttribute('data-categoria');\r\n//             const esVisible = categoria === 'todos' || categoriaProyecto === categoria;\r\n//             const esOculto = proyecto.classList.contains('proyecto-oculto');\r\n            \r\n//             return esVisible && esOculto && !mostrandoTodos;\r\n//         });\r\n        \r\n//         if (btnVerMas) {\r\n//             if (proyectosOcultos.length > 0 && !mostrandoTodos) {\r\n//                 btnVerMas.style.display = 'inline-block';\r\n//                 btnVerMas.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Proyectos';\r\n//             } else if (mostrandoTodos) {\r\n//                 btnVerMas.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n//                 btnVerMas.style.display = 'inline-block';\r\n//             } else {\r\n//                 btnVerMas.style.display = 'none';\r\n//             }\r\n//         }\r\n//     }\r\n    \r\n//     // Función para aplicar filtro completo\r\n//     function aplicarFiltroCompleto(categoria) {\r\n//         filtroActual = categoria;\r\n        \r\n//         tarjetasProyecto.forEach(proyecto => {\r\n//             const categoriaProyecto = proyecto.getAttribute('data-categoria');\r\n//             const esVisible = categoria === 'todos' || categoriaProyecto === categoria;\r\n//             const esOculto = proyecto.classList.contains('proyecto-oculto');\r\n            \r\n//             if (esVisible) {\r\n//                 // Si debe mostrarse y no está oculto por \"Ver más\"\r\n//                 if (!esOculto || mostrandoTodos) {\r\n//                     proyecto.style.display = 'block';\r\n//                 } else {\r\n//                     proyecto.style.display = 'none';\r\n//                 }\r\n//             } else {\r\n//                 proyecto.style.display = 'none';\r\n//             }\r\n//         });\r\n        \r\n//         // Actualizar botón \"Ver más\"\r\n//         actualizarBotonVerMas(categoria);\r\n//     }\r\n    \r\n//     // Event listener para botón \"Ver más\"\r\n//     if (btnVerMas) {\r\n//         btnVerMas.addEventListener('click', function() {\r\n//             if (!mostrandoTodos) {\r\n//                 // MOSTRAR proyectos ocultos\r\n//                 mostrandoTodos = true;\r\n                \r\n//                 tarjetasProyecto.forEach(proyecto => {\r\n//                     const categoriaProyecto = proyecto.getAttribute('data-categoria');\r\n//                     const esVisible = filtroActual === 'todos' || categoriaProyecto === filtroActual;\r\n                    \r\n//                     if (esVisible && proyecto.classList.contains('proyecto-oculto')) {\r\n//                         proyecto.style.display = 'block';\r\n//                     }\r\n//                 });\r\n                \r\n//                 this.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n                \r\n//             } else {\r\n//                 // OCULTAR proyectos nuevamente\r\n//                 mostrandoTodos = false;\r\n                \r\n//                 tarjetasProyecto.forEach(proyecto => {\r\n//                     if (proyecto.classList.contains('proyecto-oculto')) {\r\n//                         proyecto.style.display = 'none';\r\n//                     }\r\n//                 });\r\n                \r\n//                 // Reaplicar filtro actual\r\n//                 aplicarFiltroCompleto(filtroActual);\r\n//             }\r\n//         });\r\n//     }\r\n    \r\n//     // Modificar los event listeners de los filtros para usar la nueva función\r\n//     if (filtroBtns.length && tarjetasProyecto.length) {\r\n//         filtroBtns.forEach(btn => {\r\n//             btn.addEventListener('click', function() {\r\n//                 // Quitar activo de todos los botones\r\n//                 filtroBtns.forEach(b => b.classList.remove('activo'));\r\n//                 // Añadir activo al clickeado\r\n//                 this.classList.add('activo');\r\n                \r\n//                 const filtro = this.dataset.filtro;\r\n                \r\n//                 // Resetear estado de \"Ver más\" al cambiar filtro\r\n//                 mostrandoTodos = false;\r\n                \r\n//                 // Aplicar filtro completo\r\n//                 aplicarFiltroCompleto(filtro);\r\n//             });\r\n//         });\r\n//     }\r\n    \r\n//     // Inicializar al cargar la página\r\n//     actualizarBotonVerMas('todos');\r\n// });\r\n\r\n\r\n/**\r\n * ========================================\r\n * GALERIA.JS - BOMBAS AYALA\r\n * Galería de proyectos con filtros y lightbox\r\n * ========================================\r\n */\r\n\r\nclass GaleriaController {\r\n    constructor() {\r\n        this.filtroBtns = document.querySelectorAll('.filtro-btn');\r\n        this.tarjetasProyecto = document.querySelectorAll('.tarjeta-proyecto');\r\n        this.btnVerMas = document.getElementById('btnVerMas');\r\n        this.imagenesGaleria = document.querySelectorAll('.imagen-item img');\r\n        \r\n        // Estado\r\n        this.filtroActual = 'todos';\r\n        this.mostrandoTodos = false;\r\n        this.proyectosPorPagina = 6;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (this.tarjetasProyecto.length === 0) {\r\n            console.warn('Galería: No se encontraron proyectos');\r\n            return;\r\n        }\r\n\r\n        this.setupFilters();\r\n        this.setupVerMasButton();\r\n        this.setupLightbox();\r\n        this.setupAnimations();\r\n        \r\n        console.log('✅ Galería Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA DE FILTROS\r\n    // ==================\r\n    setupFilters() {\r\n        if (this.filtroBtns.length === 0) return;\r\n\r\n        this.filtroBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                this.cambiarFiltro(btn);\r\n            });\r\n        });\r\n\r\n        // Aplicar filtro inicial\r\n        this.actualizarBotonVerMas('todos');\r\n    }\r\n\r\n    cambiarFiltro(btnClickeado) {\r\n        // Actualizar filtro activo\r\n        this.filtroBtns.forEach(b => b.classList.remove('activo'));\r\n        btnClickeado.classList.add('activo');\r\n        \r\n        const filtro = btnClickeado.dataset.filtro;\r\n        this.filtroActual = filtro;\r\n        \r\n        // Resetear estado de \"Ver más\"\r\n        this.mostrandoTodos = false;\r\n        \r\n        // Aplicar filtro con animación\r\n        this.aplicarFiltroConAnimacion(filtro);\r\n        \r\n        // Actualizar botón \"Ver más\"\r\n        this.actualizarBotonVerMas(filtro);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('gallery_filter', 'proyectos', filtro);\r\n        \r\n        console.log(`🎨 Filtro galería aplicado: ${filtro}`);\r\n    }\r\n\r\n    aplicarFiltroConAnimacion(filtro) {\r\n        this.tarjetasProyecto.forEach((tarjeta, index) => {\r\n            const categoria = tarjeta.dataset.categoria;\r\n            const esVisible = filtro === 'todos' || categoria === filtro;\r\n            const esOculto = tarjeta.classList.contains('proyecto-oculto');\r\n            \r\n            // Animación de salida\r\n            tarjeta.style.transform = 'scale(0.8)';\r\n            tarjeta.style.opacity = '0';\r\n            \r\n            setTimeout(() => {\r\n                if (esVisible && (!esOculto || this.mostrandoTodos)) {\r\n                    this.mostrarProyecto(tarjeta, index);\r\n                } else {\r\n                    this.ocultarProyecto(tarjeta);\r\n                }\r\n            }, 150);\r\n        });\r\n    }\r\n\r\n    mostrarProyecto(tarjeta, index = 0) {\r\n        tarjeta.style.display = 'block';\r\n        \r\n        // Animación de entrada escalonada\r\n        setTimeout(() => {\r\n            tarjeta.style.transform = 'scale(1)';\r\n            tarjeta.style.opacity = '1';\r\n            tarjeta.style.transition = 'all 0.4s ease';\r\n        }, index * 50);\r\n    }\r\n\r\n    ocultarProyecto(tarjeta) {\r\n        tarjeta.style.display = 'none';\r\n        tarjeta.style.transform = 'scale(0.8)';\r\n        tarjeta.style.opacity = '0';\r\n    }\r\n\r\n    // ==================\r\n    // BOTÓN \"VER MÁS\"\r\n    // ==================\r\n    setupVerMasButton() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        this.btnVerMas.addEventListener('click', () => {\r\n            this.toggleVerMasProyectos();\r\n        });\r\n    }\r\n\r\n    toggleVerMasProyectos() {\r\n        if (!this.mostrandoTodos) {\r\n            this.mostrarMasProyectos();\r\n        } else {\r\n            this.mostrarMenosProyectos();\r\n        }\r\n    }\r\n\r\n    mostrarMasProyectos() {\r\n        this.btnVerMas.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Cargando proyectos...';\r\n        \r\n        setTimeout(() => {\r\n            const proyectosOcultos = this.getProyectosOcultos();\r\n            \r\n            proyectosOcultos.forEach((proyecto, index) => {\r\n                this.mostrarProyecto(proyecto, index);\r\n                proyecto.classList.remove('proyecto-oculto');\r\n            });\r\n            \r\n            this.mostrandoTodos = true;\r\n            this.actualizarBotonVerMas(this.filtroActual);\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('ver_mas_proyectos', 'galeria', this.filtroActual);\r\n            \r\n        }, 800);\r\n    }\r\n\r\n    mostrarMenosProyectos() {\r\n        // Ocultar proyectos adicionales\r\n        this.tarjetasProyecto.forEach(proyecto => {\r\n            if (!proyecto.classList.contains('proyecto-inicial')) {\r\n                proyecto.classList.add('proyecto-oculto');\r\n                this.ocultarProyecto(proyecto);\r\n            }\r\n        });\r\n        \r\n        this.mostrandoTodos = false;\r\n        this.aplicarFiltroConAnimacion(this.filtroActual);\r\n        this.actualizarBotonVerMas(this.filtroActual);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('ver_menos_proyectos', 'galeria', this.filtroActual);\r\n    }\r\n\r\n    getProyectosOcultos() {\r\n        return Array.from(this.tarjetasProyecto).filter(proyecto => {\r\n            const categoriaProyecto = proyecto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProyecto === this.filtroActual;\r\n            const esOculto = proyecto.classList.contains('proyecto-oculto');\r\n            \r\n            return esVisible && esOculto;\r\n        });\r\n    }\r\n\r\n    actualizarBotonVerMas(categoria = 'todos') {\r\n        if (!this.btnVerMas) return;\r\n\r\n        const proyectosOcultos = this.getProyectosOcultos();\r\n        \r\n        if (proyectosOcultos.length > 0 && !this.mostrandoTodos) {\r\n            this.btnVerMas.style.display = 'inline-block';\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Proyectos';\r\n        } else if (this.mostrandoTodos && proyectosOcultos.length === 0) {\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n            this.btnVerMas.style.display = 'inline-block';\r\n        } else {\r\n            this.btnVerMas.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // LIGHTBOX PARA IMÁGENES\r\n    // ==================\r\n    setupLightbox() {\r\n        this.imagenesGaleria.forEach(img => {\r\n            img.addEventListener('click', () => {\r\n                this.abrirLightbox(img);\r\n            });\r\n        });\r\n    }\r\n\r\n    abrirLightbox(imagen) {\r\n        // Crear modal\r\n        const modal = document.createElement('div');\r\n        modal.className = 'lightbox-modal';\r\n        modal.style.cssText = `\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100vw;\r\n            height: 100vh;\r\n            background: rgba(15, 35, 70, 0.95);\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            z-index: 9999;\r\n            cursor: zoom-out;\r\n            opacity: 0;\r\n            transition: opacity 0.3s ease;\r\n        `;\r\n\r\n        // Imagen ampliada\r\n        const imagenAmpliada = new Image();\r\n        imagenAmpliada.src = imagen.src;\r\n        imagenAmpliada.style.cssText = `\r\n            max-height: 90vh;\r\n            max-width: 90vw;\r\n            object-fit: contain;\r\n            border-radius: 8px;\r\n            box-shadow: 0 20px 40px rgba(0,0,0,0.3);\r\n            transform: scale(0.8);\r\n            transition: transform 0.3s ease;\r\n        `;\r\n\r\n        // Botón de cerrar\r\n        const closeBtn = document.createElement('span');\r\n        closeBtn.innerHTML = '&times;';\r\n        closeBtn.style.cssText = `\r\n            position: absolute;\r\n            top: 30px;\r\n            right: 30px;\r\n            color: white;\r\n            font-size: 40px;\r\n            cursor: pointer;\r\n            background: rgba(0,0,0,0.5);\r\n            width: 60px;\r\n            height: 60px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: background 0.3s ease;\r\n        `;\r\n\r\n        closeBtn.addEventListener('mouseenter', () => {\r\n            closeBtn.style.background = 'rgba(0,0,0,0.8)';\r\n        });\r\n\r\n        closeBtn.addEventListener('mouseleave', () => {\r\n            closeBtn.style.background = 'rgba(0,0,0,0.5)';\r\n        });\r\n\r\n        // Información del proyecto (opcional)\r\n        const infoContainer = this.crearInfoProyecto(imagen);\r\n\r\n        modal.appendChild(imagenAmpliada);\r\n        modal.appendChild(closeBtn);\r\n        if (infoContainer) {\r\n            modal.appendChild(infoContainer);\r\n        }\r\n\r\n        // Función para cerrar\r\n        const cerrarModal = () => {\r\n            modal.style.opacity = '0';\r\n            imagenAmpliada.style.transform = 'scale(0.8)';\r\n            \r\n            setTimeout(() => {\r\n                if (document.body.contains(modal)) {\r\n                    document.body.removeChild(modal);\r\n                }\r\n                document.body.style.overflow = '';\r\n            }, 300);\r\n        };\r\n\r\n        // Event listeners\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) cerrarModal();\r\n        });\r\n        \r\n        closeBtn.addEventListener('click', cerrarModal);\r\n        \r\n        // Cerrar con Escape\r\n        const handleEscape = (e) => {\r\n            if (e.key === 'Escape') {\r\n                cerrarModal();\r\n                document.removeEventListener('keydown', handleEscape);\r\n            }\r\n        };\r\n        document.addEventListener('keydown', handleEscape);\r\n\r\n        // Agregar al DOM\r\n        document.body.appendChild(modal);\r\n        document.body.style.overflow = 'hidden';\r\n\r\n        // Animar entrada\r\n        setTimeout(() => {\r\n            modal.style.opacity = '1';\r\n            imagenAmpliada.style.transform = 'scale(1)';\r\n        }, 50);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('lightbox_open', 'galeria', 'imagen_proyecto');\r\n    }\r\n\r\n    crearInfoProyecto(imagen) {\r\n        const tarjeta = imagen.closest('.tarjeta-proyecto');\r\n        if (!tarjeta) return null;\r\n\r\n        const titulo = tarjeta.querySelector('.proyecto-titulo')?.textContent;\r\n        const descripcion = tarjeta.querySelector('.proyecto-descripcion')?.textContent;\r\n        \r\n        if (!titulo) return null;\r\n\r\n        const infoContainer = document.createElement('div');\r\n        infoContainer.style.cssText = `\r\n            position: absolute;\r\n            bottom: 30px;\r\n            left: 30px;\r\n            right: 30px;\r\n            background: rgba(0,0,0,0.8);\r\n            color: white;\r\n            padding: 20px;\r\n            border-radius: 8px;\r\n            max-width: 500px;\r\n        `;\r\n\r\n        infoContainer.innerHTML = `\r\n            <h3 style=\"margin: 0 0 10px 0; font-size: 1.5rem;\">${titulo}</h3>\r\n            ${descripcion ? `<p style=\"margin: 0; opacity: 0.9;\">${descripcion}</p>` : ''}\r\n        `;\r\n\r\n        return infoContainer;\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    setupAnimations() {\r\n        // Animar proyectos al hacer scroll\r\n        BombasAyalaUtils.animateOnScroll('.tarjeta-proyecto, .paso-proceso, .titulo-seccion');\r\n        \r\n        // Animación específica para la galería\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0) scale(1)';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.tarjetasProyecto.forEach(tarjeta => {\r\n            tarjeta.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n            tarjeta.style.opacity = '0';\r\n            tarjeta.style.transform = 'translateY(30px) scale(0.95)';\r\n            observer.observe(tarjeta);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    filtrarPor(categoria) {\r\n        const filtro = document.querySelector(`[data-filtro=\"${categoria}\"]`);\r\n        if (filtro) {\r\n            this.cambiarFiltro(filtro);\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            totalProyectos: this.tarjetasProyecto.length,\r\n            proyectosVisibles: Array.from(this.tarjetasProyecto).filter(p => p.style.display !== 'none').length,\r\n            filtroActual: this.filtroActual,\r\n            mostrandoTodos: this.mostrandoTodos\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initGaleria() {\r\n    // Solo inicializar en páginas con galería\r\n    if (document.querySelector('.tarjeta-proyecto, .galeria-proyectos')) {\r\n        window.galeriaController = new GaleriaController();\r\n        \r\n        // API global\r\n        window.Galeria = {\r\n            filtrar: (categoria) => window.galeriaController?.filtrarPor(categoria),\r\n            stats: () => window.galeriaController?.getStats()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', initGaleria);\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = GaleriaController;\r\n}","/**\r\n * ========================================\r\n * HEADER.JS - BOMBAS AYALA\r\n * Header unificado responsivo y menú móvil\r\n * ========================================\r\n */\r\n\r\nclass HeaderController {\r\n    constructor() {\r\n        this.headerUnificado = document.querySelector('.header-unificado');\r\n        this.contactBar = document.querySelector('.contact-bar');\r\n        this.navPrincipal = document.querySelector('.nav-principal');\r\n        this.menuToggle = document.querySelector('.mobile-menu-toggle');\r\n        this.menuOverlay = document.querySelector('.mobile-menu-overlay');\r\n        this.navMenu = document.querySelector('.nav-menu');\r\n        \r\n        // Estados\r\n        this.isContactBarVisible = true;\r\n        this.lastScrollTop = 0;\r\n        this.scrollThreshold = 80;\r\n        this.isMobileMenuOpen = false;\r\n        \r\n        // Dimensiones\r\n        this.contactBarHeight = 0;\r\n        this.navHeight = 0;\r\n        this.totalHeaderHeight = 0;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.headerUnificado || !this.contactBar || !this.navPrincipal) {\r\n            console.warn('Header: Elementos principales no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.calculateDimensions();\r\n        this.setInitialBodyMargin();\r\n        this.setupScrollListener();\r\n        this.setupMobileMenu();\r\n        this.handleResize();\r\n        \r\n        console.log('✅ Header Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // CÁLCULO DE DIMENSIONES\r\n    // ==================\r\n    calculateDimensions() {\r\n        this.contactBarHeight = this.contactBar.offsetHeight;\r\n        this.navHeight = this.navPrincipal.offsetHeight;\r\n        this.totalHeaderHeight = this.contactBarHeight + this.navHeight;\r\n        \r\n        console.log('📐 Dimensiones calculadas:', {\r\n            contactBar: this.contactBarHeight,\r\n            nav: this.navHeight,\r\n            total: this.totalHeaderHeight\r\n        });\r\n    }\r\n\r\n    setInitialBodyMargin() {\r\n        if (window.innerWidth <= 767) {\r\n            document.body.style.marginTop = '100px';\r\n        } else {\r\n            document.body.style.marginTop = '120px';\r\n        }\r\n    }\r\n\r\n    updateBodyMargin() {\r\n        if (this.isContactBarVisible) {\r\n            if (window.innerWidth <= 767) {\r\n                document.body.style.marginTop = '100px';\r\n            } else {\r\n                document.body.style.marginTop = '120px';\r\n            }\r\n        } else {\r\n            if (window.innerWidth <= 767) {\r\n                document.body.style.marginTop = '70px';\r\n            } else {\r\n                document.body.style.marginTop = '80px';\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // SCROLL BEHAVIOR\r\n    // ==================\r\n    setupScrollListener() {\r\n        let ticking = false;\r\n\r\n        const handleScroll = () => {\r\n            if (!ticking) {\r\n                requestAnimationFrame(() => {\r\n                    this.handleScrollEvent();\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n    }\r\n\r\n    handleScrollEvent() {\r\n        const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n        const scrollDirection = currentScrollTop > this.lastScrollTop ? 'down' : 'up';\r\n        const scrollDistance = Math.abs(currentScrollTop - this.lastScrollTop);\r\n\r\n        // Evitar cambios por scrolls mínimos\r\n        if (scrollDistance < 5) {\r\n            this.lastScrollTop = currentScrollTop;\r\n            return;\r\n        }\r\n\r\n        if (scrollDirection === 'down' && currentScrollTop > this.scrollThreshold) {\r\n            this.hideContactBar();\r\n        } else if (scrollDirection === 'up' && currentScrollTop < this.scrollThreshold) {\r\n            this.showContactBar();\r\n        }\r\n\r\n        this.lastScrollTop = currentScrollTop;\r\n    }\r\n\r\n    hideContactBar() {\r\n        if (!this.isContactBarVisible) return;\r\n\r\n        this.isContactBarVisible = false;\r\n        this.contactBar.classList.add('hidden');\r\n        this.headerUnificado.classList.add('contact-hidden');\r\n        document.body.classList.add('contact-hidden');\r\n        \r\n        this.updateBodyMargin();\r\n        \r\n        console.log('📱 Contact bar oculto');\r\n    }\r\n\r\n    showContactBar() {\r\n        if (this.isContactBarVisible) return;\r\n\r\n        this.isContactBarVisible = true;\r\n        this.contactBar.classList.remove('hidden');\r\n        this.headerUnificado.classList.remove('contact-hidden');\r\n        document.body.classList.remove('contact-hidden');\r\n        \r\n        this.updateBodyMargin();\r\n        \r\n        console.log('📱 Contact bar mostrado');\r\n    }\r\n\r\n    // ==================\r\n    // MENÚ MÓVIL\r\n    // ==================\r\n    setupMobileMenu() {\r\n        if (!this.menuToggle) {\r\n            console.warn('Botón de menú móvil no encontrado');\r\n            return;\r\n        }\r\n\r\n        // Toggle del menú\r\n        this.menuToggle.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this.toggleMobileMenu();\r\n        });\r\n\r\n        // Cerrar con overlay\r\n        if (this.menuOverlay) {\r\n            this.menuOverlay.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.closeMobileMenu();\r\n            });\r\n        }\r\n\r\n        // Cerrar al hacer clic en enlaces\r\n        if (this.navMenu) {\r\n            const menuLinks = this.navMenu.querySelectorAll('a');\r\n            menuLinks.forEach(link => {\r\n                link.addEventListener('click', () => {\r\n                    setTimeout(() => {\r\n                        this.closeMobileMenu();\r\n                    }, 100);\r\n                });\r\n            });\r\n        }\r\n\r\n        // Cerrar con Escape\r\n        document.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Escape' && this.isMobileMenuOpen) {\r\n                this.closeMobileMenu();\r\n            }\r\n        });\r\n\r\n        // Cerrar en cambio de orientación\r\n        window.addEventListener('orientationchange', () => {\r\n            setTimeout(() => {\r\n                if (this.isMobileMenuOpen) {\r\n                    this.closeMobileMenu();\r\n                }\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    toggleMobileMenu() {\r\n        if (window.innerWidth > 767) return;\r\n\r\n        if (this.isMobileMenuOpen) {\r\n            this.closeMobileMenu();\r\n        } else {\r\n            this.openMobileMenu();\r\n        }\r\n    }\r\n\r\n    openMobileMenu() {\r\n        if (window.innerWidth > 767 || this.isMobileMenuOpen) return;\r\n\r\n        this.isMobileMenuOpen = true;\r\n        \r\n        // Aplicar clases\r\n        this.menuToggle?.classList.add('activo');\r\n        this.navMenu?.classList.add('activo');\r\n        this.menuOverlay?.classList.add('activo');\r\n        \r\n        // Prevenir scroll\r\n        document.body.style.overflow = 'hidden';\r\n        \r\n        // Clase adicional al contenedor\r\n        const navContainer = document.querySelector('.nav-container');\r\n        if (navContainer) {\r\n            navContainer.classList.add('menu-open');\r\n        }\r\n        \r\n        console.log('📱 Menú móvil abierto');\r\n    }\r\n\r\n    closeMobileMenu() {\r\n        if (!this.isMobileMenuOpen) return;\r\n\r\n        this.isMobileMenuOpen = false;\r\n        \r\n        // Remover clases\r\n        this.menuToggle?.classList.remove('activo');\r\n        this.navMenu?.classList.remove('activo');\r\n        this.menuOverlay?.classList.remove('activo');\r\n        \r\n        // Restaurar scroll\r\n        document.body.style.overflow = '';\r\n        \r\n        // Remover clase del contenedor\r\n        const navContainer = document.querySelector('.nav-container');\r\n        if (navContainer) {\r\n            navContainer.classList.remove('menu-open');\r\n        }\r\n        \r\n        console.log('📱 Menú móvil cerrado');\r\n    }\r\n\r\n    // ==================\r\n    // RESPONSIVE HANDLING\r\n    // ==================\r\n    handleResize() {\r\n        window.addEventListener('resize', BombasAyalaUtils.debounce(() => {\r\n            this.calculateDimensions();\r\n            this.updateBodyMargin();\r\n            \r\n            // Cerrar menú móvil si se cambia a desktop\r\n            if (window.innerWidth > 767 && this.isMobileMenuOpen) {\r\n                this.closeMobileMenu();\r\n            }\r\n            \r\n            this.setInitialBodyMargin();\r\n        }, 250));\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    forceShowContactBar() {\r\n        this.showContactBar();\r\n    }\r\n\r\n    forceHideContactBar() {\r\n        this.hideContactBar();\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            contactBarVisible: this.isContactBarVisible,\r\n            mobileMenuOpen: this.isMobileMenuOpen,\r\n            scrollPosition: window.pageYOffset,\r\n            isMobile: window.innerWidth <= 767,\r\n            dimensions: {\r\n                contactBar: this.contactBarHeight,\r\n                nav: this.navHeight,\r\n                total: this.totalHeaderHeight\r\n            }\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        // Limpiar estilos\r\n        document.body.style.marginTop = '';\r\n        document.body.style.overflow = '';\r\n        document.body.classList.remove('contact-hidden');\r\n        \r\n        // Cerrar menú si está abierto\r\n        if (this.isMobileMenuOpen) {\r\n            this.closeMobileMenu();\r\n        }\r\n        \r\n        console.log('🗑️ Header Controller destruido');\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initHeader() {\r\n    window.headerController = new HeaderController();\r\n    \r\n    // API global simplificada\r\n    window.Header = {\r\n        show: () => window.headerController?.forceShowContactBar(),\r\n        hide: () => window.headerController?.forceHideContactBar(),\r\n        getState: () => window.headerController?.getState(),\r\n        closeMenu: () => window.headerController?.closeMobileMenu()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initHeader);\r\n} else {\r\n    initHeader();\r\n}\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = HeaderController;\r\n}","// // Array de imágenes de fondo que se irán rotando\r\n// const backgroundImages = [\r\n//     'build/img/descargados/inicio/foto_1_1980.webp',\r\n//     'build/img/descargados/inicio/foto_2_1980.webp',\r\n//     'build/img/descargados/inicio/foto_3_1980.webp',\r\n//     'build/img/descargados/inicio/foto_4_1980.webp'\r\n// ];\r\n\r\n// // Array de imágenes principales que cambiarán\r\n// const mainImages = [\r\n//     'build/img/descargados/inicio/foto_1_500.webp',\r\n//     'build/img/descargados/inicio/foto_2_500.webp',\r\n//     'build/img/descargados/inicio/foto_3_500.webp',\r\n//     'build/img/descargados/inicio/foto_4_500.webp'\r\n// ];\r\n\r\n// let currentImageIndex = 0;\r\n// const heroBackground = document.getElementById('heroBackground');\r\n// const heroImage = document.getElementById('heroImage');\r\n// const loadingIndicator = document.getElementById('loadingIndicator');\r\n\r\n// // Función para cambiar imagen de fondo\r\n// function changeBackgroundImage() {\r\n//     currentImageIndex = (currentImageIndex + 1) % backgroundImages.length;\r\n    \r\n//     heroBackground.style.backgroundImage = `url('${backgroundImages[currentImageIndex]}')`;\r\n    \r\n//     // También cambiar la imagen principal\r\n//     heroImage.src = mainImages[currentImageIndex];\r\n// }\r\n\r\n// // Función de inicialización\r\n// function initializeHero() {\r\n//     // Establecer primera imagen\r\n//     heroBackground.style.backgroundImage = `url('${backgroundImages[0]}')`;\r\n//     heroImage.src = mainImages[0];\r\n    \r\n//     // Ocultar indicador de carga después de un momento\r\n//     setTimeout(() => {\r\n//         loadingIndicator.classList.add('hidden');\r\n//     }, 1500);\r\n\r\n//     // Cambiar imágenes cada 5 segundos\r\n//     setInterval(changeBackgroundImage, 5000);\r\n// }\r\n\r\n// // Función para smooth scroll en los enlaces\r\n// function initializeSmoothScroll() {\r\n//     document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n//         anchor.addEventListener('click', function (e) {\r\n//             e.preventDefault();\r\n//             const target = document.querySelector(this.getAttribute('href'));\r\n//             if (target) {\r\n//                 target.scrollIntoView({\r\n//                     behavior: 'smooth',\r\n//                     block: 'start'\r\n//                 });\r\n//             }\r\n//         });\r\n//     });\r\n// }\r\n\r\n// // Función para detectar cuando el elemento está en viewport\r\n// function initializeScrollAnimations() {\r\n//     const observerOptions = {\r\n//         threshold: 0.1,\r\n//         rootMargin: '0px 0px -50px 0px'\r\n//     };\r\n\r\n//     const observer = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 entry.target.classList.add('animate-in');\r\n//             }\r\n//         });\r\n//     }, observerOptions);\r\n\r\n//     // Observar elementos animables\r\n//     document.querySelectorAll('.hero-content, .hero-image').forEach(el => {\r\n//         observer.observe(el);\r\n//     });\r\n// }\r\n\r\n// // Función para precargar imágenes\r\n// function preloadImages() {\r\n//     [...backgroundImages, ...mainImages].forEach(src => {\r\n//         const img = new Image();\r\n//         img.src = src;\r\n//     });\r\n// }\r\n\r\n// // Inicializar todo cuando el DOM esté listo\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     preloadImages();\r\n//     initializeHero();\r\n//     initializeSmoothScroll();\r\n//     initializeScrollAnimations();\r\n// });\r\n\r\n// // Optimización de rendimiento: pausar animaciones cuando no están visibles\r\n// document.addEventListener('visibilitychange', function() {\r\n//     const heroSection = document.getElementById('hero');\r\n//     if (document.hidden) {\r\n//         heroSection.style.animationPlayState = 'paused';\r\n//     } else {\r\n//         heroSection.style.animationPlayState = 'running';\r\n//     }\r\n// });\r\n\r\n/**\r\n * ========================================\r\n * INICIO.JS - BOMBAS AYALA\r\n * Hero dinámico y funcionalidades de página principal\r\n * ========================================\r\n */\r\n\r\nclass InicioController {\r\n    constructor() {\r\n        // Elementos del hero\r\n        this.heroBackground = document.getElementById('heroBackground');\r\n        this.heroImage = document.getElementById('heroImage');\r\n        this.loadingIndicator = document.getElementById('loadingIndicator');\r\n        this.heroSection = document.getElementById('hero');\r\n        \r\n        // Arrays de imágenes\r\n        this.backgroundImages = [\r\n            'build/img/descargados/inicio/foto_1_1980.webp',\r\n            'build/img/descargados/inicio/foto_2_1980.webp',\r\n            'build/img/descargados/inicio/foto_3_1980.webp',\r\n            'build/img/descargados/inicio/foto_4_1980.webp'\r\n        ];\r\n        \r\n        this.mainImages = [\r\n            'build/img/descargados/inicio/foto_1_500.webp',\r\n            'build/img/descargados/inicio/foto_2_500.webp',\r\n            'build/img/descargados/inicio/foto_3_500.webp',\r\n            'build/img/descargados/inicio/foto_4_500.webp'\r\n        ];\r\n        \r\n        // Estado\r\n        this.currentImageIndex = 0;\r\n        this.intervalId = null;\r\n        this.isVisible = true;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.heroBackground || !this.heroImage) {\r\n            console.warn('Hero: Elementos principales no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.preloadImages();\r\n        this.initializeHero();\r\n        this.initScrollAnimations();\r\n        this.setupVisibilityControl();\r\n        \r\n        console.log('✅ Inicio Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // HERO DINÁMICO\r\n    // ==================\r\n    initializeHero() {\r\n        // Establecer primera imagen\r\n        this.setBackgroundImage(0);\r\n        this.setMainImage(0);\r\n        \r\n        // Ocultar indicador de carga\r\n        setTimeout(() => {\r\n            if (this.loadingIndicator) {\r\n                this.loadingIndicator.classList.add('hidden');\r\n            }\r\n        }, 1500);\r\n\r\n        // Iniciar rotación automática\r\n        this.startImageRotation();\r\n    }\r\n\r\n    setBackgroundImage(index) {\r\n        if (this.heroBackground) {\r\n            this.heroBackground.style.backgroundImage = `url('${this.backgroundImages[index]}')`;\r\n        }\r\n    }\r\n\r\n    setMainImage(index) {\r\n        if (this.heroImage) {\r\n            this.heroImage.src = this.mainImages[index];\r\n        }\r\n    }\r\n\r\n    changeToNextImage() {\r\n        this.currentImageIndex = (this.currentImageIndex + 1) % this.backgroundImages.length;\r\n        \r\n        this.setBackgroundImage(this.currentImageIndex);\r\n        this.setMainImage(this.currentImageIndex);\r\n        \r\n        console.log(`🖼️ Imagen cambiada a: ${this.currentImageIndex + 1}`);\r\n    }\r\n\r\n    startImageRotation() {\r\n        // Cambiar imágenes cada 5 segundos\r\n        this.intervalId = setInterval(() => {\r\n            if (this.isVisible) {\r\n                this.changeToNextImage();\r\n            }\r\n        }, 5000);\r\n    }\r\n\r\n    stopImageRotation() {\r\n        if (this.intervalId) {\r\n            clearInterval(this.intervalId);\r\n            this.intervalId = null;\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES SCROLL\r\n    // ==================\r\n    initScrollAnimations() {\r\n        // Animar elementos del hero\r\n        BombasAyalaUtils.animateOnScroll('.hero-content, .hero-image');\r\n        \r\n        // Animaciones adicionales para otros elementos\r\n        BombasAyalaUtils.animateOnScroll('.estadistica-item, .servicio-destacado, .testimonio-card');\r\n        \r\n        // Contadores animados\r\n        this.initCounters();\r\n    }\r\n\r\n    initCounters() {\r\n        const contadores = document.querySelectorAll('.numero-estadistica');\r\n        \r\n        if (contadores.length === 0) return;\r\n        \r\n        const observerContadores = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const elemento = entry.target;\r\n                    const objetivo = parseInt(elemento.getAttribute('data-numero'));\r\n                    \r\n                    if (objetivo) {\r\n                        BombasAyalaUtils.animateCounter(elemento, 0, objetivo, 2000);\r\n                        observerContadores.unobserve(elemento);\r\n                    }\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n        \r\n        contadores.forEach(contador => {\r\n            observerContadores.observe(contador);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // CONTROL DE VISIBILIDAD\r\n    // ==================\r\n    setupVisibilityControl() {\r\n        // Pausar animaciones cuando la página no está visible\r\n        document.addEventListener('visibilitychange', () => {\r\n            if (document.hidden) {\r\n                this.pauseAnimations();\r\n            } else {\r\n                this.resumeAnimations();\r\n            }\r\n        });\r\n\r\n        // Controlar animaciones según el scroll\r\n        let lastScrollTop = 0;\r\n        window.addEventListener('scroll', BombasAyalaUtils.debounce(() => {\r\n            const scrollTop = window.pageYOffset;\r\n            const heroRect = this.heroSection?.getBoundingClientRect();\r\n            \r\n            // Si el hero no está visible, pausar rotación\r\n            if (heroRect && (heroRect.bottom < 0 || heroRect.top > window.innerHeight)) {\r\n                this.isVisible = false;\r\n            } else {\r\n                this.isVisible = true;\r\n            }\r\n            \r\n            lastScrollTop = scrollTop;\r\n        }, 100), { passive: true });\r\n    }\r\n\r\n    pauseAnimations() {\r\n        this.isVisible = false;\r\n        if (this.heroSection) {\r\n            this.heroSection.style.animationPlayState = 'paused';\r\n        }\r\n        console.log('⏸️ Animaciones pausadas');\r\n    }\r\n\r\n    resumeAnimations() {\r\n        this.isVisible = true;\r\n        if (this.heroSection) {\r\n            this.heroSection.style.animationPlayState = 'running';\r\n        }\r\n        console.log('▶️ Animaciones reanudadas');\r\n    }\r\n\r\n    // ==================\r\n    // PRELOAD DE IMÁGENES\r\n    // ==================\r\n    preloadImages() {\r\n        const allImages = [...this.backgroundImages, ...this.mainImages];\r\n        BombasAyalaUtils.preloadImages(allImages);\r\n        \r\n        console.log(`🖼️ Precargando ${allImages.length} imágenes del hero`);\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    nextImage() {\r\n        this.changeToNextImage();\r\n    }\r\n\r\n    previousImage() {\r\n        this.currentImageIndex = this.currentImageIndex - 1;\r\n        if (this.currentImageIndex < 0) {\r\n            this.currentImageIndex = this.backgroundImages.length - 1;\r\n        }\r\n        \r\n        this.setBackgroundImage(this.currentImageIndex);\r\n        this.setMainImage(this.currentImageIndex);\r\n    }\r\n\r\n    goToImage(index) {\r\n        if (index >= 0 && index < this.backgroundImages.length) {\r\n            this.currentImageIndex = index;\r\n            this.setBackgroundImage(this.currentImageIndex);\r\n            this.setMainImage(this.currentImageIndex);\r\n        }\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            currentImage: this.currentImageIndex,\r\n            totalImages: this.backgroundImages.length,\r\n            isVisible: this.isVisible,\r\n            isRotating: this.intervalId !== null\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        this.stopImageRotation();\r\n        console.log('🗑️ Inicio Controller destruido');\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction changeBackgroundImage() {\r\n    if (window.inicioController) {\r\n        window.inicioController.nextImage();\r\n    }\r\n}\r\n\r\nfunction initializeHero() {\r\n    // Esta función se mantiene para compatibilidad\r\n    console.log('🔄 initializeHero legacy llamada');\r\n}\r\n\r\nfunction initializeSmoothScroll() {\r\n    // Ya manejado por utils.js\r\n    console.log('🔄 initializeSmoothScroll legacy llamada');\r\n}\r\n\r\nfunction initializeScrollAnimations() {\r\n    // Ya manejado por el controller principal\r\n    console.log('🔄 initializeScrollAnimations legacy llamada');\r\n}\r\n\r\nfunction preloadImages() {\r\n    // Ya manejado por el controller principal\r\n    console.log('🔄 preloadImages legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initInicio() {\r\n    // Solo inicializar en página de inicio\r\n    if (document.querySelector('#heroBackground, .hero-section')) {\r\n        window.inicioController = new InicioController();\r\n        \r\n        // API global\r\n        window.Hero = {\r\n            next: () => window.inicioController?.nextImage(),\r\n            previous: () => window.inicioController?.previousImage(),\r\n            goTo: (index) => window.inicioController?.goToImage(index),\r\n            getState: () => window.inicioController?.getState(),\r\n            pause: () => window.inicioController?.pauseAnimations(),\r\n            resume: () => window.inicioController?.resumeAnimations()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initInicio();\r\n    \r\n    // Llamar funciones legacy para compatibilidad\r\n    preloadImages();\r\n    initializeHero();\r\n    initializeSmoothScroll();\r\n    initializeScrollAnimations();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = InicioController;\r\n}","// /**\r\n//  * ================================\r\n//  * FLOTANTES.JS - BOMBAS AYALA LIGHT\r\n//  * Versión ligera y funcional\r\n//  * ================================\r\n//  */\r\n\r\n// class FlotantesSimple {\r\n//     constructor() {\r\n//         this.flotantesContainer = document.querySelector('.flotantes');\r\n//         this.flotantes = document.querySelectorAll('.flotante');\r\n        \r\n//         this.isVisible = true;\r\n//         this.lastScrollTop = 0;\r\n        \r\n//         this.init();\r\n//     }\r\n\r\n//     init() {\r\n//         if (!this.flotantesContainer) return;\r\n\r\n//         this.setupScrollBehavior();\r\n//         this.setupClickEffects();\r\n//         this.setupTooltips();\r\n        \r\n//         console.log('💫 Flotantes Simple iniciado');\r\n//     }\r\n\r\n//     // ==================\r\n//     // SCROLL BEHAVIOR\r\n//     // ==================\r\n    \r\n//     setupScrollBehavior() {\r\n//         let scrollTimer;\r\n        \r\n//         window.addEventListener('scroll', () => {\r\n//             const currentScroll = window.pageYOffset;\r\n//             const scrollDirection = currentScroll > this.lastScrollTop ? 'down' : 'up';\r\n            \r\n//             // Ocultar al bajar, mostrar al subir\r\n//             if (currentScroll > 200) {\r\n//                 if (scrollDirection === 'down') {\r\n//                     this.hide();\r\n//                 } else if (scrollDirection === 'up') {\r\n//                     this.show();\r\n//                 }\r\n//             } else {\r\n//                 this.show();\r\n//             }\r\n            \r\n//             this.lastScrollTop = currentScroll;\r\n//         }, { passive: true });\r\n//     }\r\n\r\n//     // ==================\r\n//     // EFECTOS DE CLICK\r\n//     // ==================\r\n    \r\n//     setupClickEffects() {\r\n//         this.flotantes.forEach((flotante) => {\r\n//             flotante.addEventListener('click', (e) => {\r\n//                 this.addClickEffect(flotante);\r\n//                 this.trackClick(flotante);\r\n//             });\r\n//         });\r\n//     }\r\n\r\n//     addClickEffect(flotante) {\r\n//         flotante.style.transform = 'scale(0.9)';\r\n        \r\n//         setTimeout(() => {\r\n//             flotante.style.transform = '';\r\n//         }, 150);\r\n        \r\n//         // Vibración en móviles\r\n//         if ('vibrate' in navigator) {\r\n//             navigator.vibrate(50);\r\n//         }\r\n//     }\r\n\r\n//     trackClick(flotante) {\r\n//         const type = flotante.classList.contains('whatsapp') ? 'WhatsApp' :\r\n//                     flotante.classList.contains('llamada') ? 'Llamada' : 'Instagram';\r\n        \r\n//         console.log(`📱 Click en ${type}`);\r\n        \r\n//         // Google Analytics si existe\r\n//         if (typeof gtag !== 'undefined') {\r\n//             gtag('event', 'flotante_click', {\r\n//                 'flotante_type': type\r\n//             });\r\n//         }\r\n//     }\r\n\r\n//     // ==================\r\n//     // TOOLTIPS SIMPLES\r\n//     // ==================\r\n    \r\n//     setupTooltips() {\r\n//         const tooltips = [\r\n//             'Chatea por WhatsApp',\r\n//             'Llámanos ahora',\r\n//             'Síguenos en Instagram'\r\n//         ];\r\n        \r\n//         this.flotantes.forEach((flotante, index) => {\r\n//             flotante.setAttribute('data-tooltip', tooltips[index]);\r\n//         });\r\n//     }\r\n\r\n//     // ==================\r\n//     // CONTROL DE VISIBILIDAD\r\n//     // ==================\r\n    \r\n//     show() {\r\n//         if (this.isVisible) return;\r\n        \r\n//         this.flotantesContainer.style.opacity = '1';\r\n//         this.flotantesContainer.style.visibility = 'visible';\r\n//         this.flotantesContainer.style.transform = 'translateY(-50%) translateX(0)';\r\n        \r\n//         this.isVisible = true;\r\n//     }\r\n\r\n//     hide() {\r\n//         if (!this.isVisible) return;\r\n        \r\n//         this.flotantesContainer.style.opacity = '0';\r\n//         this.flotantesContainer.style.visibility = 'hidden';\r\n//         this.flotantesContainer.style.transform = 'translateY(-50%) translateX(50px)';\r\n        \r\n//         this.isVisible = false;\r\n//     }\r\n\r\n//     // ==================\r\n//     // API PÚBLICA\r\n//     // ==================\r\n    \r\n//     forceShow() { this.show(); }\r\n//     forceHide() { this.hide(); }\r\n//     toggle() { this.isVisible ? this.hide() : this.show(); }\r\n// }\r\n\r\n// // ==================\r\n// // INICIALIZACIÓN\r\n// // ==================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     window.flotantesController = new FlotantesSimple();\r\n    \r\n//     // API global simple\r\n//     window.Flotantes = {\r\n//         show: () => window.flotantesController?.forceShow(),\r\n//         hide: () => window.flotantesController?.forceHide(),\r\n//         toggle: () => window.flotantesController?.toggle()\r\n//     };\r\n// });\r\n\r\n// // ==================\r\n// // WHATSAPP CON MENSAJE\r\n// // ==================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const whatsappBtn = document.querySelector('.flotante.whatsapp');\r\n    \r\n//     if (whatsappBtn) {\r\n//         whatsappBtn.addEventListener('click', function(e) {\r\n//             e.preventDefault();\r\n            \r\n//             const message = encodeURIComponent(\r\n//                 'Hola! Me interesa conocer más sobre sus servicios de bombas de agua. 💧'\r\n//             );\r\n            \r\n//             window.open(`https://wa.me/51997984102?text=${message}`, '_blank');\r\n//         });\r\n//     }\r\n// });\r\n\r\n/**\r\n * ========================================\r\n * FLOTANTES.JS - BOMBAS AYALA\r\n * Elementos flotantes y funcionalidad WhatsApp\r\n * ========================================\r\n */\r\n\r\nclass FlotantesController {\r\n    constructor() {\r\n        this.flotantesContainer = document.querySelector('.flotantes');\r\n        this.flotantes = document.querySelectorAll('.flotante');\r\n        \r\n        // Estado\r\n        this.isVisible = true;\r\n        this.lastScrollTop = 0;\r\n        this.hideThreshold = 200;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.flotantesContainer || this.flotantes.length === 0) {\r\n            console.warn('Flotantes: Elementos no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.setupScrollBehavior();\r\n        this.setupClickEffects();\r\n        this.setupTooltips();\r\n        this.setupWhatsAppIntegration();\r\n        this.adjustForMobile();\r\n        \r\n        console.log('✅ Flotantes Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // COMPORTAMIENTO SCROLL\r\n    // ==================\r\n    setupScrollBehavior() {\r\n        window.addEventListener('scroll', BombasAyalaUtils.debounce(() => {\r\n            const currentScroll = window.pageYOffset;\r\n            const scrollDirection = currentScroll > this.lastScrollTop ? 'down' : 'up';\r\n            \r\n            // Mostrar/ocultar según scroll\r\n            if (currentScroll > this.hideThreshold) {\r\n                if (scrollDirection === 'down') {\r\n                    this.hide();\r\n                } else if (scrollDirection === 'up') {\r\n                    this.show();\r\n                }\r\n            } else {\r\n                this.show();\r\n            }\r\n            \r\n            this.lastScrollTop = currentScroll;\r\n        }, 100), { passive: true });\r\n    }\r\n\r\n    // ==================\r\n    // EFECTOS DE CLICK\r\n    // ==================\r\n    setupClickEffects() {\r\n        this.flotantes.forEach((flotante) => {\r\n            flotante.addEventListener('click', (e) => {\r\n                this.addClickEffect(flotante);\r\n                this.trackClick(flotante);\r\n            });\r\n        });\r\n    }\r\n\r\n    addClickEffect(flotante) {\r\n        // Efecto visual de click\r\n        flotante.style.transform = 'scale(0.9)';\r\n        \r\n        setTimeout(() => {\r\n            flotante.style.transform = '';\r\n        }, 150);\r\n        \r\n        // Vibración en móviles\r\n        if ('vibrate' in navigator) {\r\n            navigator.vibrate(50);\r\n        }\r\n    }\r\n\r\n    trackClick(flotante) {\r\n        let tipo = 'unknown';\r\n        \r\n        if (flotante.classList.contains('whatsapp')) {\r\n            tipo = 'WhatsApp';\r\n        } else if (flotante.classList.contains('llamada') || flotante.classList.contains('phone')) {\r\n            tipo = 'Llamada';\r\n        } else if (flotante.classList.contains('instagram')) {\r\n            tipo = 'Instagram';\r\n        }\r\n        \r\n        console.log(`📱 Click en flotante: ${tipo}`);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('flotante_click', 'contact', tipo);\r\n    }\r\n\r\n    // ==================\r\n    // TOOLTIPS\r\n    // ==================\r\n    setupTooltips() {\r\n        const tooltips = [\r\n            'Chatea por WhatsApp',\r\n            'Llámanos ahora',\r\n            'Síguenos en Instagram'\r\n        ];\r\n        \r\n        this.flotantes.forEach((flotante, index) => {\r\n            if (index < tooltips.length) {\r\n                flotante.setAttribute('data-tooltip', tooltips[index]);\r\n                flotante.setAttribute('aria-label', tooltips[index]);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // INTEGRACIÓN WHATSAPP\r\n    // ==================\r\n    setupWhatsAppIntegration() {\r\n        const whatsappBtn = document.querySelector('.flotante.whatsapp');\r\n        \r\n        if (whatsappBtn) {\r\n            whatsappBtn.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                \r\n                const mensaje = this.createDefaultWhatsAppMessage();\r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                console.log('📱 WhatsApp abierto desde flotante');\r\n            });\r\n        }\r\n\r\n        // Otros botones de WhatsApp en la página\r\n        this.setupOtherWhatsAppButtons();\r\n    }\r\n\r\n    setupOtherWhatsAppButtons() {\r\n        const whatsappButtons = document.querySelectorAll('[data-whatsapp], .boton-whatsapp');\r\n        \r\n        whatsappButtons.forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                \r\n                const customMessage = button.getAttribute('data-message');\r\n                const producto = button.getAttribute('data-producto');\r\n                const specs = button.getAttribute('data-especificaciones');\r\n                \r\n                let mensaje;\r\n                \r\n                if (customMessage) {\r\n                    mensaje = customMessage;\r\n                } else if (producto) {\r\n                    mensaje = this.createProductWhatsAppMessage(producto, specs);\r\n                } else {\r\n                    mensaje = this.createDefaultWhatsAppMessage();\r\n                }\r\n                \r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                console.log('📱 WhatsApp abierto:', { producto, specs });\r\n            });\r\n        });\r\n    }\r\n\r\n    createDefaultWhatsAppMessage() {\r\n        return '¡Hola! Me interesa conocer más sobre sus servicios de bombas de agua. 💧\\n\\n¿Podrían brindarme información sobre sus productos y servicios?';\r\n    }\r\n\r\n    createProductWhatsAppMessage(producto, specs = '') {\r\n        let mensaje = `¡Hola! Me interesa el siguiente producto:\\n\\n`;\r\n        mensaje += `🔧 **Producto:** ${producto}\\n`;\r\n        \r\n        if (specs) {\r\n            mensaje += `📋 **Especificaciones:** ${specs}\\n`;\r\n        }\r\n        \r\n        mensaje += `\\n¿Podrían enviarme más información y cotización?\\n\\n¡Gracias!`;\r\n        \r\n        return mensaje;\r\n    }\r\n\r\n    // ==================\r\n    // CONTROL DE VISIBILIDAD\r\n    // ==================\r\n    show() {\r\n        if (this.isVisible) return;\r\n        \r\n        this.flotantesContainer.style.opacity = '1';\r\n        this.flotantesContainer.style.visibility = 'visible';\r\n        this.flotantesContainer.style.transform = this.getTransformForDevice();\r\n        \r\n        this.isVisible = true;\r\n    }\r\n\r\n    hide() {\r\n        if (!this.isVisible) return;\r\n        \r\n        this.flotantesContainer.style.opacity = '0';\r\n        this.flotantesContainer.style.visibility = 'hidden';\r\n        this.flotantesContainer.style.transform = this.getHiddenTransformForDevice();\r\n        \r\n        this.isVisible = false;\r\n    }\r\n\r\n    getTransformForDevice() {\r\n        return BombasAyalaUtils.isMobile() \r\n            ? 'translateY(0) translateX(0)' \r\n            : 'translateY(-50%) translateX(0)';\r\n    }\r\n\r\n    getHiddenTransformForDevice() {\r\n        return BombasAyalaUtils.isMobile() \r\n            ? 'translateY(0) translateX(100px)' \r\n            : 'translateY(-50%) translateX(100px)';\r\n    }\r\n\r\n    // ==================\r\n    // RESPONSIVE HANDLING\r\n    // ==================\r\n    adjustForMobile() {\r\n        if (BombasAyalaUtils.isMobile()) {\r\n            this.flotantesContainer.style.cssText += `\r\n                position: fixed;\r\n                bottom: 20px;\r\n                right: 20px;\r\n                top: auto;\r\n                transform: none;\r\n                flex-direction: row;\r\n                gap: 10px;\r\n            `;\r\n        }\r\n        \r\n        // Escuchar cambios de tamaño\r\n        window.addEventListener('resize', BombasAyalaUtils.debounce(() => {\r\n            this.adjustForMobile();\r\n        }, 250));\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    forceShow() {\r\n        this.show();\r\n    }\r\n\r\n    forceHide() {\r\n        this.hide();\r\n    }\r\n\r\n    toggle() {\r\n        if (this.isVisible) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            isVisible: this.isVisible,\r\n            isMobile: BombasAyalaUtils.isMobile(),\r\n            totalFlotantes: this.flotantes.length\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES ADICIONALES\r\n// ==================\r\n\r\n// Inicializar cotizaciones via WhatsApp\r\nfunction inicializarCotizaciones() {\r\n    const botonesCotizar = document.querySelectorAll('.boton-cotizar, .boton-producto-cotizar');\r\n    \r\n    botonesCotizar.forEach(boton => {\r\n        boton.addEventListener('click', function() {\r\n            const producto = this.dataset.producto || 'Producto no especificado';\r\n            const specs = this.dataset.especificaciones || '';\r\n            const telefono = this.dataset.whatsapp || '51997984102';\r\n            \r\n            const datos = {\r\n                producto: producto,\r\n                descripcion: specs\r\n            };\r\n            \r\n            const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n            BombasAyalaUtils.openWhatsApp(mensaje, telefono);\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('cotizacion_click', 'productos', producto);\r\n        });\r\n    });\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initFlotantes() {\r\n    window.flotantesController = new FlotantesController();\r\n    \r\n    // Inicializar cotizaciones\r\n    inicializarCotizaciones();\r\n    \r\n    // API global\r\n    window.Flotantes = {\r\n        show: () => window.flotantesController?.forceShow(),\r\n        hide: () => window.flotantesController?.forceHide(),\r\n        toggle: () => window.flotantesController?.toggle(),\r\n        getState: () => window.flotantesController?.getState()\r\n    };\r\n    \r\n    // API WhatsApp global\r\n    window.WhatsApp = {\r\n        open: (mensaje, telefono) => BombasAyalaUtils.openWhatsApp(mensaje, telefono),\r\n        quote: (datos) => {\r\n            const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n        }\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', initFlotantes);\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = FlotantesController;\r\n}","// /**\r\n//  * ================================\r\n//  * NOSOTROS.JS - BOMBAS AYALA\r\n//  * JavaScript completo para página Nosotros\r\n//  * ================================ */\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n    \r\n//     // ==================\r\n//     // 1. CONTADORES ANIMADOS\r\n//     // ==================\r\n    \r\n//     const contadores = document.querySelectorAll('.numero-estadistica');\r\n    \r\n//     const animarContador = (elemento) => {\r\n//         const objetivo = parseInt(elemento.getAttribute('data-numero'));\r\n//         const duracion = 2000; // 2 segundos\r\n//         const incremento = objetivo / (duracion / 16); // 60 FPS\r\n//         let actual = 0;\r\n        \r\n//         const timer = setInterval(() => {\r\n//             actual += incremento;\r\n//             if (actual >= objetivo) {\r\n//                 elemento.textContent = objetivo.toLocaleString();\r\n//                 clearInterval(timer);\r\n//             } else {\r\n//                 elemento.textContent = Math.floor(actual).toLocaleString();\r\n//             }\r\n//         }, 16);\r\n//     };\r\n    \r\n//     // Observer para contadores\r\n//     const observerContadores = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 animarContador(entry.target);\r\n//                 observerContadores.unobserve(entry.target);\r\n//             }\r\n//         });\r\n//     }, { threshold: 0.5 });\r\n    \r\n//     contadores.forEach(contador => {\r\n//         observerContadores.observe(contador);\r\n//     });\r\n\r\n//     // ==================\r\n//     // 2. MAPA INTERACTIVO - LIMA METROPOLITANA (4 ZONAS)\r\n//     // ==================\r\n    \r\n//     const zonas = {\r\n//         norte: {\r\n//             distritos: [\r\n//                 'Ancón', 'Carabayllo', 'Comas', 'Independencia', \r\n//                 'Los Olivos', 'Puente Piedra', 'San Martín de Porres', 'Santa Rosa'\r\n//             ],\r\n//             color: 'var(--cian-principal)',\r\n//             descripcion: 'Lima Norte - 8 distritos'\r\n//         },\r\n//         sur: {\r\n//             distritos: [\r\n//                 'Chorrillos', 'Lurín', 'Pachacámac', 'Pucusana', \r\n//                 'San Juan de Miraflores', 'Villa El Salvador', 'Villa María del Triunfo'\r\n//             ],\r\n//             color: 'var(--verde-esmeralda)',\r\n//             descripcion: 'Lima Sur - 7 distritos'\r\n//         },\r\n//         este: {\r\n//             distritos: [\r\n//                 'Ate', 'Chaclacayo', 'Cieneguilla', 'El Agustino', \r\n//                 'La Molina', 'Lurigancho-Chosica', 'San Juan de Lurigancho', 'Santa Anita'\r\n//             ],\r\n//             color: 'var(--naranja-tecnico)',\r\n//             descripcion: 'Lima Este - 8 distritos'\r\n//         },\r\n//         oeste: {\r\n//             distritos: [\r\n//                 'Barranco', 'Breña', 'Callao', 'Jesús María', 'La Victoria', \r\n//                 'Lima Cercado', 'Lince', 'Magdalena del Mar', 'Miraflores', \r\n//                 'Pueblo Libre', 'Rímac', 'San Borja', 'San Isidro', 'San Luis', \r\n//                 'San Miguel', 'Santiago de Surco', 'Surquillo'\r\n//             ],\r\n//             color: 'var(--azul-claro)',\r\n//             descripcion: 'Lima Oeste - 17 distritos'\r\n//         }\r\n//     };\r\n\r\n//     // Función para mostrar distritos\r\n//     const mostrarDistritos = (tipoZona) => {\r\n//         const listaDistritos = document.querySelector('.lista-distritos');\r\n//         const zona = zonas[tipoZona];\r\n        \r\n//         if (!listaDistritos || !zona) return;\r\n        \r\n//         listaDistritos.innerHTML = `\r\n//             <div class=\"zona-titulo\" style=\"color: ${zona.color}; font-weight: 700;\">\r\n//                 <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                     <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n//                     <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n//                 </svg>\r\n//                 ${zona.descripcion}\r\n//             </div>\r\n//             <div class=\"distritos-grid\">\r\n//                 ${zona.distritos.map(distrito => `\r\n//                     <div class=\"distrito-item\" style=\"color: ${zona.color}; font-weight: 600;\">\r\n//                         <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                             <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n//                             <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n//                         </svg>\r\n//                         ${distrito}\r\n//                     </div>\r\n//                 `).join('')}\r\n//             </div>\r\n//         `;\r\n        \r\n//         // Animar entrada de distritos\r\n//         const items = listaDistritos.querySelectorAll('.distrito-item');\r\n//         items.forEach((item, index) => {\r\n//             item.style.opacity = '0';\r\n//             item.style.transform = 'translateX(-20px)';\r\n//             setTimeout(() => {\r\n//                 item.style.transition = 'all 0.3s ease';\r\n//                 item.style.opacity = '1';\r\n//                 item.style.transform = 'translateX(0)';\r\n//             }, index * 50);\r\n//         });\r\n//     };\r\n\r\n//     // Event listeners para zonas del mapa (4 zonas)\r\n//     const zonasElementos = document.querySelectorAll('.zona-norte, .zona-sur, .zona-este, .zona-oeste');\r\n    \r\n//     zonasElementos.forEach(zona => {\r\n//         zona.addEventListener('mouseenter', function() {\r\n//             const tipoZona = this.classList.contains('zona-norte') ? 'norte' : \r\n//                             this.classList.contains('zona-sur') ? 'sur' :\r\n//                             this.classList.contains('zona-este') ? 'este' : 'oeste';\r\n            \r\n//             mostrarDistritos(tipoZona);\r\n//         });\r\n        \r\n//         // Efecto visual en hover\r\n//         zona.addEventListener('mouseover', function() {\r\n//             this.style.transform = 'scale(1.05)';\r\n//             this.style.zIndex = '10';\r\n//         });\r\n        \r\n//         zona.addEventListener('mouseout', function() {\r\n//             this.style.transform = 'scale(1)';\r\n//             this.style.zIndex = '1';\r\n//         });\r\n//     });\r\n\r\n//     // ==================\r\n//     // 3. ANIMACIÓN SCROLL REVEAL\r\n//     // ==================\r\n    \r\n//     const elementosAnimados = document.querySelectorAll('.estadistica-item, .mision-section, .vision-section, .valor-item');\r\n    \r\n//     const observerAnimacion = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 entry.target.style.opacity = '1';\r\n//                 entry.target.style.transform = 'translateY(0)';\r\n//                 entry.target.style.transition = 'all 0.6s ease-out';\r\n//                 observerAnimacion.unobserve(entry.target);\r\n//             }\r\n//         });\r\n//     }, { \r\n//         threshold: 0.1,\r\n//         rootMargin: '0px 0px -50px 0px'\r\n//     });\r\n    \r\n//     elementosAnimados.forEach(elemento => {\r\n//         elemento.style.opacity = '0';\r\n//         elemento.style.transform = 'translateY(30px)';\r\n//         observerAnimacion.observe(elemento);\r\n//     });\r\n\r\n//     // ==================\r\n//     // 4. VIDEO OVERLAY INTERACTION\r\n//     // ==================\r\n    \r\n//     const overlayVideo = document.querySelector('.overlay-imagen');\r\n//     const iconoPlay = document.querySelector('.icono-play');\r\n    \r\n//     if (overlayVideo && iconoPlay) {\r\n//         overlayVideo.addEventListener('click', function() {\r\n//             // Aquí puedes agregar la lógica para abrir un modal con video\r\n//             console.log('Reproducir video de la empresa');\r\n            \r\n//             // Ejemplo de animación del icono\r\n//             iconoPlay.style.transform = 'scale(1.2)';\r\n//             setTimeout(() => {\r\n//                 iconoPlay.style.transform = 'scale(1)';\r\n//             }, 200);\r\n            \r\n//             // Placeholder para integración con modal o lightbox\r\n//             alert('Video de presentación de Bombas Ayala\\n(Integrar con tu reproductor preferido)');\r\n//         });\r\n//     }\r\n\r\n//     // ==================\r\n//     // 5. ESTADÍSTICAS DINÁMICAS\r\n//     // ==================\r\n    \r\n//     const estadisticas = {\r\n//         experiencia: 25,\r\n//         clientes: 5000,\r\n//         servicios: 15000,\r\n//         atencion: 24\r\n//     };\r\n    \r\n//     // Función para actualizar estadísticas (útil para datos dinámicos)\r\n//     const actualizarEstadisticas = (nuevasEstadisticas) => {\r\n//         Object.keys(nuevasEstadisticas).forEach(key => {\r\n//             const elemento = document.querySelector(`[data-numero=\"${estadisticas[key]}\"]`);\r\n//             if (elemento) {\r\n//                 elemento.setAttribute('data-numero', nuevasEstadisticas[key]);\r\n//                 estadisticas[key] = nuevasEstadisticas[key];\r\n//             }\r\n//         });\r\n//     };\r\n\r\n//     // ==================\r\n//     // 6. SMOOTH SCROLL PARA ENLACES INTERNOS\r\n//     // ==================\r\n    \r\n//     const enlacesInternos = document.querySelectorAll('a[href^=\"#\"]');\r\n    \r\n//     enlacesInternos.forEach(enlace => {\r\n//         enlace.addEventListener('click', function(e) {\r\n//             e.preventDefault();\r\n//             const targetId = this.getAttribute('href');\r\n//             const targetElement = document.querySelector(targetId);\r\n            \r\n//             if (targetElement) {\r\n//                 targetElement.scrollIntoView({\r\n//                     behavior: 'smooth',\r\n//                     block: 'start'\r\n//                 });\r\n//             }\r\n//         });\r\n//     });\r\n\r\n//     // ==================\r\n//     // 7. LAZY LOADING PARA IMÁGENES\r\n//     // ==================\r\n    \r\n//     const imagenes = document.querySelectorAll('img[data-src]');\r\n    \r\n//     const observerImagenes = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 const img = entry.target;\r\n//                 img.src = img.getAttribute('data-src');\r\n//                 img.removeAttribute('data-src');\r\n//                 observerImagenes.unobserve(img);\r\n//             }\r\n//         });\r\n//     });\r\n    \r\n//     imagenes.forEach(img => {\r\n//         observerImagenes.observe(img);\r\n//     });\r\n\r\n//     // ==================\r\n//     // 8. BOTONES CTA CON TRACKING\r\n//     // ==================\r\n    \r\n//     const botonesCTA = document.querySelectorAll('.boton-cta');\r\n    \r\n//     botonesCTA.forEach(boton => {\r\n//         boton.addEventListener('click', function() {\r\n//             const accion = this.textContent.trim();\r\n//             const tipo = this.classList.contains('primario') ? 'primario' : 'secundario';\r\n            \r\n//             // Analytics tracking (opcional)\r\n//             if (typeof gtag !== 'undefined') {\r\n//                 gtag('event', 'cta_click', {\r\n//                     'event_category': 'nosotros',\r\n//                     'event_label': accion,\r\n//                     'value': tipo\r\n//                 });\r\n//             }\r\n            \r\n//             console.log(`CTA clicked: ${accion} (${tipo})`);\r\n//         });\r\n//     });\r\n\r\n//     // ==================\r\n//     // 9. DATOS INFORMATIVOS DE LIMA (4 ZONAS)\r\n//     // ==================\r\n    \r\n//     const datosLima = {\r\n//         totalDistritos: Object.values(zonas).reduce((total, zona) => total + zona.distritos.length, 0),\r\n//         poblacionAproximada: '10.5 millones',\r\n//         areaCobertura: '100%',\r\n//         tiempoRespuestaPromedio: '20 minutos',\r\n//         zonasCobertura: 4\r\n//     };\r\n    \r\n//     // Mostrar información adicional si es necesario\r\n//     const mostrarInfoLima = () => {\r\n//         console.log('Cobertura Bombas Ayala:', datosLima);\r\n//     };\r\n\r\n//     // ==================\r\n//     // 10. INICIALIZACIÓN Y MENSAJE DE BIENVENIDA\r\n//     // ==================\r\n    \r\n//     // Mostrar información inicial en la lista de distritos\r\n//     const listaDistritos = document.querySelector('.lista-distritos');\r\n//     if (listaDistritos && listaDistritos.innerHTML.trim() === '') {\r\n//         listaDistritos.innerHTML = `\r\n//             <div class=\"zona-titulo\" style=\"color: var(--azul-corporativo); font-weight: 700;\">\r\n//                 <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                     <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n//                     <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n//                 </svg>\r\n//                 Cobertura en Lima Metropolitana (4 Zonas)\r\n//             </div>\r\n//             <div class=\"distritos-grid\">\r\n//                 <div class=\"distrito-item\" style=\"color: var(--gris-medio);\">\r\n//                     <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                         <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n//                         <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"/>\r\n//                         <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"/>\r\n//                     </svg>\r\n//                     Pasa el cursor sobre una zona para ver los distritos\r\n//                 </div>\r\n//                 <div class=\"distrito-item\" style=\"color: var(--azul-corporativo);\">\r\n//                     <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                         <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n//                         <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n//                     </svg>\r\n//                     ${datosLima.totalDistritos} distritos en 4 zonas\r\n//                 </div>\r\n//                 <div class=\"distrito-item\" style=\"color: var(--verde-esmeralda);\">\r\n//                     <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n//                         <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n//                         <polyline points=\"12,6 12,12 16,14\"/>\r\n//                     </svg>\r\n//                     Tiempo respuesta: ${datosLima.tiempoRespuestaPromedio}\r\n//                 </div>\r\n//             </div>\r\n//         `;\r\n//     }\r\n    \r\n//     // Prevenir flicker y mostrar contenido\r\n//     document.body.style.opacity = '1';\r\n    \r\n//     // Log de inicialización (desarrollo)\r\n//     console.log('🚰 Bombas Ayala - Página Nosotros iniciada');\r\n//     console.log('📍 Zonas cubiertas: Norte, Sur, Este, Oeste (4 zonas)');\r\n//     console.log('📍 Distritos cubiertos:', datosLima.totalDistritos);\r\n//     console.log('⏱️ Scripts cargados correctamente');\r\n\r\n//     // ==================\r\n//     // 11. FUNCIONES PÚBLICAS (OPCIONAL)\r\n//     // ==================\r\n    \r\n//     // Exponer funciones útiles al scope global si es necesario\r\n//     window.BombasAyala = {\r\n//         mostrarDistritos,\r\n//         actualizarEstadisticas,\r\n//         datosLima,\r\n//         zonas\r\n//     };\r\n    \r\n// });\r\n\r\n/**\r\n * ========================================\r\n * NOSOTROS.JS - BOMBAS AYALA\r\n * Página nosotros con mapa Lima y estadísticas\r\n * ========================================\r\n */\r\n\r\nclass NosotrosController {\r\n    constructor() {\r\n        // Elementos principales\r\n        this.contadores = document.querySelectorAll('.numero-estadistica');\r\n        this.overlayVideo = document.querySelector('.overlay-imagen');\r\n        this.iconoPlay = document.querySelector('.icono-play');\r\n        this.listaDistritos = document.querySelector('.lista-distritos');\r\n        \r\n        // Datos de Lima Metropolitana (4 zonas)\r\n        this.zonas = {\r\n            norte: {\r\n                distritos: [\r\n                    'Ancón', 'Carabayllo', 'Comas', 'Independencia', \r\n                    'Los Olivos', 'Puente Piedra', 'San Martín de Porres', 'Santa Rosa'\r\n                ],\r\n                color: 'var(--cian-principal)',\r\n                descripcion: 'Lima Norte - 8 distritos'\r\n            },\r\n            sur: {\r\n                distritos: [\r\n                    'Chorrillos', 'Lurín', 'Pachacámac', 'Pucusana', \r\n                    'San Juan de Miraflores', 'Villa El Salvador', 'Villa María del Triunfo'\r\n                ],\r\n                color: 'var(--verde-esmeralda)',\r\n                descripcion: 'Lima Sur - 7 distritos'\r\n            },\r\n            este: {\r\n                distritos: [\r\n                    'Ate', 'Chaclacayo', 'Cieneguilla', 'El Agustino', \r\n                    'La Molina', 'Lurigancho-Chosica', 'San Juan de Lurigancho', 'Santa Anita'\r\n                ],\r\n                color: 'var(--naranja-tecnico)',\r\n                descripcion: 'Lima Este - 8 distritos'\r\n            },\r\n            oeste: {\r\n                distritos: [\r\n                    'Barranco', 'Breña', 'Callao', 'Jesús María', 'La Victoria', \r\n                    'Lima Cercado', 'Lince', 'Magdalena del Mar', 'Miraflores', \r\n                    'Pueblo Libre', 'Rímac', 'San Borja', 'San Isidro', 'San Luis', \r\n                    'San Miguel', 'Santiago de Surco', 'Surquillo'\r\n                ],\r\n                color: 'var(--azul-claro)',\r\n                descripcion: 'Lima Oeste - 17 distritos'\r\n            }\r\n        };\r\n\r\n        // Estadísticas de la empresa\r\n        this.estadisticas = {\r\n            experiencia: 25,\r\n            clientes: 5000,\r\n            servicios: 15000,\r\n            atencion: 24\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initContadoresAnimados();\r\n        this.initMapaInteractivo();\r\n        this.initVideoOverlay();\r\n        this.initAnimaciones();\r\n        this.initInformacionInicial();\r\n        this.initBotonesCTA();\r\n        \r\n        console.log('✅ Nosotros Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    initContadoresAnimados() {\r\n        if (this.contadores.length === 0) return;\r\n\r\n        const observerContadores = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const elemento = entry.target;\r\n                    const objetivo = parseInt(elemento.getAttribute('data-numero'));\r\n                    \r\n                    if (objetivo) {\r\n                        BombasAyalaUtils.animateCounter(elemento, 0, objetivo, 2000);\r\n                        observerContadores.unobserve(elemento);\r\n                        \r\n                        console.log(`📊 Contador animado: ${objetivo}`);\r\n                    }\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n\r\n        this.contadores.forEach(contador => {\r\n            observerContadores.observe(contador);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // MAPA INTERACTIVO DE LIMA (4 ZONAS)\r\n    // ==================\r\n    initMapaInteractivo() {\r\n        const zonasElementos = document.querySelectorAll('.zona-norte, .zona-sur, .zona-este, .zona-oeste');\r\n        \r\n        if (zonasElementos.length === 0) return;\r\n\r\n        zonasElementos.forEach(zona => {\r\n            zona.addEventListener('mouseenter', () => {\r\n                const tipoZona = this.getTipoZona(zona);\r\n                this.mostrarDistritos(tipoZona);\r\n            });\r\n            \r\n            // Efectos hover\r\n            zona.addEventListener('mouseover', () => {\r\n                zona.style.transform = 'scale(1.05)';\r\n                zona.style.zIndex = '10';\r\n                zona.style.transition = 'all 0.3s ease';\r\n            });\r\n            \r\n            zona.addEventListener('mouseout', () => {\r\n                zona.style.transform = 'scale(1)';\r\n                zona.style.zIndex = '1';\r\n            });\r\n\r\n            // Click para más información\r\n            zona.addEventListener('click', () => {\r\n                const tipoZona = this.getTipoZona(zona);\r\n                this.mostrarInformacionZona(tipoZona);\r\n            });\r\n        });\r\n    }\r\n\r\n    getTipoZona(elemento) {\r\n        if (elemento.classList.contains('zona-norte')) return 'norte';\r\n        if (elemento.classList.contains('zona-sur')) return 'sur';\r\n        if (elemento.classList.contains('zona-este')) return 'este';\r\n        return 'oeste';\r\n    }\r\n\r\n    mostrarDistritos(tipoZona) {\r\n        if (!this.listaDistritos) return;\r\n\r\n        const zona = this.zonas[tipoZona];\r\n        if (!zona) return;\r\n\r\n        this.listaDistritos.innerHTML = `\r\n            <div class=\"zona-titulo\" style=\"color: ${zona.color}; font-weight: 700;\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                    <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                </svg>\r\n                ${zona.descripcion}\r\n            </div>\r\n            <div class=\"distritos-grid\">\r\n                ${zona.distritos.map(distrito => `\r\n                    <div class=\"distrito-item\" style=\"color: ${zona.color}; font-weight: 600;\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                            <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                            <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                        </svg>\r\n                        ${distrito}\r\n                    </div>\r\n                `).join('')}\r\n            </div>\r\n        `;\r\n\r\n        // Animar entrada de distritos\r\n        const items = this.listaDistritos.querySelectorAll('.distrito-item');\r\n        items.forEach((item, index) => {\r\n            item.style.opacity = '0';\r\n            item.style.transform = 'translateX(-20px)';\r\n            \r\n            setTimeout(() => {\r\n                item.style.transition = 'all 0.3s ease';\r\n                item.style.opacity = '1';\r\n                item.style.transform = 'translateX(0)';\r\n            }, index * 50);\r\n        });\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('mapa_hover', 'nosotros', tipoZona);\r\n    }\r\n\r\n    mostrarInformacionZona(tipoZona) {\r\n        const zona = this.zonas[tipoZona];\r\n        if (!zona) return;\r\n\r\n        const mensaje = `📍 **${zona.descripcion}**\\n\\n` +\r\n                       `🏘️ **Distritos atendidos:** ${zona.distritos.length}\\n\\n` +\r\n                       `📋 **Lista completa:**\\n${zona.distritos.join(', ')}\\n\\n` +\r\n                       `💧 **Servicios disponibles:**\\n` +\r\n                       `• Instalación de bombas\\n` +\r\n                       `• Mantenimiento preventivo\\n` +\r\n                       `• Reparaciones de emergencia\\n` +\r\n                       `• Asesoría técnica\\n\\n` +\r\n                       `📞 **¿Necesitas servicio en esta zona?**`;\r\n\r\n        BombasAyalaUtils.openWhatsApp(mensaje);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('zona_click', 'nosotros', tipoZona);\r\n    }\r\n\r\n    // ==================\r\n    // VIDEO OVERLAY\r\n    // ==================\r\n    initVideoOverlay() {\r\n        if (!this.overlayVideo || !this.iconoPlay) return;\r\n\r\n        this.overlayVideo.addEventListener('click', () => {\r\n            // Efecto en el icono\r\n            this.iconoPlay.style.transform = 'scale(1.2)';\r\n            setTimeout(() => {\r\n                this.iconoPlay.style.transform = 'scale(1)';\r\n            }, 200);\r\n\r\n            // Aquí puedes integrar con tu reproductor de video preferido\r\n            this.mostrarModalVideo();\r\n\r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('video_play', 'nosotros', 'video_empresarial');\r\n        });\r\n    }\r\n\r\n    mostrarModalVideo() {\r\n        // Placeholder para modal de video\r\n        const modal = document.createElement('div');\r\n        modal.style.cssText = `\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100vw;\r\n            height: 100vh;\r\n            background: rgba(0,0,0,0.9);\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            z-index: 9999;\r\n        `;\r\n\r\n        modal.innerHTML = `\r\n            <div style=\"text-align: center; color: white; max-width: 500px; padding: 20px;\">\r\n                <h3>🎥 Video de Presentación</h3>\r\n                <p>Aquí se mostraría el video institucional de Bombas Ayala</p>\r\n                <br>\r\n                <button onclick=\"this.closest('div').parentNode.remove()\" \r\n                        style=\"background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;\">\r\n                    Cerrar\r\n                </button>\r\n            </div>\r\n        `;\r\n\r\n        document.body.appendChild(modal);\r\n\r\n        // Cerrar con click fuera del contenido\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) {\r\n                document.body.removeChild(modal);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES SCROLL\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar elementos principales\r\n        BombasAyalaUtils.animateOnScroll('.estadistica-item, .mision-section, .vision-section, .valor-item');\r\n\r\n        // Observador específico para elementos de nosotros\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                    entry.target.style.transition = 'all 0.6s ease-out';\r\n                    observer.unobserve(entry.target);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Configurar elementos para animación\r\n        const elementosAnimados = document.querySelectorAll('.estadistica-item, .mision-section, .vision-section, .valor-item');\r\n        \r\n        elementosAnimados.forEach(elemento => {\r\n            elemento.style.opacity = '0';\r\n            elemento.style.transform = 'translateY(30px)';\r\n            observer.observe(elemento);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // INFORMACIÓN INICIAL\r\n    // ==================\r\n    initInformacionInicial() {\r\n        if (!this.listaDistritos || this.listaDistritos.innerHTML.trim() !== '') return;\r\n\r\n        const datosLima = this.getDatosLima();\r\n\r\n        this.listaDistritos.innerHTML = `\r\n            <div class=\"zona-titulo\" style=\"color: var(--azul-corporativo); font-weight: 700;\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                    <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                </svg>\r\n                Cobertura en Lima Metropolitana (4 Zonas)\r\n            </div>\r\n            <div class=\"distritos-grid\">\r\n                <div class=\"distrito-item\" style=\"color: var(--gris-medio);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                        <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"/>\r\n                        <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"/>\r\n                    </svg>\r\n                    Pasa el cursor sobre una zona para ver los distritos\r\n                </div>\r\n                <div class=\"distrito-item\" style=\"color: var(--azul-corporativo);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                        <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                    </svg>\r\n                    ${datosLima.totalDistritos} distritos en 4 zonas\r\n                </div>\r\n                <div class=\"distrito-item\" style=\"color: var(--verde-esmeralda);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                        <polyline points=\"12,6 12,12 16,14\"/>\r\n                    </svg>\r\n                    Tiempo respuesta: ${datosLima.tiempoRespuestaPromedio}\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES CTA\r\n    // ==================\r\n    initBotonesCTA() {\r\n        const botonesCTA = document.querySelectorAll('.boton-cta');\r\n        \r\n        botonesCTA.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const accion = boton.textContent.trim();\r\n                const tipo = boton.classList.contains('primario') ? 'primario' : 'secundario';\r\n                \r\n                // Tracking específico\r\n                BombasAyalaUtils.trackEvent('cta_click', 'nosotros', accion, tipo);\r\n                \r\n                console.log(`🎯 CTA clicked: ${accion} (${tipo})`);\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // FUNCIONES DE UTILIDAD\r\n    // ==================\r\n    getDatosLima() {\r\n        const totalDistritos = Object.values(this.zonas).reduce((total, zona) => {\r\n            return total + zona.distritos.length;\r\n        }, 0);\r\n\r\n        return {\r\n            totalDistritos,\r\n            poblacionAproximada: '10.5 millones',\r\n            areaCobertura: '100%',\r\n            tiempoRespuestaPromedio: '20 minutos',\r\n            zonasCobertura: 4\r\n        };\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    mostrarZona(tipoZona) {\r\n        this.mostrarDistritos(tipoZona);\r\n    }\r\n\r\n    actualizarEstadisticas(nuevasEstadisticas) {\r\n        Object.keys(nuevasEstadisticas).forEach(key => {\r\n            if (this.estadisticas[key] !== undefined) {\r\n                this.estadisticas[key] = nuevasEstadisticas[key];\r\n                \r\n                // Actualizar el elemento en el DOM si existe\r\n                const elemento = document.querySelector(`[data-numero=\"${this.estadisticas[key]}\"]`);\r\n                if (elemento) {\r\n                    elemento.setAttribute('data-numero', nuevasEstadisticas[key]);\r\n                }\r\n            }\r\n        });\r\n        \r\n        console.log('📊 Estadísticas actualizadas:', nuevasEstadisticas);\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            ...this.estadisticas,\r\n            datosLima: this.getDatosLima(),\r\n            zonas: Object.keys(this.zonas)\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction mostrarDistritos(tipoZona) {\r\n    if (window.nosotrosController) {\r\n        window.nosotrosController.mostrarZona(tipoZona);\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initNosotros() {\r\n    // Solo inicializar en página de nosotros\r\n    if (document.querySelector('.numero-estadistica, .zona-norte, .mision-section')) {\r\n        window.nosotrosController = new NosotrosController();\r\n        \r\n        // API global\r\n        window.Nosotros = {\r\n            mostrarZona: (zona) => window.nosotrosController?.mostrarZona(zona),\r\n            actualizarStats: (stats) => window.nosotrosController?.actualizarEstadisticas(stats),\r\n            getStats: () => window.nosotrosController?.getStats()\r\n        };\r\n\r\n        // Mantener compatibilidad con función legacy\r\n        window.BombasAyala = {\r\n            mostrarDistritos: mostrarDistritos,\r\n            actualizarEstadisticas: (stats) => window.nosotrosController?.actualizarEstadisticas(stats),\r\n            datosLima: window.nosotrosController?.getDatosLima(),\r\n            zonas: window.nosotrosController?.zonas\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initNosotros();\r\n    \r\n    // Prevenir flicker y mostrar contenido\r\n    document.body.style.opacity = '1';\r\n    \r\n    console.log('🚰 Bombas Ayala - Página Nosotros iniciada');\r\n    console.log('📍 Zonas cubiertas: Norte, Sur, Este, Oeste (4 zonas)');\r\n    console.log('⏱️ Scripts cargados correctamente');\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = NosotrosController;\r\n}","// // ========== FUNCIONALIDADES PRINCIPALES ==========\r\n\r\n// // 1. SISTEMA DE FILTROS DE PRODUCTOS\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const filtros = document.querySelectorAll('.filtro-btn');\r\n//     const productos = document.querySelectorAll('.producto-card');\r\n    \r\n//     filtros.forEach(filtro => {\r\n//         filtro.addEventListener('click', function() {\r\n//             // Cambiar filtro activo\r\n//             filtros.forEach(f => f.classList.remove('activo'));\r\n//             this.classList.add('activo');\r\n            \r\n//             const categoria = this.dataset.filtro;\r\n            \r\n//             // Filtrar productos con animación\r\n//             productos.forEach(producto => {\r\n//                 if (categoria === 'todos' || producto.dataset.categoria === categoria) {\r\n//                     producto.style.display = 'block';\r\n//                     producto.style.animation = 'fadeInUp 0.5s ease';\r\n//                 } else {\r\n//                     producto.style.display = 'none';\r\n//                 }\r\n//             });\r\n//         });\r\n//     });\r\n// });\r\n\r\n// // 2. SISTEMA DE COTIZACIÓN VÍA WHATSAPP\r\n// function inicializarCotizaciones() {\r\n//     const botonesCotizar = document.querySelectorAll('.boton-cotizar, .boton-producto-cotizar');\r\n    \r\n//     botonesCotizar.forEach(boton => {\r\n//         boton.addEventListener('click', function() {\r\n//             const producto = this.dataset.producto;\r\n//             const specs = this.dataset.especificaciones;\r\n//             const whatsapp = this.dataset.whatsapp;\r\n            \r\n//             const mensaje = `Hola! Me interesa el producto: ${producto}%0A%0AEspecificaciones: ${specs}%0A%0A¿Podrían enviarme una cotización?`;\r\n//             const urlWhatsapp = `https://wa.me/${whatsapp}?text=${mensaje}`;\r\n            \r\n//             window.open(urlWhatsapp, '_blank');\r\n//         });\r\n//     });\r\n// }\r\n\r\n// // 3. BOTÓN \"VER MÁS PRODUCTOS\" \r\n// document.getElementById('btnVerMasProductos')?.addEventListener('click', function() {\r\n//     // Mostrar productos ocultos\r\n//     const productosOcultos = document.querySelectorAll('.producto-card[style*=\"display: none\"], .producto-card.oculto');\r\n    \r\n//     this.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Cargando...';\r\n    \r\n//     setTimeout(() => {\r\n//         // Mostrar siguiente lote (ej: 4 más)\r\n//         for(let i = 0; i < Math.min(4, productosOcultos.length); i++) {\r\n//             productosOcultos[i].style.display = 'block';\r\n//             productosOcultos[i].classList.remove('oculto');\r\n//             productosOcultos[i].style.animation = 'fadeInUp 0.5s ease';\r\n//         }\r\n        \r\n//         // Si no quedan más productos, ocultar botón\r\n//         const restantes = document.querySelectorAll('.producto-card[style*=\"display: none\"], .producto-card.oculto');\r\n//         if(restantes.length === 0) {\r\n//             this.style.display = 'none';\r\n//         } else {\r\n//             this.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Productos';\r\n//         }\r\n//     }, 1000);\r\n// });\r\n\r\n// // 4. ANIMACIONES AL HACER SCROLL\r\n// function animarElementos() {\r\n//     const observer = new IntersectionObserver((entries) => {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 entry.target.style.animation = 'fadeInUp 0.6s ease forwards';\r\n//             }\r\n//         });\r\n//     });\r\n\r\n//     document.querySelectorAll('.producto-card, .producto-destacado').forEach(el => {\r\n//         observer.observe(el);\r\n//     });\r\n// }\r\n\r\n// // 5. EFECTOS HOVER MEJORADOS\r\n// function efectosHover() {\r\n//     document.querySelectorAll('.producto-card, .producto-destacado').forEach(card => {\r\n//         card.addEventListener('mouseenter', function() {\r\n//             this.style.transform = 'translateY(-10px) scale(1.02)';\r\n//         });\r\n        \r\n//         card.addEventListener('mouseleave', function() {\r\n//             this.style.transform = 'translateY(0) scale(1)';\r\n//         });\r\n//     });\r\n// }\r\n\r\n// // INICIALIZAR TODO\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     inicializarCotizaciones();\r\n//     animarElementos();\r\n//     efectosHover();\r\n    \r\n//     console.log('✅ Sistema de productos inicializado');\r\n// });\r\n\r\n\r\n\r\n/**\r\n * ========================================\r\n * PRODUCTOS.JS - BOMBAS AYALA\r\n * Página de productos con filtros y cotizaciones\r\n * ========================================\r\n */\r\n\r\nclass ProductosController {\r\n    constructor() {\r\n        this.filtros = document.querySelectorAll('.filtro-btn');\r\n        this.productos = document.querySelectorAll('.producto-card');\r\n        this.btnVerMas = document.getElementById('btnVerMasProductos');\r\n        \r\n        // Estado\r\n        this.filtroActual = 'todos';\r\n        this.mostrandoTodos = false;\r\n        this.productosPorPagina = 4;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (this.productos.length === 0) {\r\n            console.warn('Productos: No se encontraron productos');\r\n            return;\r\n        }\r\n\r\n        this.setupFilters();\r\n        this.setupVerMasButton();\r\n        this.setupAnimations();\r\n        this.setupHoverEffects();\r\n        this.setupCotizaciones();\r\n        \r\n        console.log('✅ Productos Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA DE FILTROS\r\n    // ==================\r\n    setupFilters() {\r\n        if (this.filtros.length === 0) return;\r\n\r\n        this.filtros.forEach(filtro => {\r\n            filtro.addEventListener('click', () => {\r\n                this.cambiarFiltro(filtro);\r\n            });\r\n        });\r\n\r\n        // Mostrar estado inicial\r\n        this.actualizarBotonVerMas();\r\n    }\r\n\r\n    cambiarFiltro(filtroClickeado) {\r\n        // Actualizar filtro activo\r\n        this.filtros.forEach(f => f.classList.remove('activo'));\r\n        filtroClickeado.classList.add('activo');\r\n        \r\n        const categoria = filtroClickeado.dataset.filtro;\r\n        this.filtroActual = categoria;\r\n        \r\n        // Resetear estado de \"Ver más\"\r\n        this.mostrandoTodos = false;\r\n        \r\n        // Aplicar filtro\r\n        this.aplicarFiltro(categoria);\r\n        \r\n        // Actualizar botón \"Ver más\"\r\n        this.actualizarBotonVerMas();\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('filter_change', 'productos', categoria);\r\n        \r\n        console.log(`🔍 Filtro aplicado: ${categoria}`);\r\n    }\r\n\r\n    aplicarFiltro(categoria) {\r\n        this.productos.forEach(producto => {\r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = categoria === 'todos' || categoriaProducto === categoria;\r\n            const esOculto = producto.classList.contains('producto-oculto');\r\n            \r\n            if (esVisible) {\r\n                // Mostrar si debe ser visible y no está marcado como oculto para \"Ver más\"\r\n                if (!esOculto || this.mostrandoTodos) {\r\n                    this.mostrarProducto(producto);\r\n                } else {\r\n                    this.ocultarProducto(producto);\r\n                }\r\n            } else {\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n    }\r\n\r\n    mostrarProducto(producto) {\r\n        producto.style.display = 'block';\r\n        producto.style.animation = 'fadeInUp 0.5s ease forwards';\r\n    }\r\n\r\n    ocultarProducto(producto) {\r\n        producto.style.display = 'none';\r\n    }\r\n\r\n    // ==================\r\n    // BOTÓN \"VER MÁS\"\r\n    // ==================\r\n    setupVerMasButton() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        this.btnVerMas.addEventListener('click', () => {\r\n            this.toggleVerMas();\r\n        });\r\n    }\r\n\r\n    toggleVerMas() {\r\n        if (!this.mostrandoTodos) {\r\n            this.mostrarMasProductos();\r\n        } else {\r\n            this.mostrarMenosProductos();\r\n        }\r\n    }\r\n\r\n    mostrarMasProductos() {\r\n        this.btnVerMas.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Cargando...';\r\n        \r\n        setTimeout(() => {\r\n            const productosOcultos = this.getProductosOcultos();\r\n            const productosAMostrar = productosOcultos.slice(0, this.productosPorPagina);\r\n            \r\n            productosAMostrar.forEach(producto => {\r\n                this.mostrarProducto(producto);\r\n                producto.classList.remove('producto-oculto');\r\n            });\r\n            \r\n            this.mostrandoTodos = productosOcultos.length <= this.productosPorPagina;\r\n            this.actualizarBotonVerMas();\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('ver_mas_click', 'productos', 'mostrar_mas');\r\n            \r\n        }, 1000);\r\n    }\r\n\r\n    mostrarMenosProductos() {\r\n        // Volver a ocultar productos extras\r\n        this.productos.forEach(producto => {\r\n            if (producto.classList.contains('producto-inicial')) {\r\n                // Mantener productos iniciales\r\n                return;\r\n            }\r\n            \r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProducto === this.filtroActual;\r\n            \r\n            if (esVisible) {\r\n                producto.classList.add('producto-oculto');\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n        \r\n        this.mostrandoTodos = false;\r\n        this.actualizarBotonVerMas();\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('ver_mas_click', 'productos', 'mostrar_menos');\r\n    }\r\n\r\n    getProductosOcultos() {\r\n        return Array.from(this.productos).filter(producto => {\r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProducto === this.filtroActual;\r\n            const esOculto = producto.classList.contains('producto-oculto');\r\n            \r\n            return esVisible && esOculto;\r\n        });\r\n    }\r\n\r\n    actualizarBotonVerMas() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        const productosOcultos = this.getProductosOcultos();\r\n        \r\n        if (productosOcultos.length > 0 && !this.mostrandoTodos) {\r\n            this.btnVerMas.style.display = 'inline-block';\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Productos';\r\n        } else if (this.mostrandoTodos) {\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n            this.btnVerMas.style.display = 'inline-block';\r\n        } else {\r\n            this.btnVerMas.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    setupAnimations() {\r\n        // Animar productos al aparecer en viewport\r\n        BombasAyalaUtils.animateOnScroll('.producto-card, .producto-destacado');\r\n        \r\n        // Observador específico para productos\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.animation = 'fadeInUp 0.6s ease forwards';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.productos.forEach(producto => observer.observe(producto));\r\n    }\r\n\r\n    // ==================\r\n    // EFECTOS HOVER\r\n    // ==================\r\n    setupHoverEffects() {\r\n        this.productos.forEach(card => {\r\n            card.addEventListener('mouseenter', () => {\r\n                card.style.transform = 'translateY(-10px) scale(1.02)';\r\n            });\r\n            \r\n            card.addEventListener('mouseleave', () => {\r\n                card.style.transform = 'translateY(0) scale(1)';\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // COTIZACIONES\r\n    // ==================\r\n    setupCotizaciones() {\r\n        const botonesCotizar = document.querySelectorAll('.boton-cotizar, .boton-producto-cotizar');\r\n        \r\n        botonesCotizar.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const producto = boton.dataset.producto || 'Producto no especificado';\r\n                const specs = boton.dataset.especificaciones || '';\r\n                \r\n                const datos = {\r\n                    producto: producto,\r\n                    descripcion: specs\r\n                };\r\n                \r\n                const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('cotizacion_producto', 'productos', producto);\r\n                \r\n                console.log('💬 Cotización solicitada:', datos);\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    filtrarPor(categoria) {\r\n        const filtro = document.querySelector(`[data-filtro=\"${categoria}\"]`);\r\n        if (filtro) {\r\n            this.cambiarFiltro(filtro);\r\n        }\r\n    }\r\n\r\n    buscarProducto(termino) {\r\n        termino = termino.toLowerCase();\r\n        \r\n        this.productos.forEach(producto => {\r\n            const titulo = producto.querySelector('.producto-titulo')?.textContent.toLowerCase() || '';\r\n            const descripcion = producto.querySelector('.producto-descripcion')?.textContent.toLowerCase() || '';\r\n            \r\n            const coincide = titulo.includes(termino) || descripcion.includes(termino);\r\n            \r\n            if (coincide) {\r\n                this.mostrarProducto(producto);\r\n            } else {\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('producto_search', 'productos', termino);\r\n    }\r\n\r\n    resetearFiltros() {\r\n        this.filtrarPor('todos');\r\n        this.mostrandoTodos = false;\r\n        this.actualizarBotonVerMas();\r\n    }\r\n\r\n    getStats() {\r\n        const totalProductos = this.productos.length;\r\n        const productosVisibles = Array.from(this.productos).filter(p => p.style.display !== 'none').length;\r\n        const productosOcultos = this.getProductosOcultos().length;\r\n        \r\n        return {\r\n            total: totalProductos,\r\n            visibles: productosVisibles,\r\n            ocultos: productosOcultos,\r\n            filtroActual: this.filtroActual,\r\n            mostrandoTodos: this.mostrandoTodos\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction animarElementos() {\r\n    console.log('🔄 animarElementos legacy llamada');\r\n}\r\n\r\nfunction efectosHover() {\r\n    console.log('🔄 efectosHover legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initProductos() {\r\n    // Solo inicializar en página de productos\r\n    if (document.querySelector('.producto-card, .productos-grid')) {\r\n        window.productosController = new ProductosController();\r\n        \r\n        // API global\r\n        window.Productos = {\r\n            filtrar: (categoria) => window.productosController?.filtrarPor(categoria),\r\n            buscar: (termino) => window.productosController?.buscarProducto(termino),\r\n            resetear: () => window.productosController?.resetearFiltros(),\r\n            stats: () => window.productosController?.getStats()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initProductos();\r\n    \r\n    // Llamar funciones legacy para compatibilidad\r\n    animarElementos();\r\n    efectosHover();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ProductosController;\r\n}","// // ===============================\r\n// // FORMULARIO DE COTIZACIÓN\r\n// // ===============================\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const formulario = document.getElementById('formularioCotizacion');\r\n    \r\n//     if (formulario) {\r\n//         formulario.addEventListener('submit', function(e) {\r\n//             e.preventDefault();\r\n            \r\n//             // Obtener datos del formulario\r\n//             const formData = new FormData(formulario);\r\n//             const datos = {\r\n//                 nombre: formData.get('nombre'),\r\n//                 telefono: formData.get('telefono'),\r\n//                 email: formData.get('email'),\r\n//                 servicio: formData.get('servicio'),\r\n//                 descripcion: formData.get('descripcion')\r\n//             };\r\n            \r\n//             // Validar campos requeridos\r\n//             if (!datos.nombre || !datos.telefono || !datos.servicio) {\r\n//                 alert('Por favor, completa todos los campos obligatorios.');\r\n//                 return;\r\n//             }\r\n            \r\n//             // Construir mensaje para WhatsApp\r\n//             let mensaje = `🔧 *SOLICITUD DE COTIZACIÓN*\\n\\n`;\r\n//             mensaje += `👤 *Cliente:* ${datos.nombre}\\n`;\r\n//             mensaje += `📞 *Teléfono:* ${datos.telefono}\\n`;\r\n//             if (datos.email) {\r\n//                 mensaje += `📧 *Email:* ${datos.email}\\n`;\r\n//             }\r\n//             mensaje += `🛠️ *Servicio:* ${datos.servicio}\\n`;\r\n//             if (datos.descripcion) {\r\n//                 mensaje += `📝 *Descripción:* ${datos.descripcion}\\n`;\r\n//             }\r\n//             mensaje += `\\n¡Espero su cotización!`;\r\n            \r\n//             // Codificar mensaje para URL\r\n//             const mensajeCodificado = encodeURIComponent(mensaje);\r\n            \r\n//             // Redirigir a WhatsApp\r\n//             const urlWhatsApp = `https://wa.me/51997984102?text=${mensajeCodificado}`;\r\n//             window.open(urlWhatsApp, '_blank');\r\n            \r\n//             // Opcional: Redirigir a contactos.html después de un momento\r\n//             setTimeout(() => {\r\n//                 window.location.href = 'contactos.html';\r\n//             }, 2000);\r\n            \r\n//             // Mostrar mensaje de confirmación\r\n//             alert('¡Gracias! Te estamos redirigiendo a WhatsApp para enviarnos tu solicitud.');\r\n            \r\n//             // Limpiar formulario\r\n//             formulario.reset();\r\n//         });\r\n//     }\r\n// });\r\n\r\n// // ===============================\r\n// // ANIMACIONES DE SCROLL\r\n// // ===============================\r\n\r\n// // Intersection Observer para animaciones\r\n// const observerOptions = {\r\n//     threshold: 0.1,\r\n//     rootMargin: '0px 0px -50px 0px'\r\n// };\r\n\r\n// const observer = new IntersectionObserver(function(entries) {\r\n//     entries.forEach(entry => {\r\n//         if (entry.isIntersecting) {\r\n//             entry.target.style.opacity = '1';\r\n//             entry.target.style.transform = 'translateY(0)';\r\n//         }\r\n//     });\r\n// }, observerOptions);\r\n\r\n// // Aplicar animaciones a las tarjetas de servicios\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const cards = document.querySelectorAll('.servicio-card, .testimonio-card');\r\n    \r\n//     cards.forEach(card => {\r\n//         card.style.opacity = '0';\r\n//         card.style.transform = 'translateY(30px)';\r\n//         card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n//         observer.observe(card);\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // CONTADOR ANIMADO PARA ESTADÍSTICAS\r\n// // ===============================\r\n\r\n// function animateCounter(element, start, end, duration) {\r\n//     let startTime = null;\r\n    \r\n//     function animation(currentTime) {\r\n//         if (startTime === null) startTime = currentTime;\r\n//         const timeElapsed = currentTime - startTime;\r\n//         const progress = Math.min(timeElapsed / duration, 1);\r\n        \r\n//         const value = Math.floor(progress * (end - start) + start);\r\n//         element.textContent = end.toString().includes('%') ? value + '%' : \r\n//                                 end.toString().includes('+') ? value + '+' : \r\n//                                 end.toString().includes('/') ? '24/7' : value;\r\n        \r\n//         if (progress < 1) {\r\n//             requestAnimationFrame(animation);\r\n//         }\r\n//     }\r\n    \r\n//     requestAnimationFrame(animation);\r\n// }\r\n\r\n// // Observar estadísticas del hero\r\n// const statsObserver = new IntersectionObserver(function(entries) {\r\n//     entries.forEach(entry => {\r\n//         if (entry.isIntersecting) {\r\n//             const numero = entry.target.querySelector('.stat-numero');\r\n//             const texto = numero.textContent;\r\n            \r\n//             if (texto.includes('5000+')) {\r\n//                 animateCounter(numero, 0, 5000, 2000);\r\n//             } else if (texto.includes('98%')) {\r\n//                 animateCounter(numero, 0, 98, 2000);\r\n//             } else if (texto.includes('24/7')) {\r\n//                 numero.textContent = '24/7';\r\n//             }\r\n            \r\n//             statsObserver.unobserve(entry.target);\r\n//         }\r\n//     });\r\n// }, { threshold: 0.5 });\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const statItems = document.querySelectorAll('.stat-item');\r\n//     statItems.forEach(item => {\r\n//         statsObserver.observe(item);\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // SMOOTH SCROLL PARA ENLACES INTERNOS\r\n// // ===============================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const enlaces = document.querySelectorAll('a[href^=\"#\"]');\r\n    \r\n//     enlaces.forEach(enlace => {\r\n//         enlace.addEventListener('click', function(e) {\r\n//             e.preventDefault();\r\n            \r\n//             const targetId = this.getAttribute('href');\r\n//             const targetElement = document.querySelector(targetId);\r\n            \r\n//             if (targetElement) {\r\n//                 targetElement.scrollIntoView({\r\n//                     behavior: 'smooth',\r\n//                     block: 'start'\r\n//                 });\r\n//             }\r\n//         });\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // TRACKING DE EVENTOS PARA ANALÍTICAS\r\n// // ===============================\r\n\r\n// function trackEvent(action, category, label) {\r\n//     // Aquí puedes integrar con Google Analytics u otra herramienta\r\n//     console.log(`Evento: ${action}, Categoría: ${category}, Etiqueta: ${label}`);\r\n// }\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     // Tracking de clics en botones de cotización\r\n//     const botonesCotizar = document.querySelectorAll('.boton-cotizar');\r\n//     botonesCotizar.forEach(boton => {\r\n//         boton.addEventListener('click', function() {\r\n//             const servicio = this.closest('.servicio-card').querySelector('.servicio-titulo').textContent;\r\n//             trackEvent('Click', 'Cotización', servicio);\r\n//         });\r\n//     });\r\n\r\n//     // Tracking de clics en botones de emergencia\r\n//     const botonesEmergencia = document.querySelectorAll('.boton-emergencia');\r\n//     botonesEmergencia.forEach(boton => {\r\n//         boton.addEventListener('click', function() {\r\n//             const tipo = this.classList.contains('whatsapp') ? 'WhatsApp' : 'Llamada';\r\n//             trackEvent('Click', 'Emergencia', tipo);\r\n//         });\r\n//     });\r\n\r\n//     // Tracking de clics en elementos flotantes\r\n//     const flotantes = document.querySelectorAll('.flotante');\r\n//     flotantes.forEach(flotante => {\r\n//         flotante.addEventListener('click', function() {\r\n//             const tipo = this.classList.contains('whatsapp') ? 'WhatsApp' : \r\n//                         this.classList.contains('llamada') ? 'Llamada' : 'Instagram';\r\n//             trackEvent('Click', 'Flotante', tipo);\r\n//         });\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // LAZY LOADING PARA IMÁGENES\r\n// // ===============================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const imagenes = document.querySelectorAll('img[data-src]');\r\n    \r\n//     const imageObserver = new IntersectionObserver(function(entries) {\r\n//         entries.forEach(entry => {\r\n//             if (entry.isIntersecting) {\r\n//                 const img = entry.target;\r\n//                 img.src = img.dataset.src;\r\n//                 img.classList.remove('lazy');\r\n//                 imageObserver.unobserve(img);\r\n//             }\r\n//         });\r\n//     });\r\n\r\n//     imagenes.forEach(img => {\r\n//         imageObserver.observe(img);\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // VALIDACIÓN EN TIEMPO REAL DEL FORMULARIO\r\n// // ===============================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const inputs = document.querySelectorAll('#formularioCotizacion input, #formularioCotizacion select');\r\n    \r\n//     inputs.forEach(input => {\r\n//         input.addEventListener('blur', function() {\r\n//             validateField(this);\r\n//         });\r\n        \r\n//         input.addEventListener('input', function() {\r\n//             if (this.classList.contains('error')) {\r\n//                 validateField(this);\r\n//             }\r\n//         });\r\n//     });\r\n// });\r\n\r\n// function validateField(field) {\r\n//     const value = field.value.trim();\r\n//     const isRequired = field.hasAttribute('required');\r\n    \r\n//     // Remover clases de error previas\r\n//     field.classList.remove('error');\r\n//     const errorMsg = field.parentNode.querySelector('.error-message');\r\n//     if (errorMsg) {\r\n//         errorMsg.remove();\r\n//     }\r\n    \r\n//     // Validar campo requerido\r\n//     if (isRequired && !value) {\r\n//         showFieldError(field, 'Este campo es obligatorio');\r\n//         return false;\r\n//     }\r\n    \r\n//     // Validar email\r\n//     if (field.type === 'email' && value) {\r\n//         const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n//         if (!emailRegex.test(value)) {\r\n//             showFieldError(field, 'Ingresa un email válido');\r\n//             return false;\r\n//         }\r\n//     }\r\n    \r\n//     // Validar teléfono\r\n//     if (field.type === 'tel' && value) {\r\n//         const phoneRegex = /^[0-9]{9,}$/;\r\n//         if (!phoneRegex.test(value.replace(/\\s+/g, ''))) {\r\n//             showFieldError(field, 'Ingresa un teléfono válido (mínimo 9 dígitos)');\r\n//             return false;\r\n//         }\r\n//     }\r\n    \r\n//     return true;\r\n// }\r\n\r\n// function showFieldError(field, message) {\r\n//     field.classList.add('error');\r\n    \r\n//     const errorDiv = document.createElement('div');\r\n//     errorDiv.className = 'error-message';\r\n//     errorDiv.textContent = message;\r\n//     errorDiv.style.color = '#E74C3C';\r\n//     errorDiv.style.fontSize = '0.85rem';\r\n//     errorDiv.style.marginTop = '0.25rem';\r\n    \r\n//     field.parentNode.appendChild(errorDiv);\r\n// }\r\n\r\n// // ===============================\r\n// // MEJORAS DE ACCESIBILIDAD\r\n// // ===============================\r\n\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     // Agregar atributos de accesibilidad\r\n//     const botones = document.querySelectorAll('button, .boton-cotizar, .boton-emergencia, .flotante');\r\n    \r\n//     botones.forEach(boton => {\r\n//         if (!boton.getAttribute('aria-label') && !boton.textContent.trim()) {\r\n//             const icono = boton.querySelector('i');\r\n//             if (icono) {\r\n//                 const clases = icono.className;\r\n//                 if (clases.includes('whatsapp')) {\r\n//                     boton.setAttribute('aria-label', 'Contactar por WhatsApp');\r\n//                 } else if (clases.includes('phone')) {\r\n//                     boton.setAttribute('aria-label', 'Llamar por teléfono');\r\n//                 } else if (clases.includes('instagram')) {\r\n//                     boton.setAttribute('aria-label', 'Seguir en Instagram');\r\n//                 }\r\n//             }\r\n//         }\r\n//     });\r\n// });\r\n\r\n// // ===============================\r\n// // DETECCIÓN DE DISPOSITIVO MÓVIL\r\n// // ===============================\r\n\r\n// function isMobile() {\r\n//     return window.innerWidth <= 768;\r\n// }\r\n\r\n// function adjustForMobile() {\r\n//     if (isMobile()) {\r\n//         // Ajustes específicos para móvil\r\n//         const flotantes = document.querySelector('.flotantes');\r\n//         if (flotantes) {\r\n//             flotantes.style.position = 'fixed';\r\n//             flotantes.style.bottom = '20px';\r\n//             flotantes.style.right = '20px';\r\n//             flotantes.style.top = 'auto';\r\n//             flotantes.style.transform = 'none';\r\n//             flotantes.style.flexDirection = 'row';\r\n//             flotantes.style.gap = '10px';\r\n//         }\r\n//     }\r\n// }\r\n\r\n// document.addEventListener('DOMContentLoaded', adjustForMobile);\r\n// window.addEventListener('resize', adjustForMobile);\r\n\r\n\r\n/**\r\n * ========================================\r\n * SERVICIOS.JS - BOMBAS AYALA\r\n * Página de servicios con cotizaciones y formularios\r\n * ========================================\r\n */\r\n\r\nclass ServiciosController {\r\n    constructor() {\r\n        this.formularioCotizacion = document.getElementById('formularioCotizacion');\r\n        this.servicioCards = document.querySelectorAll('.servicio-card');\r\n        this.testimonioCards = document.querySelectorAll('.testimonio-card');\r\n        this.statsItems = document.querySelectorAll('.stat-item');\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFormularioCotizacion();\r\n        this.initAnimaciones();\r\n        this.initContadores();\r\n        this.initBotonesCotizar();\r\n        this.initBotonesEmergencia();\r\n        this.initAccesibilidad();\r\n        \r\n        console.log('✅ Servicios Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE COTIZACIÓN\r\n    // ==================\r\n    initFormularioCotizacion() {\r\n        if (!this.formularioCotizacion) return;\r\n\r\n        // Validación en tiempo real\r\n        const inputs = this.formularioCotizacion.querySelectorAll('input, select, textarea');\r\n        \r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioCotizacion.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarCotizacion();\r\n        });\r\n    }\r\n\r\n    enviarCotizacion() {\r\n        // Validar formulario\r\n        if (!BombasAyalaUtils.validateForm(this.formularioCotizacion)) {\r\n            BombasAyalaUtils.showToast('Por favor, corrige los errores en el formulario.', 'error');\r\n            \r\n            // Scroll al primer error\r\n            const primerError = this.formularioCotizacion.querySelector('.error');\r\n            if (primerError) {\r\n                primerError.focus();\r\n                primerError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Obtener datos del formulario\r\n        const formData = new FormData(this.formularioCotizacion);\r\n        const datos = {\r\n            nombre: formData.get('nombre'),\r\n            telefono: formData.get('telefono'),\r\n            email: formData.get('email'),\r\n            servicio: formData.get('servicio'),\r\n            descripcion: formData.get('descripcion')\r\n        };\r\n\r\n        // Validar campos requeridos\r\n        if (!datos.nombre || !datos.telefono || !datos.servicio) {\r\n            BombasAyalaUtils.showToast('Por favor, completa todos los campos obligatorios.', 'error');\r\n            return;\r\n        }\r\n\r\n        // Mostrar estado de carga\r\n        const botonSubmit = this.formularioCotizacion.querySelector('.boton-enviar, button[type=\"submit\"]');\r\n        const textoOriginal = botonSubmit ? botonSubmit.innerHTML : '';\r\n        \r\n        if (botonSubmit) {\r\n            botonSubmit.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ENVIANDO...';\r\n            botonSubmit.disabled = true;\r\n        }\r\n\r\n        // Crear mensaje para WhatsApp\r\n        const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n        \r\n        setTimeout(() => {\r\n            // Abrir WhatsApp\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            BombasAyalaUtils.showToast('¡Cotización enviada! Te hemos redirigido a WhatsApp.', 'success');\r\n            \r\n            // Limpiar formulario\r\n            this.formularioCotizacion.reset();\r\n            const inputs = this.formularioCotizacion.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            if (botonSubmit) {\r\n                botonSubmit.innerHTML = textoOriginal;\r\n                botonSubmit.disabled = false;\r\n            }\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('cotizacion_enviada', 'servicios', datos.servicio);\r\n            \r\n            console.log('📧 Cotización enviada:', datos);\r\n            \r\n        }, 1500);\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar cards de servicios y testimonios\r\n        BombasAyalaUtils.animateOnScroll('.servicio-card, .testimonio-card');\r\n        \r\n        // Configurar transiciones iniciales para cards\r\n        this.servicioCards.forEach(card => {\r\n            card.style.opacity = '0';\r\n            card.style.transform = 'translateY(30px)';\r\n            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n        });\r\n\r\n        this.testimonioCards.forEach(card => {\r\n            card.style.opacity = '0';\r\n            card.style.transform = 'translateY(30px)';\r\n            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n        });\r\n        \r\n        // Observador para animaciones personalizadas\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                }\r\n            });\r\n        });\r\n\r\n        // Observar elementos\r\n        [...this.servicioCards, ...this.testimonioCards].forEach(el => {\r\n            observer.observe(el);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    initContadores() {\r\n        if (this.statsItems.length === 0) return;\r\n\r\n        const statsObserver = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const numero = entry.target.querySelector('.stat-numero');\r\n                    if (!numero) return;\r\n                    \r\n                    const texto = numero.textContent;\r\n                    \r\n                    if (texto.includes('5000+')) {\r\n                        BombasAyalaUtils.animateCounter(numero, 0, 5000, 2000);\r\n                    } else if (texto.includes('98%')) {\r\n                        BombasAyalaUtils.animateCounter(numero, 0, 98, 2000);\r\n                    } else if (texto.includes('24/7')) {\r\n                        numero.textContent = '24/7';\r\n                    } else {\r\n                        // Extraer número si existe\r\n                        const match = texto.match(/(\\d+)/);\r\n                        if (match) {\r\n                            const targetNumber = parseInt(match[1]);\r\n                            BombasAyalaUtils.animateCounter(numero, 0, targetNumber, 2000);\r\n                        }\r\n                    }\r\n                    \r\n                    statsObserver.unobserve(entry.target);\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n\r\n        this.statsItems.forEach(item => {\r\n            statsObserver.observe(item);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES DE COTIZACIÓN\r\n    // ==================\r\n    initBotonesCotizar() {\r\n        const botonesCotizar = document.querySelectorAll('.boton-cotizar');\r\n        \r\n        botonesCotizar.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const servicio = this.getServicioFromButton(boton);\r\n                \r\n                // Scroll al formulario\r\n                if (this.formularioCotizacion) {\r\n                    // Pre-seleccionar servicio si existe el campo\r\n                    const selectServicio = this.formularioCotizacion.querySelector('select[name=\"servicio\"]');\r\n                    if (selectServicio && servicio) {\r\n                        selectServicio.value = servicio;\r\n                    }\r\n                    \r\n                    // Scroll suave al formulario\r\n                    this.formularioCotizacion.scrollIntoView({\r\n                        behavior: 'smooth',\r\n                        block: 'start'\r\n                    });\r\n                    \r\n                    // Focus en el primer campo\r\n                    setTimeout(() => {\r\n                        const primerInput = this.formularioCotizacion.querySelector('input');\r\n                        if (primerInput) primerInput.focus();\r\n                    }, 800);\r\n                }\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('boton_cotizar_click', 'servicios', servicio);\r\n                \r\n                console.log('💼 Botón cotizar clickeado:', servicio);\r\n            });\r\n        });\r\n    }\r\n\r\n    getServicioFromButton(boton) {\r\n        // Intentar obtener el servicio desde varios lugares\r\n        const servicioCard = boton.closest('.servicio-card');\r\n        \r\n        if (servicioCard) {\r\n            const titulo = servicioCard.querySelector('.servicio-titulo, h3, h4');\r\n            if (titulo) return titulo.textContent.trim();\r\n        }\r\n        \r\n        // Fallback: usar data attribute\r\n        return boton.dataset.servicio || 'Servicio no especificado';\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES DE EMERGENCIA\r\n    // ==================\r\n    initBotonesEmergencia() {\r\n        const botonesEmergencia = document.querySelectorAll('.boton-emergencia');\r\n        \r\n        botonesEmergencia.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const tipo = this.getTipoEmergencia(boton);\r\n                \r\n                if (tipo === 'whatsapp') {\r\n                    const mensaje = '🚨 *EMERGENCIA - SERVICIO URGENTE* 🚨\\n\\n' +\r\n                                  'Necesito asistencia técnica urgente con bombas de agua.\\n\\n' +\r\n                                  '⏰ Es una emergencia\\n' +\r\n                                  '📞 Por favor contactarme lo antes posible\\n\\n' +\r\n                                  '¡Gracias!';\r\n                    \r\n                    BombasAyalaUtils.openWhatsApp(mensaje);\r\n                } else if (tipo === 'llamada') {\r\n                    window.location.href = 'tel:+51997984102';\r\n                }\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('emergencia_click', 'servicios', tipo);\r\n                \r\n                console.log('🚨 Emergencia clickeada:', tipo);\r\n            });\r\n        });\r\n    }\r\n\r\n    getTipoEmergencia(boton) {\r\n        if (boton.classList.contains('whatsapp') || boton.querySelector('.fa-whatsapp')) {\r\n            return 'whatsapp';\r\n        } else if (boton.classList.contains('llamada') || boton.querySelector('.fa-phone')) {\r\n            return 'llamada';\r\n        }\r\n        return 'unknown';\r\n    }\r\n\r\n    // ==================\r\n    // MEJORAS DE ACCESIBILIDAD\r\n    // ==================\r\n    initAccesibilidad() {\r\n        // Mejorar accesibilidad de botones sin texto\r\n        const botones = document.querySelectorAll('button, .boton-cotizar, .boton-emergencia');\r\n        \r\n        botones.forEach(boton => {\r\n            if (!boton.getAttribute('aria-label') && !boton.textContent.trim()) {\r\n                const icono = boton.querySelector('i');\r\n                if (icono) {\r\n                    const clases = icono.className;\r\n                    \r\n                    if (clases.includes('whatsapp')) {\r\n                        boton.setAttribute('aria-label', 'Contactar por WhatsApp');\r\n                    } else if (clases.includes('phone')) {\r\n                        boton.setAttribute('aria-label', 'Llamar por teléfono');\r\n                    } else if (clases.includes('quote') || clases.includes('cotizar')) {\r\n                        boton.setAttribute('aria-label', 'Solicitar cotización');\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Mejorar contraste de foco\r\n        const elementos = document.querySelectorAll('input, select, textarea, button');\r\n        elementos.forEach(el => {\r\n            el.addEventListener('focus', () => {\r\n                el.style.outline = '2px solid #007bff';\r\n                el.style.outlineOffset = '2px';\r\n            });\r\n            \r\n            el.addEventListener('blur', () => {\r\n                el.style.outline = '';\r\n                el.style.outlineOffset = '';\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    scrollToForm() {\r\n        if (this.formularioCotizacion) {\r\n            this.formularioCotizacion.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n            });\r\n        }\r\n    }\r\n\r\n    preseleccionarServicio(servicio) {\r\n        if (this.formularioCotizacion) {\r\n            const selectServicio = this.formularioCotizacion.querySelector('select[name=\"servicio\"]');\r\n            if (selectServicio) {\r\n                selectServicio.value = servicio;\r\n                selectServicio.dispatchEvent(new Event('change'));\r\n            }\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            servicios: this.servicioCards.length,\r\n            testimonios: this.testimonioCards.length,\r\n            hasFormulario: !!this.formularioCotizacion\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction trackEvent(action, category, label) {\r\n    BombasAyalaUtils.trackEvent(action, category, label);\r\n}\r\n\r\nfunction validateField(field) {\r\n    return BombasAyalaUtils.validateField(field);\r\n}\r\n\r\nfunction showFieldError(field, message) {\r\n    BombasAyalaUtils.showFieldError(field, message);\r\n}\r\n\r\nfunction animateCounter(element, start, end, duration) {\r\n    BombasAyalaUtils.animateCounter(element, start, end, duration);\r\n}\r\n\r\nfunction isMobile() {\r\n    return BombasAyalaUtils.isMobile();\r\n}\r\n\r\nfunction adjustForMobile() {\r\n    console.log('🔄 adjustForMobile legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initServicios() {\r\n    window.serviciosController = new ServiciosController();\r\n    \r\n    // API global\r\n    window.Servicios = {\r\n        scrollToForm: () => window.serviciosController?.scrollToForm(),\r\n        preseleccionar: (servicio) => window.serviciosController?.preseleccionarServicio(servicio),\r\n        stats: () => window.serviciosController?.getStats()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initServicios();\r\n    \r\n    // Mantener compatibilidad con funciones legacy\r\n    adjustForMobile();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ServiciosController;\r\n}","//   // Preguntas Frecuentes - Acordeón\r\n// document.addEventListener('DOMContentLoaded', function() {\r\n//     const faqItems = document.querySelectorAll('.faq-item');\r\n    \r\n//     faqItems.forEach(item => {\r\n//         const pregunta = item.querySelector('.faq-pregunta');\r\n//         const respuesta = item.querySelector('.faq-respuesta');\r\n//         const icono = item.querySelector('.faq-pregunta i');\r\n        \r\n//         // Ocultar todas las respuestas al inicio\r\n//         respuesta.style.display = 'none';\r\n        \r\n//         pregunta.addEventListener('click', function() {\r\n//             const isActive = item.classList.contains('active');\r\n            \r\n//             // Cerrar todos los elementos FAQ\r\n//             faqItems.forEach(otherItem => {\r\n//                 otherItem.classList.remove('active');\r\n//                 otherItem.querySelector('.faq-respuesta').style.display = 'none';\r\n//                 otherItem.querySelector('.faq-pregunta i').style.transform = 'rotate(0deg)';\r\n//             });\r\n            \r\n//             // Si no estaba activo, abrirlo\r\n//             if (!isActive) {\r\n//                 item.classList.add('active');\r\n//                 respuesta.style.display = 'block';\r\n//                 icono.style.transform = 'rotate(180deg)';\r\n//             }\r\n//         });\r\n//     });\r\n// });  \r\n\r\n\r\n/**\r\n * ========================================\r\n * SOPORTE.JS - BOMBAS AYALA\r\n * Sistema de soporte, FAQ y ayuda\r\n * ========================================\r\n */\r\n\r\nclass SoporteController {\r\n    constructor() {\r\n        this.faqItems = document.querySelectorAll('.faq-item');\r\n        this.buscadorFAQ = document.getElementById('buscadorFAQ');\r\n        this.formularioSoporte = document.getElementById('formularioSoporte');\r\n        this.chatButton = document.querySelector('.chat-soporte-btn');\r\n        \r\n        // Estado\r\n        this.faqsOriginales = [];\r\n        this.faqActivo = null;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFAQ();\r\n        this.initBuscador();\r\n        this.initFormularioSoporte();\r\n        this.initChatSoporte();\r\n        this.initAnimaciones();\r\n        this.guardarFAQsOriginales();\r\n        \r\n        console.log('✅ Soporte Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA FAQ (ACORDEÓN)\r\n    // ==================\r\n    initFAQ() {\r\n        if (this.faqItems.length === 0) return;\r\n\r\n        this.faqItems.forEach(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta');\r\n            const respuesta = item.querySelector('.faq-respuesta');\r\n            const icono = item.querySelector('.faq-pregunta i, .faq-icono');\r\n            \r\n            if (!pregunta || !respuesta) return;\r\n\r\n            // Ocultar todas las respuestas al inicio\r\n            respuesta.style.display = 'none';\r\n            \r\n            // Click en pregunta\r\n            pregunta.addEventListener('click', () => {\r\n                this.toggleFAQ(item, respuesta, icono);\r\n            });\r\n\r\n            // Mejorar accesibilidad\r\n            pregunta.setAttribute('role', 'button');\r\n            pregunta.setAttribute('aria-expanded', 'false');\r\n            pregunta.setAttribute('tabindex', '0');\r\n            \r\n            // Soporte para teclado\r\n            pregunta.addEventListener('keydown', (e) => {\r\n                if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    this.toggleFAQ(item, respuesta, icono);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    toggleFAQ(item, respuesta, icono) {\r\n        const isActive = item.classList.contains('active');\r\n        \r\n        // Cerrar todos los FAQs\r\n        this.cerrarTodosFAQs();\r\n        \r\n        // Si no estaba activo, abrirlo\r\n        if (!isActive) {\r\n            this.abrirFAQ(item, respuesta, icono);\r\n        }\r\n    }\r\n\r\n    abrirFAQ(item, respuesta, icono) {\r\n        item.classList.add('active');\r\n        respuesta.style.display = 'block';\r\n        \r\n        // Animar altura\r\n        respuesta.style.maxHeight = '0';\r\n        respuesta.style.opacity = '0';\r\n        respuesta.style.transition = 'all 0.3s ease';\r\n        \r\n        setTimeout(() => {\r\n            respuesta.style.maxHeight = respuesta.scrollHeight + 'px';\r\n            respuesta.style.opacity = '1';\r\n        }, 10);\r\n        \r\n        // Rotar icono\r\n        if (icono) {\r\n            icono.style.transform = 'rotate(180deg)';\r\n        }\r\n        \r\n        // Actualizar accesibilidad\r\n        const pregunta = item.querySelector('.faq-pregunta');\r\n        if (pregunta) {\r\n            pregunta.setAttribute('aria-expanded', 'true');\r\n        }\r\n        \r\n        this.faqActivo = item;\r\n        \r\n        // Tracking\r\n        const textoPregunta = pregunta?.textContent.trim() || 'FAQ sin título';\r\n        BombasAyalaUtils.trackEvent('faq_open', 'soporte', textoPregunta);\r\n        \r\n        console.log('❓ FAQ abierto:', textoPregunta);\r\n    }\r\n\r\n    cerrarTodosFAQs() {\r\n        this.faqItems.forEach(otherItem => {\r\n            const otherRespuesta = otherItem.querySelector('.faq-respuesta');\r\n            const otherIcono = otherItem.querySelector('.faq-pregunta i, .faq-icono');\r\n            const otherPregunta = otherItem.querySelector('.faq-pregunta');\r\n            \r\n            otherItem.classList.remove('active');\r\n            \r\n            if (otherRespuesta) {\r\n                otherRespuesta.style.maxHeight = '0';\r\n                otherRespuesta.style.opacity = '0';\r\n                \r\n                setTimeout(() => {\r\n                    otherRespuesta.style.display = 'none';\r\n                }, 300);\r\n            }\r\n            \r\n            if (otherIcono) {\r\n                otherIcono.style.transform = 'rotate(0deg)';\r\n            }\r\n            \r\n            if (otherPregunta) {\r\n                otherPregunta.setAttribute('aria-expanded', 'false');\r\n            }\r\n        });\r\n        \r\n        this.faqActivo = null;\r\n    }\r\n\r\n    // ==================\r\n    // BUSCADOR FAQ\r\n    // ==================\r\n    initBuscador() {\r\n        if (!this.buscadorFAQ) return;\r\n\r\n        this.buscadorFAQ.addEventListener('input', BombasAyalaUtils.debounce((e) => {\r\n            this.filtrarFAQs(e.target.value);\r\n        }, 300));\r\n\r\n        // Limpiar búsqueda al hacer clic en X\r\n        const clearBtn = document.querySelector('.clear-search');\r\n        if (clearBtn) {\r\n            clearBtn.addEventListener('click', () => {\r\n                this.buscadorFAQ.value = '';\r\n                this.filtrarFAQs('');\r\n            });\r\n        }\r\n    }\r\n\r\n    filtrarFAQs(termino) {\r\n        const terminoLower = termino.toLowerCase().trim();\r\n        \r\n        if (terminoLower === '') {\r\n            // Mostrar todos los FAQs\r\n            this.faqItems.forEach(item => {\r\n                item.style.display = 'block';\r\n                item.style.opacity = '1';\r\n            });\r\n            return;\r\n        }\r\n\r\n        let resultadosEncontrados = 0;\r\n\r\n        this.faqItems.forEach(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta')?.textContent.toLowerCase() || '';\r\n            const respuesta = item.querySelector('.faq-respuesta')?.textContent.toLowerCase() || '';\r\n            \r\n            const coincide = pregunta.includes(terminoLower) || respuesta.includes(terminoLower);\r\n            \r\n            if (coincide) {\r\n                item.style.display = 'block';\r\n                item.style.opacity = '1';\r\n                resultadosEncontrados++;\r\n            } else {\r\n                item.style.display = 'none';\r\n                item.style.opacity = '0';\r\n            }\r\n        });\r\n\r\n        // Mostrar mensaje si no hay resultados\r\n        this.mostrarResultadosBusqueda(resultadosEncontrados, termino);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('faq_search', 'soporte', termino, resultadosEncontrados);\r\n        \r\n        console.log(`🔍 Búsqueda FAQ: \"${termino}\" - ${resultadosEncontrados} resultados`);\r\n    }\r\n\r\n    mostrarResultadosBusqueda(cantidad, termino) {\r\n        // Remover mensaje anterior\r\n        const mensajeAnterior = document.querySelector('.mensaje-busqueda-faq');\r\n        if (mensajeAnterior) {\r\n            mensajeAnterior.remove();\r\n        }\r\n\r\n        // Si no hay resultados, mostrar mensaje\r\n        if (cantidad === 0 && termino.trim() !== '') {\r\n            const mensaje = document.createElement('div');\r\n            mensaje.className = 'mensaje-busqueda-faq';\r\n            mensaje.innerHTML = `\r\n                <div style=\"text-align: center; padding: 20px; color: #666;\">\r\n                    <i class=\"fas fa-search\" style=\"font-size: 2rem; margin-bottom: 10px; opacity: 0.5;\"></i>\r\n                    <p>No se encontraron preguntas que coincidan con \"<strong>${termino}</strong>\"</p>\r\n                    <p style=\"font-size: 0.9rem;\">Intenta con otros términos o <a href=\"#contacto\" style=\"color: #007bff;\">contáctanos directamente</a></p>\r\n                </div>\r\n            `;\r\n            \r\n            // Insertar después del buscador\r\n            const contenedorFAQ = this.buscadorFAQ.closest('.faq-container') || this.buscadorFAQ.parentNode;\r\n            contenedorFAQ.appendChild(mensaje);\r\n        }\r\n    }\r\n\r\n    guardarFAQsOriginales() {\r\n        this.faqsOriginales = Array.from(this.faqItems).map(item => ({\r\n            pregunta: item.querySelector('.faq-pregunta')?.textContent.trim(),\r\n            respuesta: item.querySelector('.faq-respuesta')?.textContent.trim(),\r\n            elemento: item\r\n        }));\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE SOPORTE\r\n    // ==================\r\n    initFormularioSoporte() {\r\n        if (!this.formularioSoporte) return;\r\n\r\n        // Validación en tiempo real\r\n        const inputs = this.formularioSoporte.querySelectorAll('input, select, textarea');\r\n        \r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioSoporte.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarSolicitudSoporte();\r\n        });\r\n    }\r\n\r\n    enviarSolicitudSoporte() {\r\n        // Validar formulario\r\n        if (!BombasAyalaUtils.validateForm(this.formularioSoporte)) {\r\n            BombasAyalaUtils.showToast('Por favor, corrige los errores en el formulario.', 'error');\r\n            return;\r\n        }\r\n\r\n        // Obtener datos\r\n        const formData = new FormData(this.formularioSoporte);\r\n        const datos = {\r\n            nombre: formData.get('nombre'),\r\n            email: formData.get('email'),\r\n            telefono: formData.get('telefono'),\r\n            tipo: formData.get('tipo') || 'consulta',\r\n            mensaje: formData.get('mensaje'),\r\n            prioridad: formData.get('prioridad') || 'normal'\r\n        };\r\n\r\n        // Mostrar estado de carga\r\n        const botonSubmit = this.formularioSoporte.querySelector('button[type=\"submit\"]');\r\n        const textoOriginal = botonSubmit?.innerHTML || '';\r\n        \r\n        if (botonSubmit) {\r\n            botonSubmit.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Enviando...';\r\n            botonSubmit.disabled = true;\r\n        }\r\n\r\n        // Crear mensaje para WhatsApp\r\n        const mensaje = this.crearMensajeSoporte(datos);\r\n\r\n        setTimeout(() => {\r\n            // Abrir WhatsApp\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            BombasAyalaUtils.showToast('¡Solicitud enviada! Te contactaremos pronto.', 'success');\r\n            \r\n            // Limpiar formulario\r\n            this.formularioSoporte.reset();\r\n            const inputs = this.formularioSoporte.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            if (botonSubmit) {\r\n                botonSubmit.innerHTML = textoOriginal;\r\n                botonSubmit.disabled = false;\r\n            }\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('soporte_enviado', 'soporte', datos.tipo);\r\n            \r\n        }, 1500);\r\n    }\r\n\r\n    crearMensajeSoporte(datos) {\r\n        const iconosPrioridad = {\r\n            baja: '🟢',\r\n            normal: '🟡',\r\n            alta: '🔴',\r\n            urgente: '🚨'\r\n        };\r\n\r\n        const iconosTipo = {\r\n            consulta: '❓',\r\n            tecnico: '🔧',\r\n            garantia: '🛡️',\r\n            emergencia: '🚨',\r\n            otro: '💬'\r\n        };\r\n\r\n        let mensaje = `${iconosTipo[datos.tipo] || '💬'} **SOLICITUD DE SOPORTE**\\n\\n`;\r\n        mensaje += `👤 **Cliente:** ${datos.nombre}\\n`;\r\n        mensaje += `📧 **Email:** ${datos.email}\\n`;\r\n        \r\n        if (datos.telefono) {\r\n            mensaje += `📞 **Teléfono:** ${datos.telefono}\\n`;\r\n        }\r\n        \r\n        mensaje += `📋 **Tipo:** ${datos.tipo.charAt(0).toUpperCase() + datos.tipo.slice(1)}\\n`;\r\n        mensaje += `${iconosPrioridad[datos.prioridad]} **Prioridad:** ${datos.prioridad.toUpperCase()}\\n\\n`;\r\n        mensaje += `💬 **Mensaje:**\\n${datos.mensaje}\\n\\n`;\r\n        mensaje += `⏰ **Fecha:** ${new Date().toLocaleString('es-PE')}\\n\\n`;\r\n        mensaje += `Por favor, responder lo antes posible. ¡Gracias!`;\r\n\r\n        return mensaje;\r\n    }\r\n\r\n    // ==================\r\n    // CHAT DE SOPORTE\r\n    // ==================\r\n    initChatSoporte() {\r\n        if (!this.chatButton) return;\r\n\r\n        this.chatButton.addEventListener('click', () => {\r\n            this.abrirChatSoporte();\r\n        });\r\n\r\n        // Auto-mostrar chat después de cierto tiempo\r\n        setTimeout(() => {\r\n            this.mostrarPrompChat();\r\n        }, 30000); // 30 segundos\r\n    }\r\n\r\n    abrirChatSoporte() {\r\n        const mensaje = `👋 ¡Hola! Necesito ayuda con:\\n\\n` +\r\n                       `(Selecciona una opción o escribe tu consulta)\\n\\n` +\r\n                       `🔧 Problema técnico\\n` +\r\n                       `📦 Información de productos\\n` +\r\n                       `💰 Cotización\\n` +\r\n                       `📞 Agendar visita técnica\\n` +\r\n                       `❓ Otra consulta`;\r\n\r\n        BombasAyalaUtils.openWhatsApp(mensaje);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('chat_soporte_click', 'soporte', 'whatsapp');\r\n    }\r\n\r\n    mostrarPrompChat() {\r\n        // Solo mostrar si no se ha interactuado mucho con la página\r\n        const interacciones = this.contarInteracciones();\r\n        \r\n        if (interacciones < 3) {\r\n            BombasAyalaUtils.showToast('¿Necesitas ayuda? Chatea con nosotros 💬', 'info', 5000);\r\n        }\r\n    }\r\n\r\n    contarInteracciones() {\r\n        // Contar clics, scrolls, etc. (implementación básica)\r\n        return parseInt(sessionStorage.getItem('bombas_interacciones') || '0');\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar FAQs al aparecer\r\n        BombasAyalaUtils.animateOnScroll('.faq-item');\r\n        \r\n        // Animación especial para el acordeón\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.faqItems.forEach((item, index) => {\r\n            item.style.opacity = '0';\r\n            item.style.transform = 'translateY(20px)';\r\n            item.style.transition = `opacity 0.4s ease ${index * 0.1}s, transform 0.4s ease ${index * 0.1}s`;\r\n            observer.observe(item);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    abrirFAQPorTexto(textoBusqueda) {\r\n        const faq = Array.from(this.faqItems).find(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta')?.textContent.toLowerCase();\r\n            return pregunta?.includes(textoBusqueda.toLowerCase());\r\n        });\r\n\r\n        if (faq) {\r\n            const respuesta = faq.querySelector('.faq-respuesta');\r\n            const icono = faq.querySelector('.faq-pregunta i, .faq-icono');\r\n            \r\n            this.cerrarTodosFAQs();\r\n            this.abrirFAQ(faq, respuesta, icono);\r\n            \r\n            // Scroll al FAQ\r\n            faq.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        }\r\n    }\r\n\r\n    buscarFAQ(termino) {\r\n        if (this.buscadorFAQ) {\r\n            this.buscadorFAQ.value = termino;\r\n            this.filtrarFAQs(termino);\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            totalFAQs: this.faqItems.length,\r\n            faqActivo: this.faqActivo ? this.faqActivo.querySelector('.faq-pregunta')?.textContent : null,\r\n            hasFormulario: !!this.formularioSoporte,\r\n            hasChat: !!this.chatButton\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initSoporte() {\r\n    window.soporteController = new SoporteController();\r\n    \r\n    // API global\r\n    window.Soporte = {\r\n        abrirFAQ: (texto) => window.soporteController?.abrirFAQPorTexto(texto),\r\n        buscar: (termino) => window.soporteController?.buscarFAQ(termino),\r\n        chat: () => window.soporteController?.abrirChatSoporte(),\r\n        stats: () => window.soporteController?.getStats()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initSoporte();\r\n    \r\n    // Incrementar contador de interacciones\r\n    let interacciones = parseInt(sessionStorage.getItem('bombas_interacciones') || '0');\r\n    sessionStorage.setItem('bombas_interacciones', (interacciones + 1).toString());\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = SoporteController;\r\n}","/**\r\n * ========================================\r\n * MAIN.JS - BOMBAS AYALA\r\n * Coordinador principal y punto de entrada\r\n * ========================================\r\n */\r\n\r\nclass BombasAyalaApp {\r\n    constructor() {\r\n        // Estado de la aplicación\r\n        this.isInitialized = false;\r\n        this.currentPage = this.detectCurrentPage();\r\n        this.controllers = {};\r\n        this.config = {\r\n            phone: '51997984102',\r\n            email: 'info@bombasayala.com',\r\n            address: 'Lima, Perú',\r\n            analytics: {\r\n                enabled: true,\r\n                trackingId: 'GA_MEASUREMENT_ID' // Reemplazar con tu ID real\r\n            }\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        console.log('🚀 Iniciando Bombas Ayala App...');\r\n        \r\n        // Verificar dependencias\r\n        if (!this.checkDependencies()) {\r\n            console.error('❌ Dependencias no encontradas');\r\n            return;\r\n        }\r\n\r\n        // Inicializar componentes globales\r\n        this.initGlobalComponents();\r\n        \r\n        // Inicializar componentes específicos de página\r\n        this.initPageSpecificComponents();\r\n        \r\n        // Configurar eventos globales\r\n        this.setupGlobalEvents();\r\n        \r\n        // Finalizar inicialización\r\n        this.finishInitialization();\r\n    }\r\n\r\n    // ==================\r\n    // VERIFICACIÓN DE DEPENDENCIAS\r\n    // ==================\r\n    checkDependencies() {\r\n        const required = ['BombasAyalaUtils'];\r\n        \r\n        for (const dep of required) {\r\n            if (typeof window[dep] === 'undefined') {\r\n                console.error(`❌ Dependencia requerida no encontrada: ${dep}`);\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        console.log('✅ Todas las dependencias están disponibles');\r\n        return true;\r\n    }\r\n\r\n    // ==================\r\n    // DETECCIÓN DE PÁGINA\r\n    // ==================\r\n    detectCurrentPage() {\r\n        const path = window.location.pathname.toLowerCase();\r\n        const body = document.body;\r\n        \r\n        // Detectar por pathname\r\n        if (path.includes('inicio') || path === '/' || path.includes('index')) {\r\n            return 'inicio';\r\n        } else if (path.includes('productos')) {\r\n            return 'productos';\r\n        } else if (path.includes('servicios')) {\r\n            return 'servicios';\r\n        } else if (path.includes('galeria') || path.includes('proyectos') || path.includes('fotos')) {\r\n            return 'galeria';\r\n        } else if (path.includes('nosotros') || path.includes('about')) {\r\n            return 'nosotros';\r\n        } else if (path.includes('contacto') || path.includes('contact')) {\r\n            return 'contacto';\r\n        } else if (path.includes('soporte') || path.includes('faq') || path.includes('ayuda')) {\r\n            return 'soporte';\r\n        }\r\n        \r\n        // Detectar por clases del body o elementos específicos\r\n        if (body.classList.contains('page-inicio') || document.querySelector('#heroBackground')) {\r\n            return 'inicio';\r\n        } else if (body.classList.contains('page-productos') || document.querySelector('.producto-card')) {\r\n            return 'productos';\r\n        } else if (body.classList.contains('page-servicios') || document.querySelector('.servicio-card')) {\r\n            return 'servicios';\r\n        } else if (body.classList.contains('page-galeria') || document.querySelector('.tarjeta-proyecto')) {\r\n            return 'galeria';\r\n        } else if (body.classList.contains('page-nosotros') || document.querySelector('.numero-estadistica')) {\r\n            return 'nosotros';\r\n        } else if (body.classList.contains('page-contacto') || document.querySelector('#formularioContacto')) {\r\n            return 'contacto';\r\n        } else if (body.classList.contains('page-soporte') || document.querySelector('.faq-item')) {\r\n            return 'soporte';\r\n        }\r\n        \r\n        // Página genérica si no se detecta ninguna específica\r\n        return 'general';\r\n    }\r\n\r\n    // ==================\r\n    // COMPONENTES GLOBALES\r\n    // ==================\r\n    initGlobalComponents() {\r\n        console.log('🔧 Inicializando componentes globales...');\r\n        \r\n        // Header (siempre presente)\r\n        if (typeof HeaderController !== 'undefined') {\r\n            try {\r\n                this.controllers.header = new HeaderController();\r\n                console.log('✅ Header inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Header:', e.message);\r\n            }\r\n        }\r\n        \r\n        // Flotantes (siempre presente)\r\n        if (typeof FlotantesController !== 'undefined') {\r\n            try {\r\n                this.controllers.flotantes = new FlotantesController();\r\n                console.log('✅ Flotantes inicializados');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Flotantes:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // COMPONENTES ESPECÍFICOS DE PÁGINA\r\n    // ==================\r\n    initPageSpecificComponents() {\r\n        console.log(`📄 Inicializando componentes para página: ${this.currentPage}`);\r\n        \r\n        switch (this.currentPage) {\r\n            case 'inicio':\r\n                this.initInicioComponents();\r\n                break;\r\n            case 'productos':\r\n                this.initProductosComponents();\r\n                break;\r\n            case 'servicios':\r\n                this.initServiciosComponents();\r\n                break;\r\n            case 'galeria':\r\n                this.initGaleriaComponents();\r\n                break;\r\n            case 'nosotros':\r\n                this.initNosotrosComponents();\r\n                break;\r\n            case 'contacto':\r\n                this.initContactoComponents();\r\n                break;\r\n            case 'soporte':\r\n                this.initSoporteComponents();\r\n                break;\r\n            default:\r\n                console.log('📄 Página genérica - solo componentes globales');\r\n        }\r\n    }\r\n\r\n    initInicioComponents() {\r\n        if (typeof InicioController !== 'undefined') {\r\n            try {\r\n                this.controllers.inicio = new InicioController();\r\n                console.log('✅ Inicio inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Inicio:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initProductosComponents() {\r\n        if (typeof ProductosController !== 'undefined') {\r\n            try {\r\n                this.controllers.productos = new ProductosController();\r\n                console.log('✅ Productos inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Productos:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initServiciosComponents() {\r\n        if (typeof ServiciosController !== 'undefined') {\r\n            try {\r\n                this.controllers.servicios = new ServiciosController();\r\n                console.log('✅ Servicios inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Servicios:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initGaleriaComponents() {\r\n        if (typeof GaleriaController !== 'undefined') {\r\n            try {\r\n                this.controllers.galeria = new GaleriaController();\r\n                console.log('✅ Galería inicializada');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Galería:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initNosotrosComponents() {\r\n        if (typeof NosotrosController !== 'undefined') {\r\n            try {\r\n                this.controllers.nosotros = new NosotrosController();\r\n                console.log('✅ Nosotros inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Nosotros:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initContactoComponents() {\r\n        if (typeof ContactoController !== 'undefined') {\r\n            try {\r\n                this.controllers.contacto = new ContactoController();\r\n                console.log('✅ Contacto inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Contacto:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initSoporteComponents() {\r\n        if (typeof SoporteController !== 'undefined') {\r\n            try {\r\n                this.controllers.soporte = new SoporteController();\r\n                console.log('✅ Soporte inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Soporte:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // EVENTOS GLOBALES\r\n    // ==================\r\n    setupGlobalEvents() {\r\n        // Manejo de errores globales\r\n        window.addEventListener('error', this.handleGlobalError.bind(this));\r\n        \r\n        // Manejo de promesas rechazadas\r\n        window.addEventListener('unhandledrejection', this.handleUnhandledRejection.bind(this));\r\n        \r\n        // Eventos de navegación\r\n        window.addEventListener('beforeunload', this.handleBeforeUnload.bind(this));\r\n        \r\n        // Eventos de rendimiento\r\n        window.addEventListener('load', this.handlePageLoad.bind(this));\r\n        \r\n        // Eventos de red\r\n        window.addEventListener('online', this.handleOnline.bind(this));\r\n        window.addEventListener('offline', this.handleOffline.bind(this));\r\n        \r\n        console.log('✅ Eventos globales configurados');\r\n    }\r\n\r\n    handleGlobalError(event) {\r\n        console.error('❌ Error global:', event.error);\r\n        \r\n        // Tracking de errores (opcional)\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('javascript_error', 'error', event.error.message);\r\n        }\r\n    }\r\n\r\n    handleUnhandledRejection(event) {\r\n        console.error('❌ Promesa rechazada:', event.reason);\r\n        \r\n        // Tracking de errores (opcional)\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('promise_rejection', 'error', event.reason.toString());\r\n        }\r\n    }\r\n\r\n    handleBeforeUnload(event) {\r\n        // Limpiar recursos si es necesario\r\n        console.log('🧹 Limpiando recursos antes de salir...');\r\n    }\r\n\r\n    handlePageLoad(event) {\r\n        const loadTime = performance.now();\r\n        console.log(`⚡ Página cargada en ${Math.round(loadTime)}ms`);\r\n        \r\n        // Tracking de rendimiento\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('page_load_time', 'performance', this.currentPage, Math.round(loadTime));\r\n        }\r\n    }\r\n\r\n    handleOnline(event) {\r\n        console.log('🟢 Conexión restaurada');\r\n        BombasAyalaUtils.showToast('Conexión restaurada', 'success');\r\n    }\r\n\r\n    handleOffline(event) {\r\n        console.log('🔴 Sin conexión a internet');\r\n        BombasAyalaUtils.showToast('Sin conexión a internet', 'warning');\r\n    }\r\n\r\n    // ==================\r\n    // FINALIZACIÓN\r\n    // ==================\r\n    finishInitialization() {\r\n        this.isInitialized = true;\r\n        \r\n        // Ocultar cualquier loader\r\n        this.hideLoaders();\r\n        \r\n        // Mostrar contenido\r\n        this.showContent();\r\n        \r\n        // Tracking de inicialización\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('app_initialized', 'system', this.currentPage);\r\n        }\r\n        \r\n        console.log('🎉 Bombas Ayala App inicializada correctamente');\r\n        console.log('📊 Estado:', this.getAppState());\r\n    }\r\n\r\n    hideLoaders() {\r\n        const loaders = document.querySelectorAll('.loader, .loading, .preloader');\r\n        loaders.forEach(loader => {\r\n            loader.style.opacity = '0';\r\n            setTimeout(() => {\r\n                if (loader.parentNode) {\r\n                    loader.parentNode.removeChild(loader);\r\n                }\r\n            }, 300);\r\n        });\r\n    }\r\n\r\n    showContent() {\r\n        document.body.style.opacity = '1';\r\n        document.body.classList.add('loaded');\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    getAppState() {\r\n        return {\r\n            initialized: this.isInitialized,\r\n            currentPage: this.currentPage,\r\n            controllers: Object.keys(this.controllers),\r\n            isMobile: BombasAyalaUtils.isMobile(),\r\n            config: this.config\r\n        };\r\n    }\r\n\r\n    getController(name) {\r\n        return this.controllers[name] || null;\r\n    }\r\n\r\n    reload() {\r\n        window.location.reload();\r\n    }\r\n\r\n    // Métodos de conveniencia para acciones comunes\r\n    openWhatsApp(message) {\r\n        BombasAyalaUtils.openWhatsApp(message || '¡Hola! Me interesa conocer más sobre sus servicios.', this.config.phone);\r\n    }\r\n\r\n    callPhone() {\r\n        window.location.href = `tel:+${this.config.phone}`;\r\n    }\r\n\r\n    sendEmail(subject = 'Consulta desde el sitio web') {\r\n        const body = encodeURIComponent('Estimados,\\n\\nMe interesa conocer más información sobre sus servicios.\\n\\nSaludos cordiales.');\r\n        window.location.href = `mailto:${this.config.email}?subject=${encodeURIComponent(subject)}&body=${body}`;\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN AUTOMÁTICA\r\n// ==================\r\nfunction initBombasAyalaApp() {\r\n    // Verificar que estemos en el browser\r\n    if (typeof window === 'undefined') {\r\n        console.warn('⚠️ No estamos en un entorno de navegador');\r\n        return;\r\n    }\r\n\r\n    // Crear instancia global\r\n    window.BombasAyala = new BombasAyalaApp();\r\n    \r\n    // API global simplificada\r\n    window.BA = {\r\n        app: window.BombasAyala,\r\n        utils: window.BombasAyalaUtils,\r\n        whatsapp: (msg) => window.BombasAyala.openWhatsApp(msg),\r\n        call: () => window.BombasAyala.callPhone(),\r\n        email: (subject) => window.BombasAyala.sendEmail(subject),\r\n        state: () => window.BombasAyala.getAppState(),\r\n        reload: () => window.BombasAyala.reload()\r\n    };\r\n    \r\n    console.log('🌟 API global disponible como window.BA');\r\n}\r\n\r\n// Auto-inicializar cuando el DOM esté listo\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initBombasAyalaApp);\r\n} else {\r\n    initBombasAyalaApp();\r\n}\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = BombasAyalaApp;\r\n}","/**\r\n * ========================================\r\n * UTILS.JS - BOMBAS AYALA\r\n * Funciones reutilizables y utilidades comunes\r\n * ========================================\r\n */\r\n\r\nwindow.BombasAyalaUtils = {\r\n    \r\n    // ==================\r\n    // SMOOTH SCROLL UNIVERSAL\r\n    // ==================\r\n    initSmoothScroll() {\r\n        document.querySelectorAll('a[href^=\"#\"]').forEach(link => {\r\n            link.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                const target = document.querySelector(this.getAttribute('href'));\r\n                if (target) {\r\n                    target.scrollIntoView({\r\n                        behavior: 'smooth',\r\n                        block: 'start'\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // INTERSECTION OBSERVER UNIVERSAL\r\n    // ==================\r\n    createAnimationObserver(callback, options = {}) {\r\n        const defaultOptions = {\r\n            threshold: 0.1,\r\n            rootMargin: '0px 0px -50px 0px'\r\n        };\r\n        return new IntersectionObserver(callback, { ...defaultOptions, ...options });\r\n    },\r\n\r\n    // Animación de entrada estándar\r\n    animateOnScroll(selector) {\r\n        const elements = document.querySelectorAll(selector);\r\n        \r\n        const observer = this.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                    entry.target.classList.add('animated');\r\n                }\r\n            });\r\n        });\r\n\r\n        elements.forEach(el => {\r\n            el.style.opacity = '0';\r\n            el.style.transform = 'translateY(30px)';\r\n            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n            observer.observe(el);\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // VALIDACIÓN DE FORMULARIOS UNIVERSAL\r\n    // ==================\r\n    validateField(field) {\r\n        const value = field.value.trim();\r\n        const isRequired = field.hasAttribute('required');\r\n        \r\n        // Limpiar estados previos\r\n        field.classList.remove('error', 'success');\r\n        this.removeFieldError(field);\r\n        \r\n        // Validar campo requerido\r\n        if (isRequired && !value) {\r\n            this.showFieldError(field, 'Este campo es obligatorio');\r\n            return false;\r\n        }\r\n        \r\n        // Validar email\r\n        if (field.type === 'email' && value) {\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            if (!emailRegex.test(value)) {\r\n                this.showFieldError(field, 'Ingresa un email válido');\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        // Validar teléfono\r\n        if (field.type === 'tel' && value) {\r\n            const phoneRegex = /^[0-9]{9,}$/;\r\n            if (!phoneRegex.test(value.replace(/\\s+/g, ''))) {\r\n                this.showFieldError(field, 'Ingresa un teléfono válido (mínimo 9 dígitos)');\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        // Campo válido\r\n        if (value) {\r\n            field.classList.add('success');\r\n        }\r\n        \r\n        return true;\r\n    },\r\n\r\n    showFieldError(field, message) {\r\n        field.classList.add('error');\r\n        \r\n        const errorDiv = document.createElement('div');\r\n        errorDiv.className = 'error-message';\r\n        errorDiv.textContent = message;\r\n        errorDiv.style.cssText = `\r\n            color: #E74C3C;\r\n            font-size: 0.85rem;\r\n            margin-top: 0.25rem;\r\n        `;\r\n        \r\n        field.parentNode.appendChild(errorDiv);\r\n    },\r\n\r\n    removeFieldError(field) {\r\n        const errorMsg = field.parentNode.querySelector('.error-message');\r\n        if (errorMsg) {\r\n            errorMsg.remove();\r\n        }\r\n    },\r\n\r\n    // Validar formulario completo\r\n    validateForm(formElement) {\r\n        const inputs = formElement.querySelectorAll('input, select, textarea');\r\n        let isValid = true;\r\n        \r\n        inputs.forEach(input => {\r\n            if (!this.validateField(input)) {\r\n                isValid = false;\r\n            }\r\n        });\r\n        \r\n        return isValid;\r\n    },\r\n\r\n    // ==================\r\n    // WHATSAPP UNIVERSAL\r\n    // ==================\r\n    openWhatsApp(message, phone = '51997984102') {\r\n        const encodedMessage = encodeURIComponent(message);\r\n        const url = `https://wa.me/${phone}?text=${encodedMessage}`;\r\n        window.open(url, '_blank');\r\n    },\r\n\r\n    // Crear mensaje de cotización\r\n    createQuoteMessage(data) {\r\n        let message = '🔧 *SOLICITUD DE COTIZACIÓN*\\n\\n';\r\n        \r\n        if (data.nombre) message += `👤 *Cliente:* ${data.nombre}\\n`;\r\n        if (data.telefono) message += `📞 *Teléfono:* ${data.telefono}\\n`;\r\n        if (data.email) message += `📧 *Email:* ${data.email}\\n`;\r\n        if (data.servicio) message += `🛠️ *Servicio:* ${data.servicio}\\n`;\r\n        if (data.producto) message += `📦 *Producto:* ${data.producto}\\n`;\r\n        if (data.descripcion) message += `📝 *Descripción:* ${data.descripcion}\\n`;\r\n        \r\n        message += '\\n¡Espero su cotización pronto!';\r\n        \r\n        return message;\r\n    },\r\n\r\n    // ==================\r\n    // EVENT TRACKING UNIVERSAL\r\n    // ==================\r\n    trackEvent(action, category, label, value) {\r\n        console.log(`📊 Evento: ${action} | ${category} | ${label || ''}`);\r\n        \r\n        // Google Analytics\r\n        if (typeof gtag !== 'undefined') {\r\n            gtag('event', action, {\r\n                event_category: category,\r\n                event_label: label,\r\n                value: value\r\n            });\r\n        }\r\n    },\r\n\r\n    // ==================\r\n    // LAZY LOADING UNIVERSAL\r\n    // ==================\r\n    initLazyLoading(selector = 'img[data-src]') {\r\n        const images = document.querySelectorAll(selector);\r\n        \r\n        if (images.length === 0) return;\r\n        \r\n        const imageObserver = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const img = entry.target;\r\n                    img.src = img.dataset.src;\r\n                    img.removeAttribute('data-src');\r\n                    img.classList.remove('lazy');\r\n                    img.classList.add('loaded');\r\n                    imageObserver.unobserve(img);\r\n                }\r\n            });\r\n        }, {\r\n            threshold: 0.1,\r\n            rootMargin: '0px 0px 50px 0px'\r\n        });\r\n        \r\n        images.forEach(img => {\r\n            img.classList.add('lazy');\r\n            imageObserver.observe(img);\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    animateCounter(element, start, end, duration = 2000) {\r\n        let startTime = null;\r\n        \r\n        function animation(currentTime) {\r\n            if (startTime === null) startTime = currentTime;\r\n            const timeElapsed = currentTime - startTime;\r\n            const progress = Math.min(timeElapsed / duration, 1);\r\n            \r\n            const value = Math.floor(progress * (end - start) + start);\r\n            \r\n            // Formatear según el tipo de número\r\n            if (end.toString().includes('%')) {\r\n                element.textContent = value + '%';\r\n            } else if (end.toString().includes('+')) {\r\n                element.textContent = value + '+';\r\n            } else if (end.toString().includes('/')) {\r\n                element.textContent = '24/7';\r\n            } else {\r\n                element.textContent = value.toLocaleString();\r\n            }\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(animation);\r\n            }\r\n        }\r\n        \r\n        requestAnimationFrame(animation);\r\n    },\r\n\r\n    // ==================\r\n    // UTILIDADES GENERALES\r\n    // ==================\r\n    \r\n    // Detectar dispositivo móvil\r\n    isMobile() {\r\n        return window.innerWidth <= 768;\r\n    },\r\n\r\n    // Debounce function\r\n    debounce(func, wait) {\r\n        let timeout;\r\n        return function executedFunction(...args) {\r\n            const later = () => {\r\n                clearTimeout(timeout);\r\n                func(...args);\r\n            };\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n        };\r\n    },\r\n\r\n    // Copiar texto al clipboard\r\n    copyToClipboard(text) {\r\n        if (navigator.clipboard) {\r\n            return navigator.clipboard.writeText(text);\r\n        } else {\r\n            // Fallback para navegadores antiguos\r\n            const textArea = document.createElement('textarea');\r\n            textArea.value = text;\r\n            document.body.appendChild(textArea);\r\n            textArea.select();\r\n            document.execCommand('copy');\r\n            document.body.removeChild(textArea);\r\n            return Promise.resolve();\r\n        }\r\n    },\r\n\r\n    // Mostrar notificación toast\r\n    showToast(message, type = 'info', duration = 3000) {\r\n        const toast = document.createElement('div');\r\n        toast.className = `toast toast-${type}`;\r\n        toast.textContent = message;\r\n        toast.style.cssText = `\r\n            position: fixed;\r\n            top: 20px;\r\n            right: 20px;\r\n            padding: 12px 20px;\r\n            border-radius: 8px;\r\n            color: white;\r\n            font-weight: 600;\r\n            z-index: 9999;\r\n            opacity: 0;\r\n            transform: translateX(100%);\r\n            transition: all 0.3s ease;\r\n        `;\r\n        \r\n        // Colores según tipo\r\n        const colors = {\r\n            success: '#27AE60',\r\n            error: '#E74C3C',\r\n            warning: '#F39C12',\r\n            info: '#3498DB'\r\n        };\r\n        \r\n        toast.style.backgroundColor = colors[type] || colors.info;\r\n        \r\n        document.body.appendChild(toast);\r\n        \r\n        // Animar entrada\r\n        setTimeout(() => {\r\n            toast.style.opacity = '1';\r\n            toast.style.transform = 'translateX(0)';\r\n        }, 100);\r\n        \r\n        // Animar salida\r\n        setTimeout(() => {\r\n            toast.style.opacity = '0';\r\n            toast.style.transform = 'translateX(100%)';\r\n            setTimeout(() => {\r\n                if (document.body.contains(toast)) {\r\n                    document.body.removeChild(toast);\r\n                }\r\n            }, 300);\r\n        }, duration);\r\n    },\r\n\r\n    // Precargar imágenes\r\n    preloadImages(imageUrls) {\r\n        imageUrls.forEach(url => {\r\n            const img = new Image();\r\n            img.src = url;\r\n        });\r\n    }\r\n};\r\n\r\n// ==================\r\n// AUTO-INICIALIZACIÓN\r\n// ==================\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    // Inicializar funciones comunes automáticamente\r\n    BombasAyalaUtils.initSmoothScroll();\r\n    BombasAyalaUtils.initLazyLoading();\r\n    \r\n    console.log('✅ BombasAyala Utils inicializados');\r\n});\r\n\r\n// Exportar para uso en módulos si es necesario\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = window.BombasAyalaUtils;\r\n}"]}
