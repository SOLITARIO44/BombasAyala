{"version":3,"sources":["main.js","contacto/contacto.js","fotos/fotos.js","header/header.js","inicio/hero-dinamico.js","inicio/whatsapp.js","nosotros/nosotros.js","productos/productos.js","servicios/servicios.js","soporte/soporte.js","utilidades/main.js","utilidades/utilis.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_regenerator","e","t","r","n","toStringTag","i","c","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","this","setPrototypeOf","__proto__","displayName","w","m","defineProperty","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","toPrimitive","String","Number","ContactoController","formularioContacto","document","getElementById","botonEnviar","querySelector","mapaInteractivo","informacionMapa","init","initFormulario","initMapa","initAnimaciones","initCopyToClipboard","console","log","_this","querySelectorAll","forEach","input","addEventListener","BombasAyalaUtils","validateField","classList","contains","preventDefault","enviarFormulario","_this2","validateForm","textoOriginal","innerHTML","disabled","formData","FormData","datos","fromEntries","setTimeout","reset","remove","removeFieldError","trackEvent","mostrarMensaje","primerError","focus","scrollIntoView","behavior","block","mensaje","tipo","mensajeAnterior","divMensaje","createElement","className","concat","insertBefore","firstChild","body","style","opacity","_this3","coordenadas","transform","googleMapsUrl","window","open","iframe","add","animateOnScroll","seccionContacto","rect","getBoundingClientRect","top","innerHeight","bottom","span","_callee","texto","original","originalColor","_t","_context","textContent","copyToClipboard","color","showToast","warn","inicializarMapaPersonalizado","initContacto","contactoController","Contacto","scrollToForm","_window$contactoContr","resetForm","_window$contactoContr2","module","exports","GaleriaController","filtroBtns","tarjetasProyecto","btnVerMas","imagenesGaleria","filtroActual","mostrandoTodos","proyectosPorPagina","setupFilters","setupVerMasButton","setupLightbox","setupAnimations","btn","cambiarFiltro","actualizarBotonVerMas","btnClickeado","b","filtro","dataset","aplicarFiltroConAnimacion","tarjeta","index","categoria","esVisible","esOculto","ocultarProyecto","mostrarProyecto","undefined","display","transition","toggleVerMasProyectos","mostrarMenosProyectos","mostrarMasProyectos","_this4","getProyectosOcultos","proyecto","_this5","_this6","Array","from","filter","categoriaProyecto","getAttribute","proyectosOcultos","_this7","img","abrirLightbox","imagen","modal","cssText","imagenAmpliada","Image","src","closeBtn","background","infoContainer","crearInfoProyecto","appendChild","cerrarModal","removeChild","overflow","target","handleEscape","removeEventListener","_tarjeta$querySelecto","_tarjeta$querySelecto2","closest","titulo","descripcion","observer","createAnimationObserver","entries","entry","isIntersecting","observe","totalProyectos","proyectosVisibles","initGaleria","galeriaController","Galeria","filtrar","_window$galeriaContro","filtrarPor","stats","_window$galeriaContro2","getStats","HeaderController","headerUnificado","contactBar","navPrincipal","menuToggle","menuOverlay","navMenu","isContactBarVisible","lastScrollTop","scrollThreshold","isMobileMenuOpen","contactBarHeight","navHeight","totalHeaderHeight","calculateDimensions","setInitialBodyMargin","setupScrollListener","setupMobileMenu","handleResize","offsetHeight","nav","total","innerWidth","marginTop","ticking","requestAnimationFrame","handleScrollEvent","passive","currentScrollTop","pageYOffset","documentElement","scrollTop","scrollDirection","Math","abs","hideContactBar","showContactBar","updateBodyMargin","stopPropagation","toggleMobileMenu","closeMobileMenu","link","openMobileMenu","_this$menuToggle","_this$navMenu","_this$menuOverlay","navContainer","_this$menuToggle2","_this$navMenu2","_this$menuOverlay2","debounce","contactBarVisible","mobileMenuOpen","scrollPosition","isMobile","dimensions","initHeader","headerController","Header","show","_window$headerControl","forceShowContactBar","hide","_window$headerControl2","forceHideContactBar","getState","_window$headerControl3","closeMenu","_window$headerControl4","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","name","test","isArray","readyState","InicioController","heroBackground","heroImage","loadingIndicator","heroSection","backgroundImages","mainImages","currentImageIndex","intervalId","isVisible","preloadImages","initializeHero","initScrollAnimations","setupVisibilityControl","setBackgroundImage","setMainImage","startImageRotation","backgroundImage","setInterval","changeToNextImage","clearInterval","initCounters","contadores","observerContadores","elemento","objetivo","parseInt","animateCounter","unobserve","threshold","contador","hidden","pauseAnimations","resumeAnimations","_this3$heroSection","heroRect","animationPlayState","allImages","currentImage","totalImages","isRotating","stopImageRotation","changeBackgroundImage","inicioController","nextImage","initializeSmoothScroll","initializeScrollAnimations","initInicio","Hero","next","_window$inicioControl","previous","_window$inicioControl2","previousImage","goTo","_window$inicioControl3","goToImage","_window$inicioControl4","pause","_window$inicioControl5","resume","_window$inicioControl6","FlotantesController","flotantesContainer","flotantes","hideThreshold","setupScrollBehavior","setupClickEffects","setupTooltips","setupWhatsAppIntegration","adjustForMobile","currentScroll","flotante","addClickEffect","trackClick","navigator","vibrate","tooltips","setAttribute","whatsappBtn","createDefaultWhatsAppMessage","openWhatsApp","setupOtherWhatsAppButtons","button","customMessage","producto","specs","createProductWhatsAppMessage","visibility","getTransformForDevice","getHiddenTransformForDevice","totalFlotantes","inicializarCotizaciones","boton","especificaciones","telefono","whatsapp","createQuoteMessage","initFlotantes","flotantesController","Flotantes","_window$flotantesCont","forceShow","_window$flotantesCont2","forceHide","toggle","_window$flotantesCont3","_window$flotantesCont4","WhatsApp","quote","ownKeys","keys","getOwnPropertySymbols","getOwnPropertyDescriptor","push","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","NosotrosController","overlayVideo","iconoPlay","listaDistritos","zonas","norte","distritos","sur","este","oeste","estadisticas","experiencia","clientes","servicios","atencion","initContadoresAnimados","initMapaInteractivo","initVideoOverlay","initInformacionInicial","initBotonesCTA","zonasElementos","zona","tipoZona","getTipoZona","mostrarDistritos","zIndex","mostrarInformacionZona","map","distrito","join","item","mostrarModalVideo","trim","datosLima","getDatosLima","totalDistritos","tiempoRespuestaPromedio","accion","values","reduce","poblacionAproximada","areaCobertura","zonasCobertura","nuevasEstadisticas","nosotrosController","mostrarZona","initNosotros","_window$nosotrosContr5","_window$nosotrosContr6","Nosotros","_window$nosotrosContr","actualizarStats","_window$nosotrosContr2","actualizarEstadisticas","_window$nosotrosContr3","BombasAyala","_window$nosotrosContr4","ProductosController","filtros","productos","productosPorPagina","setupHoverEffects","setupCotizaciones","filtroClickeado","aplicarFiltro","categoriaProducto","mostrarProducto","ocultarProducto","animation","toggleVerMas","mostrarMenosProductos","mostrarMasProductos","productosOcultos","getProductosOcultos","card","termino","toLowerCase","_producto$querySelect","_producto$querySelect2","includes","visibles","ocultos","animarElementos","efectosHover","initProductos","productosController","Productos","_window$productosCont","buscar","_window$productosCont2","buscarProducto","resetear","_window$productosCont3","resetearFiltros","_window$productosCont4","ServiciosController","formularioCotizacion","servicioCards","testimonioCards","statsItems","initFormularioCotizacion","initContadores","initBotonesCotizar","initBotonesEmergencia","initAccesibilidad","enviarCotizacion","nombre","get","email","servicio","botonSubmit","el","statsObserver","numero","match","targetNumber","getServicioFromButton","selectServicio","primerInput","servicioCard","getTipoEmergencia","location","href","icono","clases","outline","outlineOffset","dispatchEvent","Event","testimonios","hasFormulario","action","category","label","field","showFieldError","message","element","start","end","duration","initServicios","serviciosController","Servicios","_window$serviciosCont","preseleccionar","_window$serviciosCont2","preseleccionarServicio","_window$serviciosCont3","SoporteController","faqItems","buscadorFAQ","formularioSoporte","chatButton","faqsOriginales","faqActivo","initFAQ","initBuscador","initFormularioSoporte","initChatSoporte","guardarFAQsOriginales","pregunta","respuesta","toggleFAQ","isActive","cerrarTodosFAQs","abrirFAQ","maxHeight","scrollHeight","textoPregunta","otherItem","otherRespuesta","otherIcono","otherPregunta","filtrarFAQs","clearBtn","terminoLower","resultadosEncontrados","_item$querySelector","_item$querySelector2","mostrarResultadosBusqueda","cantidad","parentNode","_item$querySelector3","_item$querySelector4","enviarSolicitudSoporte","prioridad","crearMensajeSoporte","consulta","tecnico","garantia","emergencia","otro","charAt","toUpperCase","baja","normal","alta","urgente","Date","toLocaleString","abrirChatSoporte","mostrarPrompChat","contarInteracciones","sessionStorage","getItem","textoBusqueda","faq","find","_item$querySelector5","_this$faqActivo$query","totalFAQs","hasChat","initSoporte","soporteController","Soporte","_window$soporteContro","abrirFAQPorTexto","_window$soporteContro2","buscarFAQ","chat","_window$soporteContro3","_window$soporteContro4","interacciones","setItem","BombasAyalaApp","isInitialized","currentPage","detectCurrentPage","controllers","config","phone","address","analytics","enabled","trackingId","checkDependencies","initGlobalComponents","initPageSpecificComponents","setupGlobalEvents","finishInitialization","error","_i","_required","dep","path","pathname","header","initInicioComponents","initProductosComponents","initServiciosComponents","initGaleriaComponents","initNosotrosComponents","initContactoComponents","initSoporteComponents","inicio","galeria","nosotros","contacto","soporte","handleGlobalError","handleUnhandledRejection","handleBeforeUnload","handlePageLoad","handleOnline","handleOffline","event","reason","loadTime","performance","now","round","hideLoaders","showContent","getAppState","loader","initialized","reload","subject","encodeURIComponent","initBombasAyalaApp","BA","app","utils","msg","callPhone","sendEmail","state","initSmoothScroll","callback","options","IntersectionObserver","rootMargin","selector","elements","isRequired","hasAttribute","type","replace","errorDiv","errorMsg","formElement","inputs","isValid","encodedMessage","url","data","gtag","event_category","event_label","initLazyLoading","images","imageObserver","removeAttribute","startTime","currentTime","timeElapsed","progress","min","floor","func","wait","timeout","_len","args","_key","clearTimeout","text","clipboard","writeText","textArea","select","execCommand","toast","colors","success","warning","info","backgroundColor","imageUrls"],"mappings":"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","file":"main.js","sourcesContent":[null,"class ContactoController {\r\n    constructor() {\r\n        this.formularioContacto = document.getElementById('formularioContacto');\r\n        this.botonEnviar = document.querySelector('.boton-enviar');\r\n        this.mapaInteractivo = document.getElementById('mapaInteractivo');\r\n        this.informacionMapa = document.getElementById('informacionMapa');\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFormulario();\r\n        this.initMapa();\r\n        this.initAnimaciones();\r\n        this.initCopyToClipboard();\r\n        \r\n        console.log('✅ Contacto Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE CONTACTO\r\n    // ==================\r\n    initFormulario() {\r\n        if (!this.formularioContacto) return;\r\n\r\n        const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n\r\n        // Validación en tiempo real\r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioContacto.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarFormulario();\r\n        });\r\n    }\r\n\r\n    enviarFormulario() {\r\n        // Validar formulario completo\r\n        if (!BombasAyalaUtils.validateForm(this.formularioContacto)) {\r\n            this.mostrarMensaje('Por favor, corrige los errores en el formulario.', 'error');\r\n            \r\n            // Hacer scroll al primer error\r\n            const primerError = this.formularioContacto.querySelector('.error');\r\n            if (primerError) {\r\n                primerError.focus();\r\n                primerError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Cambiar estado del botón\r\n        const textoOriginal = this.botonEnviar.innerHTML;\r\n        this.botonEnviar.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ENVIANDO...';\r\n        this.botonEnviar.disabled = true;\r\n\r\n        // Obtener datos del formulario\r\n        const formData = new FormData(this.formularioContacto);\r\n        const datos = Object.fromEntries(formData);\r\n\r\n        // Simular envío\r\n        setTimeout(() => {\r\n            console.log('📧 Datos del formulario:', datos);\r\n                        \r\n            // Limpiar formulario\r\n            this.formularioContacto.reset();\r\n            const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            this.botonEnviar.innerHTML = textoOriginal;\r\n            this.botonEnviar.disabled = false;\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('form_submit', 'contacto', 'formulario_principal');\r\n            \r\n        }, 2000);\r\n    }\r\n\r\n    mostrarMensaje(mensaje, tipo) {\r\n        // Remover mensaje anterior\r\n        const mensajeAnterior = document.querySelector('.mensaje-formulario');\r\n        if (mensajeAnterior) {\r\n            mensajeAnterior.remove();\r\n        }\r\n\r\n        // Crear nuevo mensaje\r\n        const divMensaje = document.createElement('div');\r\n        divMensaje.className = `mensaje-formulario ${tipo}`;\r\n        divMensaje.innerHTML = `\r\n            <i class=\"fas ${tipo === 'exito' ? 'fa-check-circle' : 'fa-exclamation-triangle'}\"></i>\r\n            <span>${mensaje}</span>\r\n        `;\r\n\r\n        // Insertar mensaje\r\n        this.formularioContacto.insertBefore(divMensaje, this.formularioContacto.firstChild);\r\n\r\n        // Auto-remover después de 5 segundos\r\n        setTimeout(() => {\r\n            if (divMensaje && document.body.contains(divMensaje)) {\r\n                divMensaje.style.opacity = '0';\r\n                setTimeout(() => {\r\n                    if (document.body.contains(divMensaje)) {\r\n                        divMensaje.remove();\r\n                    }\r\n                }, 300);\r\n            }\r\n        }, 5000);\r\n    }\r\n\r\n    // ==================\r\n    // MAPA INTERACTIVO\r\n    // ==================\r\n    initMapa() {\r\n        if (!this.mapaInteractivo || !this.informacionMapa) return;\r\n\r\n        // Coordenadas de Bombas Ayala\r\n        const coordenadas = {\r\n            lat: -12.113154,\r\n            lng: -77.050290\r\n        };\r\n\r\n        // Efectos hover\r\n        this.mapaInteractivo.addEventListener('mouseenter', () => {\r\n            this.informacionMapa.style.opacity = '0';\r\n            this.informacionMapa.style.transform = 'translateY(-10px)';\r\n        });\r\n\r\n        this.mapaInteractivo.addEventListener('mouseleave', () => {\r\n            this.informacionMapa.style.opacity = '1';\r\n            this.informacionMapa.style.transform = 'translateY(0)';\r\n        });\r\n\r\n        // Click en el mapa\r\n        this.mapaInteractivo.addEventListener('click', () => {\r\n            const googleMapsUrl = `https://www.google.com/maps?q=${coordenadas.lat},${coordenadas.lng}`;\r\n            window.open(googleMapsUrl, '_blank');\r\n            \r\n            BombasAyalaUtils.trackEvent('map_click', 'contacto', 'google_maps');\r\n        });\r\n\r\n        // Preloader para iframe\r\n        const iframe = this.mapaInteractivo.querySelector('iframe');\r\n        if (iframe) {\r\n            iframe.addEventListener('load', () => {\r\n                this.mapaInteractivo.classList.add('mapa-cargado');\r\n            });\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar elementos al hacer scroll\r\n        BombasAyalaUtils.animateOnScroll('.seccion-formulario-contacto, .informacion-contacto-directo, .seccion-horarios');\r\n\r\n        // Animación adicional al hacer scroll\r\n        window.addEventListener('scroll', () => {\r\n            const seccionContacto = document.querySelector('.seccion-contacto');\r\n            if (seccionContacto) {\r\n                const rect = seccionContacto.getBoundingClientRect();\r\n                \r\n                if (rect.top < window.innerHeight && rect.bottom > 0) {\r\n                    seccionContacto.classList.add('visible');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // COPIAR AL CLIPBOARD\r\n    // ==================\r\n    initCopyToClipboard() {\r\n        const elementosCopiables = document.querySelectorAll('.detalles-contacto span');\r\n        \r\n        elementosCopiables.forEach(span => {\r\n            span.addEventListener('click', async () => {\r\n                const texto = span.textContent;\r\n                \r\n                try {\r\n                    await BombasAyalaUtils.copyToClipboard(texto);\r\n                    \r\n                    // Feedback visual\r\n                    const original = span.textContent;\r\n                    const originalColor = span.style.color;\r\n                    \r\n                    span.textContent = '¡Copiado!';\r\n                    span.style.color = '#27AE60';\r\n                    \r\n                    setTimeout(() => {\r\n                        span.textContent = original;\r\n                        span.style.color = originalColor;\r\n                    }, 1000);\r\n                    \r\n                    // Toast notification\r\n                    BombasAyalaUtils.showToast(`Copiado: ${texto}`, 'success');\r\n                    \r\n                    // Tracking\r\n                    BombasAyalaUtils.trackEvent('copy_contact', 'contacto', texto);\r\n                    \r\n                } catch (err) {\r\n                    console.warn('No se pudo copiar el texto:', err);\r\n                    BombasAyalaUtils.showToast('No se pudo copiar', 'error');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // MÉTODOS PÚBLICOS\r\n    // ==================\r\n    scrollToForm() {\r\n        if (this.formularioContacto) {\r\n            this.formularioContacto.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n            });\r\n        }\r\n    }\r\n\r\n    resetForm() {\r\n        if (this.formularioContacto) {\r\n            this.formularioContacto.reset();\r\n            const inputs = this.formularioContacto.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES ADICIONALES\r\n// ==================\r\n\r\n// Inicializar mapa personalizado (función legacy)\r\nfunction inicializarMapaPersonalizado() {\r\n    const mapaInteractivo = document.getElementById('mapaInteractivo');\r\n    const informacionMapa = document.getElementById('informacionMapa');\r\n    \r\n    if (mapaInteractivo && informacionMapa) {\r\n        mapaInteractivo.addEventListener('click', () => {\r\n            console.log('🗺️ Mapa clickeado');\r\n        });\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initContacto() {\r\n    window.contactoController = new ContactoController();\r\n    \r\n    // API global\r\n    window.Contacto = {\r\n        scrollToForm: () => window.contactoController?.scrollToForm(),\r\n        resetForm: () => window.contactoController?.resetForm()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initContacto();\r\n    inicializarMapaPersonalizado(); // Mantener compatibilidad\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ContactoController;\r\n}","class GaleriaController {\r\n    constructor() {\r\n        this.filtroBtns = document.querySelectorAll('.filtro-btn');\r\n        this.tarjetasProyecto = document.querySelectorAll('.tarjeta-proyecto');\r\n        this.btnVerMas = document.getElementById('btnVerMas');\r\n        this.imagenesGaleria = document.querySelectorAll('.imagen-item img');\r\n        \r\n        // Estado\r\n        this.filtroActual = 'todos';\r\n        this.mostrandoTodos = false;\r\n        this.proyectosPorPagina = 6;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (this.tarjetasProyecto.length === 0) {\r\n            console.warn('Galería: No se encontraron proyectos');\r\n            return;\r\n        }\r\n\r\n        this.setupFilters();\r\n        this.setupVerMasButton();\r\n        this.setupLightbox();\r\n        this.setupAnimations();\r\n        \r\n        console.log('✅ Galería Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA DE FILTROS\r\n    // ==================\r\n    setupFilters() {\r\n        if (this.filtroBtns.length === 0) return;\r\n\r\n        this.filtroBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                this.cambiarFiltro(btn);\r\n            });\r\n        });\r\n\r\n        // Aplicar filtro inicial\r\n        this.actualizarBotonVerMas('todos');\r\n    }\r\n\r\n    cambiarFiltro(btnClickeado) {\r\n        // Actualizar filtro activo\r\n        this.filtroBtns.forEach(b => b.classList.remove('activo'));\r\n        btnClickeado.classList.add('activo');\r\n        \r\n        const filtro = btnClickeado.dataset.filtro;\r\n        this.filtroActual = filtro;\r\n        \r\n        // Resetear estado de \"Ver más\"\r\n        this.mostrandoTodos = false;\r\n        \r\n        // Aplicar filtro con animación\r\n        this.aplicarFiltroConAnimacion(filtro);\r\n        \r\n        // Actualizar botón \"Ver más\"\r\n        this.actualizarBotonVerMas(filtro);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('gallery_filter', 'proyectos', filtro);\r\n        \r\n        console.log(`🎨 Filtro galería aplicado: ${filtro}`);\r\n    }\r\n\r\n    aplicarFiltroConAnimacion(filtro) {\r\n        this.tarjetasProyecto.forEach((tarjeta, index) => {\r\n            const categoria = tarjeta.dataset.categoria;\r\n            const esVisible = filtro === 'todos' || categoria === filtro;\r\n            const esOculto = tarjeta.classList.contains('proyecto-oculto');\r\n            \r\n            // Animación de salida\r\n            tarjeta.style.transform = 'scale(0.8)';\r\n            tarjeta.style.opacity = '0';\r\n            \r\n            setTimeout(() => {\r\n                if (esVisible && (!esOculto || this.mostrandoTodos)) {\r\n                    this.mostrarProyecto(tarjeta, index);\r\n                } else {\r\n                    this.ocultarProyecto(tarjeta);\r\n                }\r\n            }, 150);\r\n        });\r\n    }\r\n\r\n    mostrarProyecto(tarjeta, index = 0) {\r\n        tarjeta.style.display = 'block';\r\n        \r\n        // Animación de entrada escalonada\r\n        setTimeout(() => {\r\n            tarjeta.style.transform = 'scale(1)';\r\n            tarjeta.style.opacity = '1';\r\n            tarjeta.style.transition = 'all 0.4s ease';\r\n        }, index * 50);\r\n    }\r\n\r\n    ocultarProyecto(tarjeta) {\r\n        tarjeta.style.display = 'none';\r\n        tarjeta.style.transform = 'scale(0.8)';\r\n        tarjeta.style.opacity = '0';\r\n    }\r\n\r\n    // ==================\r\n    // BOTÓN \"VER MÁS\"\r\n    // ==================\r\n    setupVerMasButton() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        this.btnVerMas.addEventListener('click', () => {\r\n            this.toggleVerMasProyectos();\r\n        });\r\n    }\r\n\r\n    toggleVerMasProyectos() {\r\n        if (!this.mostrandoTodos) {\r\n            this.mostrarMasProyectos();\r\n        } else {\r\n            this.mostrarMenosProyectos();\r\n        }\r\n    }\r\n\r\n    mostrarMasProyectos() {\r\n        this.btnVerMas.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Cargando proyectos...';\r\n        \r\n        setTimeout(() => {\r\n            const proyectosOcultos = this.getProyectosOcultos();\r\n            \r\n            proyectosOcultos.forEach((proyecto, index) => {\r\n                this.mostrarProyecto(proyecto, index);\r\n                proyecto.classList.remove('proyecto-oculto');\r\n            });\r\n            \r\n            this.mostrandoTodos = true;\r\n            this.actualizarBotonVerMas(this.filtroActual);\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('ver_mas_proyectos', 'galeria', this.filtroActual);\r\n            \r\n        }, 800);\r\n    }\r\n\r\n    mostrarMenosProyectos() {\r\n        // Ocultar proyectos adicionales\r\n        this.tarjetasProyecto.forEach(proyecto => {\r\n            if (!proyecto.classList.contains('proyecto-inicial')) {\r\n                proyecto.classList.add('proyecto-oculto');\r\n                this.ocultarProyecto(proyecto);\r\n            }\r\n        });\r\n        \r\n        this.mostrandoTodos = false;\r\n        this.aplicarFiltroConAnimacion(this.filtroActual);\r\n        this.actualizarBotonVerMas(this.filtroActual);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('ver_menos_proyectos', 'galeria', this.filtroActual);\r\n    }\r\n\r\n    getProyectosOcultos() {\r\n        return Array.from(this.tarjetasProyecto).filter(proyecto => {\r\n            const categoriaProyecto = proyecto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProyecto === this.filtroActual;\r\n            const esOculto = proyecto.classList.contains('proyecto-oculto');\r\n            \r\n            return esVisible && esOculto;\r\n        });\r\n    }\r\n\r\n    actualizarBotonVerMas(categoria = 'todos') {\r\n        if (!this.btnVerMas) return;\r\n\r\n        const proyectosOcultos = this.getProyectosOcultos();\r\n        \r\n        if (proyectosOcultos.length > 0 && !this.mostrandoTodos) {\r\n            this.btnVerMas.style.display = 'inline-block';\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Proyectos';\r\n        } else if (this.mostrandoTodos && proyectosOcultos.length === 0) {\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n            this.btnVerMas.style.display = 'inline-block';\r\n        } else {\r\n            this.btnVerMas.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // LIGHTBOX PARA IMÁGENES\r\n    // ==================\r\n    setupLightbox() {\r\n        this.imagenesGaleria.forEach(img => {\r\n            img.addEventListener('click', () => {\r\n                this.abrirLightbox(img);\r\n            });\r\n        });\r\n    }\r\n\r\n    abrirLightbox(imagen) {\r\n        // Crear modal\r\n        const modal = document.createElement('div');\r\n        modal.className = 'lightbox-modal';\r\n        modal.style.cssText = `\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100vw;\r\n            height: 100vh;\r\n            background: rgba(15, 35, 70, 0.95);\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            z-index: 9999;\r\n            cursor: zoom-out;\r\n            opacity: 0;\r\n            transition: opacity 0.3s ease;\r\n        `;\r\n\r\n        // Imagen ampliada\r\n        const imagenAmpliada = new Image();\r\n        imagenAmpliada.src = imagen.src;\r\n        imagenAmpliada.style.cssText = `\r\n            max-height: 90vh;\r\n            max-width: 90vw;\r\n            object-fit: contain;\r\n            border-radius: 8px;\r\n            box-shadow: 0 20px 40px rgba(0,0,0,0.3);\r\n            transform: scale(0.8);\r\n            transition: transform 0.3s ease;\r\n        `;\r\n\r\n        // Botón de cerrar\r\n        const closeBtn = document.createElement('span');\r\n        closeBtn.innerHTML = '&times;';\r\n        closeBtn.style.cssText = `\r\n            position: absolute;\r\n            top: 30px;\r\n            right: 30px;\r\n            color: white;\r\n            font-size: 40px;\r\n            cursor: pointer;\r\n            background: rgba(0,0,0,0.5);\r\n            width: 60px;\r\n            height: 60px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: 50%;\r\n            transition: background 0.3s ease;\r\n        `;\r\n\r\n        closeBtn.addEventListener('mouseenter', () => {\r\n            closeBtn.style.background = 'rgba(0,0,0,0.8)';\r\n        });\r\n\r\n        closeBtn.addEventListener('mouseleave', () => {\r\n            closeBtn.style.background = 'rgba(0,0,0,0.5)';\r\n        });\r\n\r\n        // Información del proyecto (opcional)\r\n        const infoContainer = this.crearInfoProyecto(imagen);\r\n\r\n        modal.appendChild(imagenAmpliada);\r\n        modal.appendChild(closeBtn);\r\n        if (infoContainer) {\r\n            modal.appendChild(infoContainer);\r\n        }\r\n\r\n        // Función para cerrar\r\n        const cerrarModal = () => {\r\n            modal.style.opacity = '0';\r\n            imagenAmpliada.style.transform = 'scale(0.8)';\r\n            \r\n            setTimeout(() => {\r\n                if (document.body.contains(modal)) {\r\n                    document.body.removeChild(modal);\r\n                }\r\n                document.body.style.overflow = '';\r\n            }, 300);\r\n        };\r\n\r\n        // Event listeners\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) cerrarModal();\r\n        });\r\n        \r\n        closeBtn.addEventListener('click', cerrarModal);\r\n        \r\n        // Cerrar con Escape\r\n        const handleEscape = (e) => {\r\n            if (e.key === 'Escape') {\r\n                cerrarModal();\r\n                document.removeEventListener('keydown', handleEscape);\r\n            }\r\n        };\r\n        document.addEventListener('keydown', handleEscape);\r\n\r\n        // Agregar al DOM\r\n        document.body.appendChild(modal);\r\n        document.body.style.overflow = 'hidden';\r\n\r\n        // Animar entrada\r\n        setTimeout(() => {\r\n            modal.style.opacity = '1';\r\n            imagenAmpliada.style.transform = 'scale(1)';\r\n        }, 50);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('lightbox_open', 'galeria', 'imagen_proyecto');\r\n    }\r\n\r\n    crearInfoProyecto(imagen) {\r\n        const tarjeta = imagen.closest('.tarjeta-proyecto');\r\n        if (!tarjeta) return null;\r\n\r\n        const titulo = tarjeta.querySelector('.proyecto-titulo')?.textContent;\r\n        const descripcion = tarjeta.querySelector('.proyecto-descripcion')?.textContent;\r\n        \r\n        if (!titulo) return null;\r\n\r\n        const infoContainer = document.createElement('div');\r\n        infoContainer.style.cssText = `\r\n            position: absolute;\r\n            bottom: 30px;\r\n            left: 30px;\r\n            right: 30px;\r\n            background: rgba(0,0,0,0.8);\r\n            color: white;\r\n            padding: 20px;\r\n            border-radius: 8px;\r\n            max-width: 500px;\r\n        `;\r\n\r\n        infoContainer.innerHTML = `\r\n            <h3 style=\"margin: 0 0 10px 0; font-size: 1.5rem;\">${titulo}</h3>\r\n            ${descripcion ? `<p style=\"margin: 0; opacity: 0.9;\">${descripcion}</p>` : ''}\r\n        `;\r\n\r\n        return infoContainer;\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    setupAnimations() {\r\n        // Animar proyectos al hacer scroll\r\n        BombasAyalaUtils.animateOnScroll('.tarjeta-proyecto, .paso-proceso, .titulo-seccion');\r\n        \r\n        // Animación específica para la galería\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0) scale(1)';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.tarjetasProyecto.forEach(tarjeta => {\r\n            tarjeta.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n            tarjeta.style.opacity = '0';\r\n            tarjeta.style.transform = 'translateY(30px) scale(0.95)';\r\n            observer.observe(tarjeta);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    filtrarPor(categoria) {\r\n        const filtro = document.querySelector(`[data-filtro=\"${categoria}\"]`);\r\n        if (filtro) {\r\n            this.cambiarFiltro(filtro);\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            totalProyectos: this.tarjetasProyecto.length,\r\n            proyectosVisibles: Array.from(this.tarjetasProyecto).filter(p => p.style.display !== 'none').length,\r\n            filtroActual: this.filtroActual,\r\n            mostrandoTodos: this.mostrandoTodos\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initGaleria() {\r\n    // Solo inicializar en páginas con galería\r\n    if (document.querySelector('.tarjeta-proyecto, .galeria-proyectos')) {\r\n        window.galeriaController = new GaleriaController();\r\n        \r\n        // API global\r\n        window.Galeria = {\r\n            filtrar: (categoria) => window.galeriaController?.filtrarPor(categoria),\r\n            stats: () => window.galeriaController?.getStats()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', initGaleria);\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = GaleriaController;\r\n}","class HeaderController {\r\n    constructor() {\r\n        this.headerUnificado = document.querySelector('.header-unificado');\r\n        this.contactBar = document.querySelector('.contact-bar');\r\n        this.navPrincipal = document.querySelector('.nav-principal');\r\n        this.menuToggle = document.querySelector('.mobile-menu-toggle');\r\n        this.menuOverlay = document.querySelector('.mobile-menu-overlay');\r\n        this.navMenu = document.querySelector('.nav-menu');\r\n        \r\n        // Estados\r\n        this.isContactBarVisible = true;\r\n        this.lastScrollTop = 0;\r\n        this.scrollThreshold = 80;\r\n        this.isMobileMenuOpen = false;\r\n        \r\n        // Dimensiones\r\n        this.contactBarHeight = 0;\r\n        this.navHeight = 0;\r\n        this.totalHeaderHeight = 0;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.headerUnificado || !this.contactBar || !this.navPrincipal) { \r\n            console.warn('Header: Elementos principales no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.calculateDimensions();\r\n        this.setInitialBodyMargin();\r\n        this.setupScrollListener();\r\n        this.setupMobileMenu();\r\n        this.handleResize();\r\n        \r\n        console.log('✅ Header Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // CÁLCULO DE DIMENSIONES\r\n    // ==================\r\n    calculateDimensions() {\r\n        this.contactBarHeight = this.contactBar.offsetHeight;\r\n        this.navHeight = this.navPrincipal.offsetHeight;\r\n        this.totalHeaderHeight = this.contactBarHeight + this.navHeight;\r\n        \r\n        console.log('📐 Dimensiones calculadas:', {\r\n            contactBar: this.contactBarHeight,\r\n            nav: this.navHeight,\r\n            total: this.totalHeaderHeight\r\n        });\r\n    }\r\n\r\n    setInitialBodyMargin() {\r\n        if (window.innerWidth <= 767) {\r\n            document.body.style.marginTop = '100px';\r\n        } else {\r\n            document.body.style.marginTop = '120px';\r\n        }\r\n    }\r\n\r\n    updateBodyMargin() {\r\n        if (this.isContactBarVisible) {\r\n            if (window.innerWidth <= 767) {\r\n                document.body.style.marginTop = '100px';\r\n            } else {\r\n                document.body.style.marginTop = '120px';\r\n            }\r\n        } else {\r\n            if (window.innerWidth <= 767) {\r\n                document.body.style.marginTop = '70px';\r\n            } else {\r\n                document.body.style.marginTop = '80px';\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // SCROLL BEHAVIOR\r\n    // ==================\r\n    setupScrollListener() {\r\n        let ticking = false;\r\n\r\n        const handleScroll = () => {\r\n            if (!ticking) {\r\n                requestAnimationFrame(() => {\r\n                    this.handleScrollEvent();\r\n                    ticking = false;\r\n                });\r\n                ticking = true;\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', handleScroll, { passive: true });\r\n    }\r\n\r\n    handleScrollEvent() {\r\n        const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n        const scrollDirection = currentScrollTop > this.lastScrollTop ? 'down' : 'up';\r\n        const scrollDistance = Math.abs(currentScrollTop - this.lastScrollTop);\r\n\r\n        // Evitar cambios por scrolls mínimos\r\n        if (scrollDistance < 5) {\r\n            this.lastScrollTop = currentScrollTop;\r\n            return;\r\n        }\r\n\r\n        if (scrollDirection === 'down' && currentScrollTop > this.scrollThreshold) {\r\n            this.hideContactBar();\r\n        } else if (scrollDirection === 'up' && currentScrollTop < this.scrollThreshold) {\r\n            this.showContactBar();\r\n        }\r\n\r\n        this.lastScrollTop = currentScrollTop;\r\n    }\r\n\r\n    hideContactBar() {\r\n        if (!this.isContactBarVisible) return;\r\n\r\n        this.isContactBarVisible = false;\r\n        this.contactBar.classList.add('hidden');\r\n        this.headerUnificado.classList.add('contact-hidden');\r\n        document.body.classList.add('contact-hidden');\r\n        \r\n        this.updateBodyMargin();\r\n        \r\n        console.log('📱 Contact bar oculto');\r\n    }\r\n\r\n    showContactBar() {\r\n        if (this.isContactBarVisible) return;\r\n\r\n        this.isContactBarVisible = true;\r\n        this.contactBar.classList.remove('hidden');\r\n        this.headerUnificado.classList.remove('contact-hidden');\r\n        document.body.classList.remove('contact-hidden');\r\n        \r\n        this.updateBodyMargin();\r\n        \r\n        console.log('📱 Contact bar mostrado');\r\n    }\r\n\r\n    // ==================\r\n    // MENÚ MÓVIL\r\n    // ==================\r\n    setupMobileMenu() {\r\n        if (!this.menuToggle) {\r\n            console.warn('Botón de menú móvil no encontrado');\r\n            return;\r\n        }\r\n\r\n        // Toggle del menú\r\n        this.menuToggle.addEventListener('click', (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            this.toggleMobileMenu();\r\n        });\r\n\r\n        // Cerrar con overlay\r\n        if (this.menuOverlay) {\r\n            this.menuOverlay.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this.closeMobileMenu();\r\n            });\r\n        }\r\n\r\n        // Cerrar al hacer clic en enlaces\r\n        if (this.navMenu) {\r\n            const menuLinks = this.navMenu.querySelectorAll('a');\r\n            menuLinks.forEach(link => {\r\n                link.addEventListener('click', () => {\r\n                    setTimeout(() => {\r\n                        this.closeMobileMenu();\r\n                    }, 100);\r\n                });\r\n            });\r\n        }\r\n\r\n        // Cerrar con Escape\r\n        document.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Escape' && this.isMobileMenuOpen) {\r\n                this.closeMobileMenu();\r\n            }\r\n        });\r\n\r\n        // Cerrar en cambio de orientación\r\n        window.addEventListener('orientationchange', () => {\r\n            setTimeout(() => {\r\n                if (this.isMobileMenuOpen) {\r\n                    this.closeMobileMenu();\r\n                }\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    toggleMobileMenu() {\r\n        if (window.innerWidth > 767) return;\r\n\r\n        if (this.isMobileMenuOpen) {\r\n            this.closeMobileMenu();\r\n        } else {\r\n            this.openMobileMenu();\r\n        }\r\n    }\r\n\r\n    openMobileMenu() {\r\n        if (window.innerWidth > 767 || this.isMobileMenuOpen) return;\r\n\r\n        this.isMobileMenuOpen = true;\r\n        \r\n        // Aplicar clases\r\n        this.menuToggle?.classList.add('activo');\r\n        this.navMenu?.classList.add('activo');\r\n        this.menuOverlay?.classList.add('activo');\r\n        \r\n        // Prevenir scroll\r\n        document.body.style.overflow = 'hidden';\r\n        \r\n        // Clase adicional al contenedor\r\n        const navContainer = document.querySelector('.nav-container');\r\n        if (navContainer) {\r\n            navContainer.classList.add('menu-open');\r\n        }\r\n        \r\n        console.log('📱 Menú móvil abierto');\r\n    }\r\n\r\n    closeMobileMenu() {\r\n        if (!this.isMobileMenuOpen) return;\r\n\r\n        this.isMobileMenuOpen = false;\r\n        \r\n        // Remover clases\r\n        this.menuToggle?.classList.remove('activo');\r\n        this.navMenu?.classList.remove('activo');\r\n        this.menuOverlay?.classList.remove('activo');\r\n        \r\n        // Restaurar scroll\r\n        document.body.style.overflow = '';\r\n        \r\n        // Remover clase del contenedor\r\n        const navContainer = document.querySelector('.nav-container');\r\n        if (navContainer) {\r\n            navContainer.classList.remove('menu-open');\r\n        }\r\n        \r\n        console.log('📱 Menú móvil cerrado');\r\n    }\r\n\r\n    // ==================\r\n    // RESPONSIVE HANDLING\r\n    // ==================\r\n    handleResize() {\r\n        window.addEventListener('resize', BombasAyalaUtils.debounce(() => {\r\n            this.calculateDimensions();\r\n            this.updateBodyMargin();\r\n            \r\n            // Cerrar menú móvil si se cambia a desktop\r\n            if (window.innerWidth > 767 && this.isMobileMenuOpen) {\r\n                this.closeMobileMenu();\r\n            }\r\n            \r\n            this.setInitialBodyMargin();\r\n        }, 250));\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    forceShowContactBar() {\r\n        this.showContactBar();\r\n    }\r\n\r\n    forceHideContactBar() {\r\n        this.hideContactBar();\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            contactBarVisible: this.isContactBarVisible,\r\n            mobileMenuOpen: this.isMobileMenuOpen,\r\n            scrollPosition: window.pageYOffset,\r\n            isMobile: window.innerWidth <= 767,\r\n            dimensions: {\r\n                contactBar: this.contactBarHeight,\r\n                nav: this.navHeight,\r\n                total: this.totalHeaderHeight\r\n            }\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        // Limpiar estilos\r\n        document.body.style.marginTop = '';\r\n        document.body.style.overflow = '';\r\n        document.body.classList.remove('contact-hidden');\r\n        \r\n        // Cerrar menú si está abierto\r\n        if (this.isMobileMenuOpen) {\r\n            this.closeMobileMenu();\r\n        }\r\n        \r\n        console.log('🗑️ Header Controller destruido');\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initHeader() {\r\n    window.headerController = new HeaderController();\r\n    \r\n    // API global simplificada\r\n    window.Header = {\r\n        show: () => window.headerController?.forceShowContactBar(),\r\n        hide: () => window.headerController?.forceHideContactBar(),\r\n        getState: () => window.headerController?.getState(),\r\n        closeMenu: () => window.headerController?.closeMobileMenu()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initHeader);\r\n} else {\r\n    initHeader();\r\n}\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = HeaderController;\r\n}","class InicioController {\r\n    constructor() {\r\n        // Elementos del hero\r\n        this.heroBackground = document.getElementById('heroBackground');\r\n        this.heroImage = document.getElementById('heroImage');\r\n        this.loadingIndicator = document.getElementById('loadingIndicator');\r\n        this.heroSection = document.getElementById('hero');\r\n        \r\n        // Arrays de imágenes\r\n        this.backgroundImages = [\r\n            'build/img/descargados/inicio/foto_1_1980.webp',\r\n            'build/img/descargados/inicio/foto_2_1980.webp',\r\n            'build/img/descargados/inicio/foto_3_1980.webp',\r\n            'build/img/descargados/inicio/foto_4_1980.webp'\r\n        ];\r\n        \r\n        this.mainImages = [\r\n            'build/img/descargados/inicio/foto_1_500.webp',\r\n            'build/img/descargados/inicio/foto_2_500.webp',\r\n            'build/img/descargados/inicio/foto_3_500.webp',\r\n            'build/img/descargados/inicio/foto_4_500.webp'\r\n        ];\r\n        \r\n        // Estado\r\n        this.currentImageIndex = 0;\r\n        this.intervalId = null;\r\n        this.isVisible = true;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.heroBackground || !this.heroImage) {\r\n            console.warn('Hero: Elementos principales no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.preloadImages();\r\n        this.initializeHero();\r\n        this.initScrollAnimations();\r\n        this.setupVisibilityControl();\r\n        \r\n        console.log('✅ Inicio Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // HERO DINÁMICO\r\n    // ==================\r\n    initializeHero() {\r\n        // Establecer primera imagen\r\n        this.setBackgroundImage(0);\r\n        this.setMainImage(0);\r\n        \r\n        // Ocultar indicador de carga\r\n        setTimeout(() => {\r\n            if (this.loadingIndicator) {\r\n                this.loadingIndicator.classList.add('hidden');\r\n            }\r\n        }, 1500);\r\n\r\n        // Iniciar rotación automática\r\n        this.startImageRotation();\r\n    }\r\n\r\n    setBackgroundImage(index) {\r\n        if (this.heroBackground) {\r\n            this.heroBackground.style.backgroundImage = `url('${this.backgroundImages[index]}')`;\r\n        }\r\n    }\r\n\r\n    setMainImage(index) {\r\n        if (this.heroImage) {\r\n            this.heroImage.src = this.mainImages[index];\r\n        }\r\n    }\r\n\r\n    changeToNextImage() {\r\n        this.currentImageIndex = (this.currentImageIndex + 1) % this.backgroundImages.length;\r\n        \r\n        this.setBackgroundImage(this.currentImageIndex);\r\n        this.setMainImage(this.currentImageIndex);\r\n        \r\n        console.log(`🖼️ Imagen cambiada a: ${this.currentImageIndex + 1}`);\r\n    }\r\n\r\n    startImageRotation() {\r\n        // Cambiar imágenes cada 5 segundos\r\n        this.intervalId = setInterval(() => {\r\n            if (this.isVisible) {\r\n                this.changeToNextImage();\r\n            }\r\n        }, 5000);\r\n    }\r\n\r\n    stopImageRotation() {\r\n        if (this.intervalId) {\r\n            clearInterval(this.intervalId);\r\n            this.intervalId = null;\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES SCROLL\r\n    // ==================\r\n    initScrollAnimations() {\r\n        // Animar elementos del hero\r\n        BombasAyalaUtils.animateOnScroll('.hero-content, .hero-image');\r\n        \r\n        // Animaciones adicionales para otros elementos\r\n        BombasAyalaUtils.animateOnScroll('.estadistica-item, .servicio-destacado, .testimonio-card');\r\n        \r\n        // Contadores animados\r\n        this.initCounters();\r\n    }\r\n\r\n    initCounters() {\r\n        const contadores = document.querySelectorAll('.numero-estadistica');\r\n        \r\n        if (contadores.length === 0) return;\r\n        \r\n        const observerContadores = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const elemento = entry.target;\r\n                    const objetivo = parseInt(elemento.getAttribute('data-numero'));\r\n                    \r\n                    if (objetivo) {\r\n                        BombasAyalaUtils.animateCounter(elemento, 0, objetivo, 2000);\r\n                        observerContadores.unobserve(elemento);\r\n                    }\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n        \r\n        contadores.forEach(contador => {\r\n            observerContadores.observe(contador);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // CONTROL DE VISIBILIDAD\r\n    // ==================\r\n    setupVisibilityControl() {\r\n        // Pausar animaciones cuando la página no está visible\r\n        document.addEventListener('visibilitychange', () => {\r\n            if (document.hidden) {\r\n                this.pauseAnimations();\r\n            } else {\r\n                this.resumeAnimations();\r\n            }\r\n        });\r\n\r\n        // Controlar animaciones según el scroll\r\n        let lastScrollTop = 0;\r\n        window.addEventListener('scroll', BombasAyalaUtils.debounce(() => {\r\n            const scrollTop = window.pageYOffset;\r\n            const heroRect = this.heroSection?.getBoundingClientRect();\r\n            \r\n            // Si el hero no está visible, pausar rotación\r\n            if (heroRect && (heroRect.bottom < 0 || heroRect.top > window.innerHeight)) {\r\n                this.isVisible = false;\r\n            } else {\r\n                this.isVisible = true;\r\n            }\r\n            \r\n            lastScrollTop = scrollTop;\r\n        }, 100), { passive: true });\r\n    }\r\n\r\n    pauseAnimations() {\r\n        this.isVisible = false;\r\n        if (this.heroSection) {\r\n            this.heroSection.style.animationPlayState = 'paused';\r\n        }\r\n        console.log('⏸️ Animaciones pausadas');\r\n    }\r\n\r\n    resumeAnimations() {\r\n        this.isVisible = true;\r\n        if (this.heroSection) {\r\n            this.heroSection.style.animationPlayState = 'running';\r\n        }\r\n        console.log('▶️ Animaciones reanudadas');\r\n    }\r\n\r\n    // ==================\r\n    // PRELOAD DE IMÁGENES\r\n    // ==================\r\n    preloadImages() {\r\n        const allImages = [...this.backgroundImages, ...this.mainImages];\r\n        BombasAyalaUtils.preloadImages(allImages);\r\n        \r\n        console.log(`🖼️ Precargando ${allImages.length} imágenes del hero`);\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    nextImage() {\r\n        this.changeToNextImage();\r\n    }\r\n\r\n    previousImage() {\r\n        this.currentImageIndex = this.currentImageIndex - 1;\r\n        if (this.currentImageIndex < 0) {\r\n            this.currentImageIndex = this.backgroundImages.length - 1;\r\n        }\r\n        \r\n        this.setBackgroundImage(this.currentImageIndex);\r\n        this.setMainImage(this.currentImageIndex);\r\n    }\r\n\r\n    goToImage(index) {\r\n        if (index >= 0 && index < this.backgroundImages.length) {\r\n            this.currentImageIndex = index;\r\n            this.setBackgroundImage(this.currentImageIndex);\r\n            this.setMainImage(this.currentImageIndex);\r\n        }\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            currentImage: this.currentImageIndex,\r\n            totalImages: this.backgroundImages.length,\r\n            isVisible: this.isVisible,\r\n            isRotating: this.intervalId !== null\r\n        };\r\n    }\r\n\r\n    destroy() {\r\n        this.stopImageRotation();\r\n        console.log('🗑️ Inicio Controller destruido');\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction changeBackgroundImage() {\r\n    if (window.inicioController) {\r\n        window.inicioController.nextImage();\r\n    }\r\n}\r\n\r\nfunction initializeHero() {\r\n    // Esta función se mantiene para compatibilidad\r\n    console.log('🔄 initializeHero legacy llamada');\r\n}\r\n\r\nfunction initializeSmoothScroll() {\r\n    // Ya manejado por utils.js\r\n    console.log('🔄 initializeSmoothScroll legacy llamada');\r\n}\r\n\r\nfunction initializeScrollAnimations() {\r\n    // Ya manejado por el controller principal\r\n    console.log('🔄 initializeScrollAnimations legacy llamada');\r\n}\r\n\r\nfunction preloadImages() {\r\n    // Ya manejado por el controller principal\r\n    console.log('🔄 preloadImages legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initInicio() {\r\n    // Solo inicializar en página de inicio\r\n    if (document.querySelector('#heroBackground, .hero-section')) {\r\n        window.inicioController = new InicioController();\r\n        \r\n        // API global\r\n        window.Hero = {\r\n            next: () => window.inicioController?.nextImage(),\r\n            previous: () => window.inicioController?.previousImage(),\r\n            goTo: (index) => window.inicioController?.goToImage(index),\r\n            getState: () => window.inicioController?.getState(),\r\n            pause: () => window.inicioController?.pauseAnimations(),\r\n            resume: () => window.inicioController?.resumeAnimations()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initInicio();\r\n    \r\n    // Llamar funciones legacy para compatibilidad\r\n    preloadImages();\r\n    initializeHero();\r\n    initializeSmoothScroll();\r\n    initializeScrollAnimations();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = InicioController;\r\n}","class FlotantesController {\r\n    constructor() {\r\n        this.flotantesContainer = document.querySelector('.flotantes');\r\n        this.flotantes = document.querySelectorAll('.flotante');\r\n        \r\n        // Estado\r\n        this.isVisible = true;\r\n        this.lastScrollTop = 0;\r\n        this.hideThreshold = 200;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (!this.flotantesContainer || this.flotantes.length === 0) {\r\n            console.warn('Flotantes: Elementos no encontrados');\r\n            return;\r\n        }\r\n\r\n        this.setupScrollBehavior();\r\n        this.setupClickEffects();\r\n        this.setupTooltips();\r\n        this.setupWhatsAppIntegration();\r\n        this.adjustForMobile();\r\n        \r\n        console.log('✅ Flotantes Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // COMPORTAMIENTO SCROLL\r\n    // ==================\r\n    setupScrollBehavior() {\r\n        window.addEventListener('scroll', BombasAyalaUtils.debounce(() => {\r\n            const currentScroll = window.pageYOffset;\r\n            const scrollDirection = currentScroll > this.lastScrollTop ? 'down' : 'up';\r\n            \r\n            // Mostrar/ocultar según scroll\r\n            if (currentScroll > this.hideThreshold) {\r\n                if (scrollDirection === 'down') {\r\n                    this.hide();\r\n                } else if (scrollDirection === 'up') {\r\n                    this.show();\r\n                }\r\n            } else {\r\n                this.show();\r\n            }\r\n            \r\n            this.lastScrollTop = currentScroll;\r\n        }, 100), { passive: true });\r\n    }\r\n\r\n    // ==================\r\n    // EFECTOS DE CLICK\r\n    // ==================\r\n    setupClickEffects() {\r\n        this.flotantes.forEach((flotante) => {\r\n            flotante.addEventListener('click', (e) => {\r\n                this.addClickEffect(flotante);\r\n                this.trackClick(flotante);\r\n            });\r\n        });\r\n    }\r\n\r\n    addClickEffect(flotante) {\r\n        // Efecto visual de click\r\n        flotante.style.transform = 'scale(0.9)';\r\n        \r\n        setTimeout(() => {\r\n            flotante.style.transform = '';\r\n        }, 150);\r\n        \r\n        // Vibración en móviles\r\n        if ('vibrate' in navigator) {\r\n            navigator.vibrate(50);\r\n        }\r\n    }\r\n\r\n    trackClick(flotante) {\r\n        let tipo = 'unknown';\r\n        \r\n        if (flotante.classList.contains('whatsapp')) {\r\n            tipo = 'WhatsApp';\r\n        } else if (flotante.classList.contains('llamada') || flotante.classList.contains('phone')) {\r\n            tipo = 'Llamada';\r\n        } else if (flotante.classList.contains('instagram')) {\r\n            tipo = 'Instagram';\r\n        }\r\n        \r\n        console.log(`📱 Click en flotante: ${tipo}`);\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('flotante_click', 'contact', tipo);\r\n    }\r\n\r\n    // ==================\r\n    // TOOLTIPS\r\n    // ==================\r\n    setupTooltips() {\r\n        const tooltips = [\r\n            'Chatea por WhatsApp',\r\n            'Llámanos ahora',\r\n            'Síguenos en Instagram'\r\n        ];\r\n        \r\n        this.flotantes.forEach((flotante, index) => {\r\n            if (index < tooltips.length) {\r\n                flotante.setAttribute('data-tooltip', tooltips[index]);\r\n                flotante.setAttribute('aria-label', tooltips[index]);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // INTEGRACIÓN WHATSAPP\r\n    // ==================\r\n    setupWhatsAppIntegration() {\r\n        const whatsappBtn = document.querySelector('.flotante.whatsapp');\r\n        \r\n        if (whatsappBtn) {\r\n            whatsappBtn.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                \r\n                const mensaje = this.createDefaultWhatsAppMessage();\r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                console.log('📱 WhatsApp abierto desde flotante');\r\n            });\r\n        }\r\n\r\n        // Otros botones de WhatsApp en la página\r\n        this.setupOtherWhatsAppButtons();\r\n    }\r\n\r\n    setupOtherWhatsAppButtons() {\r\n        const whatsappButtons = document.querySelectorAll('[data-whatsapp], .boton-whatsapp');\r\n        \r\n        whatsappButtons.forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                \r\n                const customMessage = button.getAttribute('data-message');\r\n                const producto = button.getAttribute('data-producto');\r\n                const specs = button.getAttribute('data-especificaciones');\r\n                \r\n                let mensaje;\r\n                \r\n                if (customMessage) {\r\n                    mensaje = customMessage;\r\n                } else if (producto) {\r\n                    mensaje = this.createProductWhatsAppMessage(producto, specs);\r\n                } else {\r\n                    mensaje = this.createDefaultWhatsAppMessage();\r\n                }\r\n                \r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                console.log('📱 WhatsApp abierto:', { producto, specs });\r\n            });\r\n        });\r\n    }\r\n\r\n    createDefaultWhatsAppMessage() {\r\n        return '¡Hola! Me interesa conocer más sobre sus servicios de bombas de agua. 💧\\n\\n¿Podrían brindarme información sobre sus productos y servicios?';\r\n    }\r\n\r\n    createProductWhatsAppMessage(producto, specs = '') {\r\n        let mensaje = `¡Hola! Me interesa el siguiente producto:\\n\\n`;\r\n        mensaje += `🔧 **Producto:** ${producto}\\n`;\r\n        \r\n        if (specs) {\r\n            mensaje += `📋 **Especificaciones:** ${specs}\\n`;\r\n        }\r\n        \r\n        mensaje += `\\n¿Podrían enviarme más información y cotización?\\n\\n¡Gracias!`;\r\n        \r\n        return mensaje;\r\n    }\r\n\r\n    // ==================\r\n    // CONTROL DE VISIBILIDAD\r\n    // ==================\r\n    show() {\r\n        if (this.isVisible) return;\r\n        \r\n        this.flotantesContainer.style.opacity = '1';\r\n        this.flotantesContainer.style.visibility = 'visible';\r\n        this.flotantesContainer.style.transform = this.getTransformForDevice();\r\n        \r\n        this.isVisible = true;\r\n    }\r\n\r\n    hide() {\r\n        if (!this.isVisible) return;\r\n        \r\n        this.flotantesContainer.style.opacity = '0';\r\n        this.flotantesContainer.style.visibility = 'hidden';\r\n        this.flotantesContainer.style.transform = this.getHiddenTransformForDevice();\r\n        \r\n        this.isVisible = false;\r\n    }\r\n\r\n    getTransformForDevice() {\r\n        return BombasAyalaUtils.isMobile() \r\n            ? 'translateY(0) translateX(0)' \r\n            : 'translateY(-50%) translateX(0)';\r\n    }\r\n\r\n    getHiddenTransformForDevice() {\r\n        return BombasAyalaUtils.isMobile() \r\n            ? 'translateY(0) translateX(100px)' \r\n            : 'translateY(-50%) translateX(100px)';\r\n    }\r\n\r\n    // ==================\r\n    // RESPONSIVE HANDLING\r\n    // ==================\r\n    adjustForMobile() {\r\n        if (BombasAyalaUtils.isMobile()) {\r\n            this.flotantesContainer.style.cssText += `\r\n                position: fixed;\r\n                bottom: 20px;\r\n                right: 20px;\r\n                top: auto;\r\n                transform: none;\r\n                flex-direction: row;\r\n                gap: 10px;\r\n            `;\r\n        }\r\n        \r\n        // Escuchar cambios de tamaño\r\n        window.addEventListener('resize', BombasAyalaUtils.debounce(() => {\r\n            this.adjustForMobile();\r\n        }, 250));\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    forceShow() {\r\n        this.show();\r\n    }\r\n\r\n    forceHide() {\r\n        this.hide();\r\n    }\r\n\r\n    toggle() {\r\n        if (this.isVisible) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    getState() {\r\n        return {\r\n            isVisible: this.isVisible,\r\n            isMobile: BombasAyalaUtils.isMobile(),\r\n            totalFlotantes: this.flotantes.length\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES ADICIONALES\r\n// ==================\r\n\r\n// Inicializar cotizaciones via WhatsApp\r\nfunction inicializarCotizaciones() {\r\n    const botonesCotizar = document.querySelectorAll('.boton-cotizar, .boton-producto-cotizar');\r\n    \r\n    botonesCotizar.forEach(boton => {\r\n        boton.addEventListener('click', function() {\r\n            const producto = this.dataset.producto || 'Producto no especificado';\r\n            const specs = this.dataset.especificaciones || '';\r\n            const telefono = this.dataset.whatsapp || '51997984102';\r\n            \r\n            const datos = {\r\n                producto: producto,\r\n                descripcion: specs\r\n            };\r\n            \r\n            const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n            BombasAyalaUtils.openWhatsApp(mensaje, telefono);\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('cotizacion_click', 'productos', producto);\r\n        });\r\n    });\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initFlotantes() {\r\n    window.flotantesController = new FlotantesController();\r\n    \r\n    // Inicializar cotizaciones\r\n    inicializarCotizaciones();\r\n    \r\n    // API global\r\n    window.Flotantes = {\r\n        show: () => window.flotantesController?.forceShow(),\r\n        hide: () => window.flotantesController?.forceHide(),\r\n        toggle: () => window.flotantesController?.toggle(),\r\n        getState: () => window.flotantesController?.getState()\r\n    };\r\n    \r\n    // API WhatsApp global\r\n    window.WhatsApp = {\r\n        open: (mensaje, telefono) => BombasAyalaUtils.openWhatsApp(mensaje, telefono),\r\n        quote: (datos) => {\r\n            const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n        }\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', initFlotantes);\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = FlotantesController;\r\n}","class NosotrosController {\r\n    constructor() {\r\n        // Elementos principales\r\n        this.contadores = document.querySelectorAll('.numero-estadistica');\r\n        this.overlayVideo = document.querySelector('.overlay-imagen');\r\n        this.iconoPlay = document.querySelector('.icono-play');\r\n        this.listaDistritos = document.querySelector('.lista-distritos');\r\n        \r\n        // Datos de Lima Metropolitana (4 zonas)\r\n        this.zonas = {\r\n            norte: {\r\n                distritos: [\r\n                    'Ancón', 'Carabayllo', 'Comas', 'Independencia', \r\n                    'Los Olivos', 'Puente Piedra', 'San Martín de Porres', 'Santa Rosa'\r\n                ],\r\n                color: 'var(--cian-principal)',\r\n                descripcion: 'Lima Norte - 8 distritos'\r\n            },\r\n            sur: {\r\n                distritos: [\r\n                    'Chorrillos', 'Lurín', 'Pachacámac', 'Pucusana', \r\n                    'San Juan de Miraflores', 'Villa El Salvador', 'Villa María del Triunfo'\r\n                ],\r\n                color: 'var(--verde-esmeralda)',\r\n                descripcion: 'Lima Sur - 7 distritos'\r\n            },\r\n            este: {\r\n                distritos: [\r\n                    'Ate', 'Chaclacayo', 'Cieneguilla', 'El Agustino', \r\n                    'La Molina', 'Lurigancho-Chosica', 'San Juan de Lurigancho', 'Santa Anita'\r\n                ],\r\n                color: 'var(--naranja-tecnico)',\r\n                descripcion: 'Lima Este - 8 distritos'\r\n            },\r\n            oeste: {\r\n                distritos: [\r\n                    'Barranco', 'Breña', 'Callao', 'Jesús María', 'La Victoria', \r\n                    'Lima Cercado', 'Lince', 'Magdalena del Mar', 'Miraflores', \r\n                    'Pueblo Libre', 'Rímac', 'San Borja', 'San Isidro', 'San Luis', \r\n                    'San Miguel', 'Santiago de Surco', 'Surquillo'\r\n                ],\r\n                color: 'var(--azul-claro)',\r\n                descripcion: 'Lima Oeste - 17 distritos'\r\n            }\r\n        };\r\n\r\n        // Estadísticas de la empresa\r\n        this.estadisticas = {\r\n            experiencia: 25,\r\n            clientes: 5000,\r\n            servicios: 15000,\r\n            atencion: 24\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initContadoresAnimados();\r\n        this.initMapaInteractivo();\r\n        this.initVideoOverlay();\r\n        this.initAnimaciones();\r\n        this.initInformacionInicial();\r\n        this.initBotonesCTA();\r\n        \r\n        console.log('✅ Nosotros Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    initContadoresAnimados() {\r\n        if (this.contadores.length === 0) return;\r\n\r\n        const observerContadores = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const elemento = entry.target;\r\n                    const objetivo = parseInt(elemento.getAttribute('data-numero'));\r\n                    \r\n                    if (objetivo) {\r\n                        BombasAyalaUtils.animateCounter(elemento, 0, objetivo, 2000);\r\n                        observerContadores.unobserve(elemento);\r\n                        \r\n                        console.log(`📊 Contador animado: ${objetivo}`);\r\n                    }\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n\r\n        this.contadores.forEach(contador => {\r\n            observerContadores.observe(contador);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // MAPA INTERACTIVO DE LIMA (4 ZONAS)\r\n    // ==================\r\n    initMapaInteractivo() {\r\n        const zonasElementos = document.querySelectorAll('.zona-norte, .zona-sur, .zona-este, .zona-oeste');\r\n        \r\n        if (zonasElementos.length === 0) return;\r\n\r\n        zonasElementos.forEach(zona => {\r\n            zona.addEventListener('mouseenter', () => {\r\n                const tipoZona = this.getTipoZona(zona);\r\n                this.mostrarDistritos(tipoZona);\r\n            });\r\n            \r\n            // Efectos hover\r\n            zona.addEventListener('mouseover', () => {\r\n                zona.style.transform = 'scale(1.05)';\r\n                zona.style.zIndex = '10';\r\n                zona.style.transition = 'all 0.3s ease';\r\n            });\r\n            \r\n            zona.addEventListener('mouseout', () => {\r\n                zona.style.transform = 'scale(1)';\r\n                zona.style.zIndex = '1';\r\n            });\r\n\r\n            // Click para más información\r\n            zona.addEventListener('click', () => {\r\n                const tipoZona = this.getTipoZona(zona);\r\n                this.mostrarInformacionZona(tipoZona);\r\n            });\r\n        });\r\n    }\r\n\r\n    getTipoZona(elemento) {\r\n        if (elemento.classList.contains('zona-norte')) return 'norte';\r\n        if (elemento.classList.contains('zona-sur')) return 'sur';\r\n        if (elemento.classList.contains('zona-este')) return 'este';\r\n        return 'oeste';\r\n    }\r\n\r\n    mostrarDistritos(tipoZona) {\r\n        if (!this.listaDistritos) return;\r\n\r\n        const zona = this.zonas[tipoZona];\r\n        if (!zona) return;\r\n\r\n        this.listaDistritos.innerHTML = `\r\n            <div class=\"zona-titulo\" style=\"color: ${zona.color}; font-weight: 700;\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                    <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                </svg>\r\n                ${zona.descripcion}\r\n            </div>\r\n            <div class=\"distritos-grid\">\r\n                ${zona.distritos.map(distrito => `\r\n                    <div class=\"distrito-item\" style=\"color: ${zona.color}; font-weight: 600;\">\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                            <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                            <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                        </svg>\r\n                        ${distrito}\r\n                    </div>\r\n                `).join('')}\r\n            </div>\r\n        `;\r\n\r\n        // Animar entrada de distritos\r\n        const items = this.listaDistritos.querySelectorAll('.distrito-item');\r\n        items.forEach((item, index) => {\r\n            item.style.opacity = '0';\r\n            item.style.transform = 'translateX(-20px)';\r\n            \r\n            setTimeout(() => {\r\n                item.style.transition = 'all 0.3s ease';\r\n                item.style.opacity = '1';\r\n                item.style.transform = 'translateX(0)';\r\n            }, index * 50);\r\n        });\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('mapa_hover', 'nosotros', tipoZona);\r\n    }\r\n\r\n    mostrarInformacionZona(tipoZona) {\r\n        const zona = this.zonas[tipoZona];\r\n        if (!zona) return;\r\n\r\n        const mensaje = `📍 **${zona.descripcion}**\\n\\n` +\r\n                       `🏘️ **Distritos atendidos:** ${zona.distritos.length}\\n\\n` +\r\n                       `📋 **Lista completa:**\\n${zona.distritos.join(', ')}\\n\\n` +\r\n                       `💧 **Servicios disponibles:**\\n` +\r\n                       `• Instalación de bombas\\n` +\r\n                       `• Mantenimiento preventivo\\n` +\r\n                       `• Reparaciones de emergencia\\n` +\r\n                       `• Asesoría técnica\\n\\n` +\r\n                       `📞 **¿Necesitas servicio en esta zona?**`;\r\n\r\n        BombasAyalaUtils.openWhatsApp(mensaje);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('zona_click', 'nosotros', tipoZona);\r\n    }\r\n\r\n    // ==================\r\n    // VIDEO OVERLAY\r\n    // ==================\r\n    initVideoOverlay() {\r\n        if (!this.overlayVideo || !this.iconoPlay) return;\r\n\r\n        this.overlayVideo.addEventListener('click', () => {\r\n            // Efecto en el icono\r\n            this.iconoPlay.style.transform = 'scale(1.2)';\r\n            setTimeout(() => {\r\n                this.iconoPlay.style.transform = 'scale(1)';\r\n            }, 200);\r\n\r\n            // Aquí puedes integrar con tu reproductor de video preferido\r\n            this.mostrarModalVideo();\r\n\r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('video_play', 'nosotros', 'video_empresarial');\r\n        });\r\n    }\r\n\r\n    mostrarModalVideo() {\r\n        // Placeholder para modal de video\r\n        const modal = document.createElement('div');\r\n        modal.style.cssText = `\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100vw;\r\n            height: 100vh;\r\n            background: rgba(0,0,0,0.9);\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            z-index: 9999;\r\n        `;\r\n\r\n        modal.innerHTML = `\r\n            <div style=\"text-align: center; color: white; max-width: 500px; padding: 20px;\">\r\n                <h3>🎥 Video de Presentación</h3>\r\n                <p>Aquí se mostraría el video institucional de Bombas Ayala</p>\r\n                <br>\r\n                <button onclick=\"this.closest('div').parentNode.remove()\" \r\n                        style=\"background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;\">\r\n                    Cerrar\r\n                </button>\r\n            </div>\r\n        `;\r\n\r\n        document.body.appendChild(modal);\r\n\r\n        // Cerrar con click fuera del contenido\r\n        modal.addEventListener('click', (e) => {\r\n            if (e.target === modal) {\r\n                document.body.removeChild(modal);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES SCROLL\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar elementos principales\r\n        BombasAyalaUtils.animateOnScroll('.estadistica-item, .mision-section, .vision-section, .valor-item');\r\n\r\n        // Observador específico para elementos de nosotros\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                    entry.target.style.transition = 'all 0.6s ease-out';\r\n                    observer.unobserve(entry.target);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Configurar elementos para animación\r\n        const elementosAnimados = document.querySelectorAll('.estadistica-item, .mision-section, .vision-section, .valor-item');\r\n        \r\n        elementosAnimados.forEach(elemento => {\r\n            elemento.style.opacity = '0';\r\n            elemento.style.transform = 'translateY(30px)';\r\n            observer.observe(elemento);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // INFORMACIÓN INICIAL\r\n    // ==================\r\n    initInformacionInicial() {\r\n        if (!this.listaDistritos || this.listaDistritos.innerHTML.trim() !== '') return;\r\n\r\n        const datosLima = this.getDatosLima();\r\n\r\n        this.listaDistritos.innerHTML = `\r\n            <div class=\"zona-titulo\" style=\"color: var(--azul-corporativo); font-weight: 700;\">\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                    <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                    <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                </svg>\r\n                Cobertura en Lima Metropolitana (4 Zonas)\r\n            </div>\r\n            <div class=\"distritos-grid\">\r\n                <div class=\"distrito-item\" style=\"color: var(--gris-medio);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                        <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"/>\r\n                        <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"/>\r\n                    </svg>\r\n                    Pasa el cursor sobre una zona para ver los distritos\r\n                </div>\r\n                <div class=\"distrito-item\" style=\"color: var(--azul-corporativo);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"10\" r=\"3\"/>\r\n                        <path d=\"M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z\"/>\r\n                    </svg>\r\n                    ${datosLima.totalDistritos} distritos en 4 zonas\r\n                </div>\r\n                <div class=\"distrito-item\" style=\"color: var(--verde-esmeralda);\">\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n                        <circle cx=\"12\" cy=\"12\" r=\"10\"/>\r\n                        <polyline points=\"12,6 12,12 16,14\"/>\r\n                    </svg>\r\n                    Tiempo respuesta: ${datosLima.tiempoRespuestaPromedio}\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES CTA\r\n    // ==================\r\n    initBotonesCTA() {\r\n        const botonesCTA = document.querySelectorAll('.boton-cta');\r\n        \r\n        botonesCTA.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const accion = boton.textContent.trim();\r\n                const tipo = boton.classList.contains('primario') ? 'primario' : 'secundario';\r\n                \r\n                // Tracking específico\r\n                BombasAyalaUtils.trackEvent('cta_click', 'nosotros', accion, tipo);\r\n                \r\n                console.log(`🎯 CTA clicked: ${accion} (${tipo})`);\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // FUNCIONES DE UTILIDAD\r\n    // ==================\r\n    getDatosLima() {\r\n        const totalDistritos = Object.values(this.zonas).reduce((total, zona) => {\r\n            return total + zona.distritos.length;\r\n        }, 0);\r\n\r\n        return {\r\n            totalDistritos,\r\n            poblacionAproximada: '10.5 millones',\r\n            areaCobertura: '100%',\r\n            tiempoRespuestaPromedio: '20 minutos',\r\n            zonasCobertura: 4\r\n        };\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    mostrarZona(tipoZona) {\r\n        this.mostrarDistritos(tipoZona);\r\n    }\r\n\r\n    actualizarEstadisticas(nuevasEstadisticas) {\r\n        Object.keys(nuevasEstadisticas).forEach(key => {\r\n            if (this.estadisticas[key] !== undefined) {\r\n                this.estadisticas[key] = nuevasEstadisticas[key];\r\n                \r\n                // Actualizar el elemento en el DOM si existe\r\n                const elemento = document.querySelector(`[data-numero=\"${this.estadisticas[key]}\"]`);\r\n                if (elemento) {\r\n                    elemento.setAttribute('data-numero', nuevasEstadisticas[key]);\r\n                }\r\n            }\r\n        });\r\n        \r\n        console.log('📊 Estadísticas actualizadas:', nuevasEstadisticas);\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            ...this.estadisticas,\r\n            datosLima: this.getDatosLima(),\r\n            zonas: Object.keys(this.zonas)\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction mostrarDistritos(tipoZona) {\r\n    if (window.nosotrosController) {\r\n        window.nosotrosController.mostrarZona(tipoZona);\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initNosotros() {\r\n    // Solo inicializar en página de nosotros\r\n    if (document.querySelector('.numero-estadistica, .zona-norte, .mision-section')) {\r\n        window.nosotrosController = new NosotrosController();\r\n        \r\n        // API global\r\n        window.Nosotros = {\r\n            mostrarZona: (zona) => window.nosotrosController?.mostrarZona(zona),\r\n            actualizarStats: (stats) => window.nosotrosController?.actualizarEstadisticas(stats),\r\n            getStats: () => window.nosotrosController?.getStats()\r\n        };\r\n\r\n        // Mantener compatibilidad con función legacy\r\n        window.BombasAyala = {\r\n            mostrarDistritos: mostrarDistritos,\r\n            actualizarEstadisticas: (stats) => window.nosotrosController?.actualizarEstadisticas(stats),\r\n            datosLima: window.nosotrosController?.getDatosLima(),\r\n            zonas: window.nosotrosController?.zonas\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initNosotros();\r\n    \r\n    // Prevenir flicker y mostrar contenido\r\n    document.body.style.opacity = '1';\r\n    \r\n    console.log('🚰 Bombas Ayala - Página Nosotros iniciada');\r\n    console.log('📍 Zonas cubiertas: Norte, Sur, Este, Oeste (4 zonas)');\r\n    console.log('⏱️ Scripts cargados correctamente');\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = NosotrosController;\r\n}","class ProductosController {\r\n    constructor() {\r\n        this.filtros = document.querySelectorAll('.filtro-btn');\r\n        this.productos = document.querySelectorAll('.producto-card');\r\n        this.btnVerMas = document.getElementById('btnVerMasProductos');\r\n        \r\n        // Estado\r\n        this.filtroActual = 'todos';\r\n        this.mostrandoTodos = false;\r\n        this.productosPorPagina = 4;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        if (this.productos.length === 0) {\r\n            console.warn('Productos: No se encontraron productos');\r\n            return;\r\n        }\r\n\r\n        this.setupFilters();\r\n        this.setupVerMasButton();\r\n        this.setupAnimations();\r\n        this.setupHoverEffects();\r\n        this.setupCotizaciones();\r\n        \r\n        console.log('✅ Productos Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA DE FILTROS\r\n    // ==================\r\n    setupFilters() {\r\n        if (this.filtros.length === 0) return;\r\n\r\n        this.filtros.forEach(filtro => {\r\n            filtro.addEventListener('click', () => {\r\n                this.cambiarFiltro(filtro);\r\n            });\r\n        });\r\n\r\n        // Mostrar estado inicial\r\n        this.actualizarBotonVerMas();\r\n    }\r\n\r\n    cambiarFiltro(filtroClickeado) {\r\n        // Actualizar filtro activo\r\n        this.filtros.forEach(f => f.classList.remove('activo'));\r\n        filtroClickeado.classList.add('activo');\r\n        \r\n        const categoria = filtroClickeado.dataset.filtro;\r\n        this.filtroActual = categoria;\r\n        \r\n        // Resetear estado de \"Ver más\"\r\n        this.mostrandoTodos = false;\r\n        \r\n        // Aplicar filtro\r\n        this.aplicarFiltro(categoria);\r\n        \r\n        // Actualizar botón \"Ver más\"\r\n        this.actualizarBotonVerMas();\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('filter_change', 'productos', categoria);\r\n        \r\n        console.log(`🔍 Filtro aplicado: ${categoria}`);\r\n    }\r\n\r\n    aplicarFiltro(categoria) {\r\n        this.productos.forEach(producto => {\r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = categoria === 'todos' || categoriaProducto === categoria;\r\n            const esOculto = producto.classList.contains('producto-oculto');\r\n            \r\n            if (esVisible) {\r\n                // Mostrar si debe ser visible y no está marcado como oculto para \"Ver más\"\r\n                if (!esOculto || this.mostrandoTodos) {\r\n                    this.mostrarProducto(producto);\r\n                } else {\r\n                    this.ocultarProducto(producto);\r\n                }\r\n            } else {\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n    }\r\n\r\n    mostrarProducto(producto) {\r\n        producto.style.display = 'block';\r\n        producto.style.animation = 'fadeInUp 0.5s ease forwards';\r\n    }\r\n\r\n    ocultarProducto(producto) {\r\n        producto.style.display = 'none';\r\n    }\r\n\r\n    // ==================\r\n    // BOTÓN \"VER MÁS\"\r\n    // ==================\r\n    setupVerMasButton() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        this.btnVerMas.addEventListener('click', () => {\r\n            this.toggleVerMas();\r\n        });\r\n    }\r\n\r\n    toggleVerMas() {\r\n        if (!this.mostrandoTodos) {\r\n            this.mostrarMasProductos();\r\n        } else {\r\n            this.mostrarMenosProductos();\r\n        }\r\n    }\r\n\r\n    mostrarMasProductos() {\r\n        this.btnVerMas.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Cargando...';\r\n        \r\n        setTimeout(() => {\r\n            const productosOcultos = this.getProductosOcultos();\r\n            const productosAMostrar = productosOcultos.slice(0, this.productosPorPagina);\r\n            \r\n            productosAMostrar.forEach(producto => {\r\n                this.mostrarProducto(producto);\r\n                producto.classList.remove('producto-oculto');\r\n            });\r\n            \r\n            this.mostrandoTodos = productosOcultos.length <= this.productosPorPagina;\r\n            this.actualizarBotonVerMas();\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('ver_mas_click', 'productos', 'mostrar_mas');\r\n            \r\n        }, 1000);\r\n    }\r\n\r\n    mostrarMenosProductos() {\r\n        // Volver a ocultar productos extras\r\n        this.productos.forEach(producto => {\r\n            if (producto.classList.contains('producto-inicial')) {\r\n                // Mantener productos iniciales\r\n                return;\r\n            }\r\n            \r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProducto === this.filtroActual;\r\n            \r\n            if (esVisible) {\r\n                producto.classList.add('producto-oculto');\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n        \r\n        this.mostrandoTodos = false;\r\n        this.actualizarBotonVerMas();\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('ver_mas_click', 'productos', 'mostrar_menos');\r\n    }\r\n\r\n    getProductosOcultos() {\r\n        return Array.from(this.productos).filter(producto => {\r\n            const categoriaProducto = producto.getAttribute('data-categoria');\r\n            const esVisible = this.filtroActual === 'todos' || categoriaProducto === this.filtroActual;\r\n            const esOculto = producto.classList.contains('producto-oculto');\r\n            \r\n            return esVisible && esOculto;\r\n        });\r\n    }\r\n\r\n    actualizarBotonVerMas() {\r\n        if (!this.btnVerMas) return;\r\n\r\n        const productosOcultos = this.getProductosOcultos();\r\n        \r\n        if (productosOcultos.length > 0 && !this.mostrandoTodos) {\r\n            this.btnVerMas.style.display = 'inline-block';\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-plus-circle\"></i> Ver Más Productos';\r\n        } else if (this.mostrandoTodos) {\r\n            this.btnVerMas.innerHTML = '<i class=\"fas fa-minus-circle\"></i> Ver Menos';\r\n            this.btnVerMas.style.display = 'inline-block';\r\n        } else {\r\n            this.btnVerMas.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    setupAnimations() {\r\n        // Animar productos al aparecer en viewport\r\n        BombasAyalaUtils.animateOnScroll('.producto-card, .producto-destacado');\r\n        \r\n        // Observador específico para productos\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.animation = 'fadeInUp 0.6s ease forwards';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.productos.forEach(producto => observer.observe(producto));\r\n    }\r\n\r\n    // ==================\r\n    // EFECTOS HOVER\r\n    // ==================\r\n    setupHoverEffects() {\r\n        this.productos.forEach(card => {\r\n            card.addEventListener('mouseenter', () => {\r\n                card.style.transform = 'translateY(-10px) scale(1.02)';\r\n            });\r\n            \r\n            card.addEventListener('mouseleave', () => {\r\n                card.style.transform = 'translateY(0) scale(1)';\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // COTIZACIONES\r\n    // ==================\r\n    setupCotizaciones() {\r\n        const botonesCotizar = document.querySelectorAll('.boton-cotizar, .boton-producto-cotizar');\r\n        \r\n        botonesCotizar.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const producto = boton.dataset.producto || 'Producto no especificado';\r\n                const specs = boton.dataset.especificaciones || '';\r\n                \r\n                const datos = {\r\n                    producto: producto,\r\n                    descripcion: specs\r\n                };\r\n                \r\n                const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n                BombasAyalaUtils.openWhatsApp(mensaje);\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('cotizacion_producto', 'productos', producto);\r\n                \r\n                console.log('💬 Cotización solicitada:', datos);\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    filtrarPor(categoria) {\r\n        const filtro = document.querySelector(`[data-filtro=\"${categoria}\"]`);\r\n        if (filtro) {\r\n            this.cambiarFiltro(filtro);\r\n        }\r\n    }\r\n\r\n    buscarProducto(termino) {\r\n        termino = termino.toLowerCase();\r\n        \r\n        this.productos.forEach(producto => {\r\n            const titulo = producto.querySelector('.producto-titulo')?.textContent.toLowerCase() || '';\r\n            const descripcion = producto.querySelector('.producto-descripcion')?.textContent.toLowerCase() || '';\r\n            \r\n            const coincide = titulo.includes(termino) || descripcion.includes(termino);\r\n            \r\n            if (coincide) {\r\n                this.mostrarProducto(producto);\r\n            } else {\r\n                this.ocultarProducto(producto);\r\n            }\r\n        });\r\n        \r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('producto_search', 'productos', termino);\r\n    }\r\n\r\n    resetearFiltros() {\r\n        this.filtrarPor('todos');\r\n        this.mostrandoTodos = false;\r\n        this.actualizarBotonVerMas();\r\n    }\r\n\r\n    getStats() {\r\n        const totalProductos = this.productos.length;\r\n        const productosVisibles = Array.from(this.productos).filter(p => p.style.display !== 'none').length;\r\n        const productosOcultos = this.getProductosOcultos().length;\r\n        \r\n        return {\r\n            total: totalProductos,\r\n            visibles: productosVisibles,\r\n            ocultos: productosOcultos,\r\n            filtroActual: this.filtroActual,\r\n            mostrandoTodos: this.mostrandoTodos\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction animarElementos() {\r\n    console.log('🔄 animarElementos legacy llamada');\r\n}\r\n\r\nfunction efectosHover() {\r\n    console.log('🔄 efectosHover legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initProductos() {\r\n    // Solo inicializar en página de productos\r\n    if (document.querySelector('.producto-card, .productos-grid')) {\r\n        window.productosController = new ProductosController();\r\n        \r\n        // API global\r\n        window.Productos = {\r\n            filtrar: (categoria) => window.productosController?.filtrarPor(categoria),\r\n            buscar: (termino) => window.productosController?.buscarProducto(termino),\r\n            resetear: () => window.productosController?.resetearFiltros(),\r\n            stats: () => window.productosController?.getStats()\r\n        };\r\n    }\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initProductos();\r\n    \r\n    // Llamar funciones legacy para compatibilidad\r\n    animarElementos();\r\n    efectosHover();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ProductosController;\r\n}","class ServiciosController {\r\n    constructor() {\r\n        this.formularioCotizacion = document.getElementById('formularioCotizacion');\r\n        this.servicioCards = document.querySelectorAll('.servicio-card');\r\n        this.testimonioCards = document.querySelectorAll('.testimonio-card');\r\n        this.statsItems = document.querySelectorAll('.stat-item');\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFormularioCotizacion();\r\n        this.initAnimaciones();\r\n        this.initContadores();\r\n        this.initBotonesCotizar();\r\n        this.initBotonesEmergencia();\r\n        this.initAccesibilidad();\r\n        \r\n        console.log('✅ Servicios Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE COTIZACIÓN\r\n    // ==================\r\n    initFormularioCotizacion() {\r\n        if (!this.formularioCotizacion) return;\r\n\r\n        // Validación en tiempo real\r\n        const inputs = this.formularioCotizacion.querySelectorAll('input, select, textarea');\r\n        \r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioCotizacion.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarCotizacion();\r\n        });\r\n    }\r\n\r\n    enviarCotizacion() {\r\n        // Validar formulario\r\n        if (!BombasAyalaUtils.validateForm(this.formularioCotizacion)) {\r\n            BombasAyalaUtils.showToast('Por favor, corrige los errores en el formulario.', 'error');\r\n            \r\n            // Scroll al primer error\r\n            const primerError = this.formularioCotizacion.querySelector('.error');\r\n            if (primerError) {\r\n                primerError.focus();\r\n                primerError.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Obtener datos del formulario\r\n        const formData = new FormData(this.formularioCotizacion);\r\n        const datos = {\r\n            nombre: formData.get('nombre'),\r\n            telefono: formData.get('telefono'),\r\n            email: formData.get('email'),\r\n            servicio: formData.get('servicio'),\r\n            descripcion: formData.get('descripcion')\r\n        };\r\n\r\n        // Validar campos requeridos\r\n        if (!datos.nombre || !datos.telefono || !datos.servicio) {\r\n            BombasAyalaUtils.showToast('Por favor, completa todos los campos obligatorios.', 'error');\r\n            return;\r\n        }\r\n\r\n        // Mostrar estado de carga\r\n        const botonSubmit = this.formularioCotizacion.querySelector('.boton-enviar, button[type=\"submit\"]');\r\n        const textoOriginal = botonSubmit ? botonSubmit.innerHTML : '';\r\n        \r\n        if (botonSubmit) {\r\n            botonSubmit.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> ENVIANDO...';\r\n            botonSubmit.disabled = true;\r\n        }\r\n\r\n        // Crear mensaje para WhatsApp\r\n        const mensaje = BombasAyalaUtils.createQuoteMessage(datos);\r\n        \r\n        setTimeout(() => {\r\n            // Abrir WhatsApp\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            BombasAyalaUtils.showToast('¡Cotización enviada! Te hemos redirigido a WhatsApp.', 'success');\r\n            \r\n            // Limpiar formulario\r\n            this.formularioCotizacion.reset();\r\n            const inputs = this.formularioCotizacion.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            if (botonSubmit) {\r\n                botonSubmit.innerHTML = textoOriginal;\r\n                botonSubmit.disabled = false;\r\n            }\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('cotizacion_enviada', 'servicios', datos.servicio);\r\n            \r\n            console.log('📧 Cotización enviada:', datos);\r\n            \r\n        }, 1500);\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar cards de servicios y testimonios\r\n        BombasAyalaUtils.animateOnScroll('.servicio-card, .testimonio-card');\r\n        \r\n        // Configurar transiciones iniciales para cards\r\n        this.servicioCards.forEach(card => {\r\n            card.style.opacity = '0';\r\n            card.style.transform = 'translateY(30px)';\r\n            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n        });\r\n\r\n        this.testimonioCards.forEach(card => {\r\n            card.style.opacity = '0';\r\n            card.style.transform = 'translateY(30px)';\r\n            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n        });\r\n        \r\n        // Observador para animaciones personalizadas\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                }\r\n            });\r\n        });\r\n\r\n        // Observar elementos\r\n        [...this.servicioCards, ...this.testimonioCards].forEach(el => {\r\n            observer.observe(el);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    initContadores() {\r\n        if (this.statsItems.length === 0) return;\r\n\r\n        const statsObserver = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const numero = entry.target.querySelector('.stat-numero');\r\n                    if (!numero) return;\r\n                    \r\n                    const texto = numero.textContent;\r\n                    \r\n                    if (texto.includes('5000+')) {\r\n                        BombasAyalaUtils.animateCounter(numero, 0, 5000, 2000);\r\n                    } else if (texto.includes('98%')) {\r\n                        BombasAyalaUtils.animateCounter(numero, 0, 98, 2000);\r\n                    } else if (texto.includes('24/7')) {\r\n                        numero.textContent = '24/7';\r\n                    } else {\r\n                        // Extraer número si existe\r\n                        const match = texto.match(/(\\d+)/);\r\n                        if (match) {\r\n                            const targetNumber = parseInt(match[1]);\r\n                            BombasAyalaUtils.animateCounter(numero, 0, targetNumber, 2000);\r\n                        }\r\n                    }\r\n                    \r\n                    statsObserver.unobserve(entry.target);\r\n                }\r\n            });\r\n        }, { threshold: 0.5 });\r\n\r\n        this.statsItems.forEach(item => {\r\n            statsObserver.observe(item);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES DE COTIZACIÓN\r\n    // ==================\r\n    initBotonesCotizar() {\r\n        const botonesCotizar = document.querySelectorAll('.boton-cotizar');\r\n        \r\n        botonesCotizar.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const servicio = this.getServicioFromButton(boton);\r\n                \r\n                // Scroll al formulario\r\n                if (this.formularioCotizacion) {\r\n                    // Pre-seleccionar servicio si existe el campo\r\n                    const selectServicio = this.formularioCotizacion.querySelector('select[name=\"servicio\"]');\r\n                    if (selectServicio && servicio) {\r\n                        selectServicio.value = servicio;\r\n                    }\r\n                    \r\n                    // Scroll suave al formulario\r\n                    this.formularioCotizacion.scrollIntoView({\r\n                        behavior: 'smooth',\r\n                        block: 'start'\r\n                    });\r\n                    \r\n                    // Focus en el primer campo\r\n                    setTimeout(() => {\r\n                        const primerInput = this.formularioCotizacion.querySelector('input');\r\n                        if (primerInput) primerInput.focus();\r\n                    }, 800);\r\n                }\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('boton_cotizar_click', 'servicios', servicio);\r\n                \r\n                console.log('💼 Botón cotizar clickeado:', servicio);\r\n            });\r\n        });\r\n    }\r\n\r\n    getServicioFromButton(boton) {\r\n        // Intentar obtener el servicio desde varios lugares\r\n        const servicioCard = boton.closest('.servicio-card');\r\n        \r\n        if (servicioCard) {\r\n            const titulo = servicioCard.querySelector('.servicio-titulo, h3, h4');\r\n            if (titulo) return titulo.textContent.trim();\r\n        }\r\n        \r\n        // Fallback: usar data attribute\r\n        return boton.dataset.servicio || 'Servicio no especificado';\r\n    }\r\n\r\n    // ==================\r\n    // BOTONES DE EMERGENCIA\r\n    // ==================\r\n    initBotonesEmergencia() {\r\n        const botonesEmergencia = document.querySelectorAll('.boton-emergencia');\r\n        \r\n        botonesEmergencia.forEach(boton => {\r\n            boton.addEventListener('click', () => {\r\n                const tipo = this.getTipoEmergencia(boton);\r\n                \r\n                if (tipo === 'whatsapp') {\r\n                    const mensaje = '🚨 *EMERGENCIA - SERVICIO URGENTE* 🚨\\n\\n' +\r\n                                  'Necesito asistencia técnica urgente con bombas de agua.\\n\\n' +\r\n                                  '⏰ Es una emergencia\\n' +\r\n                                  '📞 Por favor contactarme lo antes posible\\n\\n' +\r\n                                  '¡Gracias!';\r\n                    \r\n                    BombasAyalaUtils.openWhatsApp(mensaje);\r\n                } else if (tipo === 'llamada') {\r\n                    window.location.href = 'tel:+51997984102';\r\n                }\r\n                \r\n                // Tracking\r\n                BombasAyalaUtils.trackEvent('emergencia_click', 'servicios', tipo);\r\n                \r\n                console.log('🚨 Emergencia clickeada:', tipo);\r\n            });\r\n        });\r\n    }\r\n\r\n    getTipoEmergencia(boton) {\r\n        if (boton.classList.contains('whatsapp') || boton.querySelector('.fa-whatsapp')) {\r\n            return 'whatsapp';\r\n        } else if (boton.classList.contains('llamada') || boton.querySelector('.fa-phone')) {\r\n            return 'llamada';\r\n        }\r\n        return 'unknown';\r\n    }\r\n\r\n    // ==================\r\n    // MEJORAS DE ACCESIBILIDAD\r\n    // ==================\r\n    initAccesibilidad() {\r\n        // Mejorar accesibilidad de botones sin texto\r\n        const botones = document.querySelectorAll('button, .boton-cotizar, .boton-emergencia');\r\n        \r\n        botones.forEach(boton => {\r\n            if (!boton.getAttribute('aria-label') && !boton.textContent.trim()) {\r\n                const icono = boton.querySelector('i');\r\n                if (icono) {\r\n                    const clases = icono.className;\r\n                    \r\n                    if (clases.includes('whatsapp')) {\r\n                        boton.setAttribute('aria-label', 'Contactar por WhatsApp');\r\n                    } else if (clases.includes('phone')) {\r\n                        boton.setAttribute('aria-label', 'Llamar por teléfono');\r\n                    } else if (clases.includes('quote') || clases.includes('cotizar')) {\r\n                        boton.setAttribute('aria-label', 'Solicitar cotización');\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Mejorar contraste de foco\r\n        const elementos = document.querySelectorAll('input, select, textarea, button');\r\n        elementos.forEach(el => {\r\n            el.addEventListener('focus', () => {\r\n                el.style.outline = '2px solid #007bff';\r\n                el.style.outlineOffset = '2px';\r\n            });\r\n            \r\n            el.addEventListener('blur', () => {\r\n                el.style.outline = '';\r\n                el.style.outlineOffset = '';\r\n            });\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    scrollToForm() {\r\n        if (this.formularioCotizacion) {\r\n            this.formularioCotizacion.scrollIntoView({\r\n                behavior: 'smooth',\r\n                block: 'start'\r\n            });\r\n        }\r\n    }\r\n\r\n    preseleccionarServicio(servicio) {\r\n        if (this.formularioCotizacion) {\r\n            const selectServicio = this.formularioCotizacion.querySelector('select[name=\"servicio\"]');\r\n            if (selectServicio) {\r\n                selectServicio.value = servicio;\r\n                selectServicio.dispatchEvent(new Event('change'));\r\n            }\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            servicios: this.servicioCards.length,\r\n            testimonios: this.testimonioCards.length,\r\n            hasFormulario: !!this.formularioCotizacion\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// FUNCIONES LEGACY (compatibilidad)\r\n// ==================\r\n\r\nfunction trackEvent(action, category, label) {\r\n    BombasAyalaUtils.trackEvent(action, category, label);\r\n}\r\n\r\nfunction validateField(field) {\r\n    return BombasAyalaUtils.validateField(field);\r\n}\r\n\r\nfunction showFieldError(field, message) {\r\n    BombasAyalaUtils.showFieldError(field, message);\r\n}\r\n\r\nfunction animateCounter(element, start, end, duration) {\r\n    BombasAyalaUtils.animateCounter(element, start, end, duration);\r\n}\r\n\r\nfunction isMobile() {\r\n    return BombasAyalaUtils.isMobile();\r\n}\r\n\r\nfunction adjustForMobile() {\r\n    console.log('🔄 adjustForMobile legacy llamada');\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initServicios() {\r\n    window.serviciosController = new ServiciosController();\r\n    \r\n    // API global\r\n    window.Servicios = {\r\n        scrollToForm: () => window.serviciosController?.scrollToForm(),\r\n        preseleccionar: (servicio) => window.serviciosController?.preseleccionarServicio(servicio),\r\n        stats: () => window.serviciosController?.getStats()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initServicios();\r\n    \r\n    // Mantener compatibilidad con funciones legacy\r\n    adjustForMobile();\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = ServiciosController;\r\n}","class SoporteController {\r\n    constructor() {\r\n        this.faqItems = document.querySelectorAll('.faq-item');\r\n        this.buscadorFAQ = document.getElementById('buscadorFAQ');\r\n        this.formularioSoporte = document.getElementById('formularioSoporte');\r\n        this.chatButton = document.querySelector('.chat-soporte-btn');\r\n        \r\n        // Estado\r\n        this.faqsOriginales = [];\r\n        this.faqActivo = null;\r\n        \r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.initFAQ();\r\n        this.initBuscador();\r\n        this.initFormularioSoporte();\r\n        this.initChatSoporte();\r\n        this.initAnimaciones();\r\n        this.guardarFAQsOriginales();\r\n        \r\n        console.log('✅ Soporte Controller inicializado');\r\n    }\r\n\r\n    // ==================\r\n    // SISTEMA FAQ (ACORDEÓN)\r\n    // ==================\r\n    initFAQ() {\r\n        if (this.faqItems.length === 0) return;\r\n\r\n        this.faqItems.forEach(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta');\r\n            const respuesta = item.querySelector('.faq-respuesta');\r\n            const icono = item.querySelector('.faq-pregunta i, .faq-icono');\r\n            \r\n            if (!pregunta || !respuesta) return;\r\n\r\n            // Ocultar todas las respuestas al inicio\r\n            respuesta.style.display = 'none';\r\n            \r\n            // Click en pregunta\r\n            pregunta.addEventListener('click', () => {\r\n                this.toggleFAQ(item, respuesta, icono);\r\n            });\r\n\r\n            // Mejorar accesibilidad\r\n            pregunta.setAttribute('role', 'button');\r\n            pregunta.setAttribute('aria-expanded', 'false');\r\n            pregunta.setAttribute('tabindex', '0');\r\n            \r\n            // Soporte para teclado\r\n            pregunta.addEventListener('keydown', (e) => {\r\n                if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    this.toggleFAQ(item, respuesta, icono);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    toggleFAQ(item, respuesta, icono) {\r\n        const isActive = item.classList.contains('active');\r\n        \r\n        // Cerrar todos los FAQs\r\n        this.cerrarTodosFAQs();\r\n        \r\n        // Si no estaba activo, abrirlo\r\n        if (!isActive) {\r\n            this.abrirFAQ(item, respuesta, icono);\r\n        }\r\n    }\r\n\r\n    abrirFAQ(item, respuesta, icono) {\r\n        item.classList.add('active');\r\n        respuesta.style.display = 'block';\r\n        \r\n        // Animar altura\r\n        respuesta.style.maxHeight = '0';\r\n        respuesta.style.opacity = '0';\r\n        respuesta.style.transition = 'all 0.3s ease';\r\n        \r\n        setTimeout(() => {\r\n            respuesta.style.maxHeight = respuesta.scrollHeight + 'px';\r\n            respuesta.style.opacity = '1';\r\n        }, 10);\r\n        \r\n        // Rotar icono\r\n        if (icono) {\r\n            icono.style.transform = 'rotate(180deg)';\r\n        }\r\n        \r\n        // Actualizar accesibilidad\r\n        const pregunta = item.querySelector('.faq-pregunta');\r\n        if (pregunta) {\r\n            pregunta.setAttribute('aria-expanded', 'true');\r\n        }\r\n        \r\n        this.faqActivo = item;\r\n        \r\n        // Tracking\r\n        const textoPregunta = pregunta?.textContent.trim() || 'FAQ sin título';\r\n        BombasAyalaUtils.trackEvent('faq_open', 'soporte', textoPregunta);\r\n        \r\n        console.log('❓ FAQ abierto:', textoPregunta);\r\n    }\r\n\r\n    cerrarTodosFAQs() {\r\n        this.faqItems.forEach(otherItem => {\r\n            const otherRespuesta = otherItem.querySelector('.faq-respuesta');\r\n            const otherIcono = otherItem.querySelector('.faq-pregunta i, .faq-icono');\r\n            const otherPregunta = otherItem.querySelector('.faq-pregunta');\r\n            \r\n            otherItem.classList.remove('active');\r\n            \r\n            if (otherRespuesta) {\r\n                otherRespuesta.style.maxHeight = '0';\r\n                otherRespuesta.style.opacity = '0';\r\n                \r\n                setTimeout(() => {\r\n                    otherRespuesta.style.display = 'none';\r\n                }, 300);\r\n            }\r\n            \r\n            if (otherIcono) {\r\n                otherIcono.style.transform = 'rotate(0deg)';\r\n            }\r\n            \r\n            if (otherPregunta) {\r\n                otherPregunta.setAttribute('aria-expanded', 'false');\r\n            }\r\n        });\r\n        \r\n        this.faqActivo = null;\r\n    }\r\n\r\n    // ==================\r\n    // BUSCADOR FAQ\r\n    // ==================\r\n    initBuscador() {\r\n        if (!this.buscadorFAQ) return;\r\n\r\n        this.buscadorFAQ.addEventListener('input', BombasAyalaUtils.debounce((e) => {\r\n            this.filtrarFAQs(e.target.value);\r\n        }, 300));\r\n\r\n        // Limpiar búsqueda al hacer clic en X\r\n        const clearBtn = document.querySelector('.clear-search');\r\n        if (clearBtn) {\r\n            clearBtn.addEventListener('click', () => {\r\n                this.buscadorFAQ.value = '';\r\n                this.filtrarFAQs('');\r\n            });\r\n        }\r\n    }\r\n\r\n    filtrarFAQs(termino) {\r\n        const terminoLower = termino.toLowerCase().trim();\r\n        \r\n        if (terminoLower === '') {\r\n            // Mostrar todos los FAQs\r\n            this.faqItems.forEach(item => {\r\n                item.style.display = 'block';\r\n                item.style.opacity = '1';\r\n            });\r\n            return;\r\n        }\r\n\r\n        let resultadosEncontrados = 0;\r\n\r\n        this.faqItems.forEach(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta')?.textContent.toLowerCase() || '';\r\n            const respuesta = item.querySelector('.faq-respuesta')?.textContent.toLowerCase() || '';\r\n            \r\n            const coincide = pregunta.includes(terminoLower) || respuesta.includes(terminoLower);\r\n            \r\n            if (coincide) {\r\n                item.style.display = 'block';\r\n                item.style.opacity = '1';\r\n                resultadosEncontrados++;\r\n            } else {\r\n                item.style.display = 'none';\r\n                item.style.opacity = '0';\r\n            }\r\n        });\r\n\r\n        // Mostrar mensaje si no hay resultados\r\n        this.mostrarResultadosBusqueda(resultadosEncontrados, termino);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('faq_search', 'soporte', termino, resultadosEncontrados);\r\n        \r\n        console.log(`🔍 Búsqueda FAQ: \"${termino}\" - ${resultadosEncontrados} resultados`);\r\n    }\r\n\r\n    mostrarResultadosBusqueda(cantidad, termino) {\r\n        // Remover mensaje anterior\r\n        const mensajeAnterior = document.querySelector('.mensaje-busqueda-faq');\r\n        if (mensajeAnterior) {\r\n            mensajeAnterior.remove();\r\n        }\r\n\r\n        // Si no hay resultados, mostrar mensaje\r\n        if (cantidad === 0 && termino.trim() !== '') {\r\n            const mensaje = document.createElement('div');\r\n            mensaje.className = 'mensaje-busqueda-faq';\r\n            mensaje.innerHTML = `\r\n                <div style=\"text-align: center; padding: 20px; color: #666;\">\r\n                    <i class=\"fas fa-search\" style=\"font-size: 2rem; margin-bottom: 10px; opacity: 0.5;\"></i>\r\n                    <p>No se encontraron preguntas que coincidan con \"<strong>${termino}</strong>\"</p>\r\n                    <p style=\"font-size: 0.9rem;\">Intenta con otros términos o <a href=\"#contacto\" style=\"color: #007bff;\">contáctanos directamente</a></p>\r\n                </div>\r\n            `;\r\n            \r\n            // Insertar después del buscador\r\n            const contenedorFAQ = this.buscadorFAQ.closest('.faq-container') || this.buscadorFAQ.parentNode;\r\n            contenedorFAQ.appendChild(mensaje);\r\n        }\r\n    }\r\n\r\n    guardarFAQsOriginales() {\r\n        this.faqsOriginales = Array.from(this.faqItems).map(item => ({\r\n            pregunta: item.querySelector('.faq-pregunta')?.textContent.trim(),\r\n            respuesta: item.querySelector('.faq-respuesta')?.textContent.trim(),\r\n            elemento: item\r\n        }));\r\n    }\r\n\r\n    // ==================\r\n    // FORMULARIO DE SOPORTE\r\n    // ==================\r\n    initFormularioSoporte() {\r\n        if (!this.formularioSoporte) return;\r\n\r\n        // Validación en tiempo real\r\n        const inputs = this.formularioSoporte.querySelectorAll('input, select, textarea');\r\n        \r\n        inputs.forEach(input => {\r\n            input.addEventListener('blur', () => {\r\n                BombasAyalaUtils.validateField(input);\r\n            });\r\n\r\n            input.addEventListener('input', () => {\r\n                if (input.classList.contains('error')) {\r\n                    BombasAyalaUtils.validateField(input);\r\n                }\r\n            });\r\n        });\r\n\r\n        // Submit del formulario\r\n        this.formularioSoporte.addEventListener('submit', (e) => {\r\n            e.preventDefault();\r\n            this.enviarSolicitudSoporte();\r\n        });\r\n    }\r\n\r\n    enviarSolicitudSoporte() {\r\n        // Validar formulario\r\n        if (!BombasAyalaUtils.validateForm(this.formularioSoporte)) {\r\n            BombasAyalaUtils.showToast('Por favor, corrige los errores en el formulario.', 'error');\r\n            return;\r\n        }\r\n\r\n        // Obtener datos\r\n        const formData = new FormData(this.formularioSoporte);\r\n        const datos = {\r\n            nombre: formData.get('nombre'),\r\n            email: formData.get('email'),\r\n            telefono: formData.get('telefono'),\r\n            tipo: formData.get('tipo') || 'consulta',\r\n            mensaje: formData.get('mensaje'),\r\n            prioridad: formData.get('prioridad') || 'normal'\r\n        };\r\n\r\n        // Mostrar estado de carga\r\n        const botonSubmit = this.formularioSoporte.querySelector('button[type=\"submit\"]');\r\n        const textoOriginal = botonSubmit?.innerHTML || '';\r\n        \r\n        if (botonSubmit) {\r\n            botonSubmit.innerHTML = '<i class=\"fas fa-spinner fa-spin\"></i> Enviando...';\r\n            botonSubmit.disabled = true;\r\n        }\r\n\r\n        // Crear mensaje para WhatsApp\r\n        const mensaje = this.crearMensajeSoporte(datos);\r\n\r\n        setTimeout(() => {\r\n            // Abrir WhatsApp\r\n            BombasAyalaUtils.openWhatsApp(mensaje);\r\n            \r\n            // Mostrar mensaje de éxito\r\n            BombasAyalaUtils.showToast('¡Solicitud enviada! Te contactaremos pronto.', 'success');\r\n            \r\n            // Limpiar formulario\r\n            this.formularioSoporte.reset();\r\n            const inputs = this.formularioSoporte.querySelectorAll('input, select, textarea');\r\n            inputs.forEach(input => {\r\n                input.classList.remove('error', 'success');\r\n                BombasAyalaUtils.removeFieldError(input);\r\n            });\r\n            \r\n            // Restaurar botón\r\n            if (botonSubmit) {\r\n                botonSubmit.innerHTML = textoOriginal;\r\n                botonSubmit.disabled = false;\r\n            }\r\n            \r\n            // Tracking\r\n            BombasAyalaUtils.trackEvent('soporte_enviado', 'soporte', datos.tipo);\r\n            \r\n        }, 1500);\r\n    }\r\n\r\n    crearMensajeSoporte(datos) {\r\n        const iconosPrioridad = {\r\n            baja: '🟢',\r\n            normal: '🟡',\r\n            alta: '🔴',\r\n            urgente: '🚨'\r\n        };\r\n\r\n        const iconosTipo = {\r\n            consulta: '❓',\r\n            tecnico: '🔧',\r\n            garantia: '🛡️',\r\n            emergencia: '🚨',\r\n            otro: '💬'\r\n        };\r\n\r\n        let mensaje = `${iconosTipo[datos.tipo] || '💬'} **SOLICITUD DE SOPORTE**\\n\\n`;\r\n        mensaje += `👤 **Cliente:** ${datos.nombre}\\n`;\r\n        mensaje += `📧 **Email:** ${datos.email}\\n`;\r\n        \r\n        if (datos.telefono) {\r\n            mensaje += `📞 **Teléfono:** ${datos.telefono}\\n`;\r\n        }\r\n        \r\n        mensaje += `📋 **Tipo:** ${datos.tipo.charAt(0).toUpperCase() + datos.tipo.slice(1)}\\n`;\r\n        mensaje += `${iconosPrioridad[datos.prioridad]} **Prioridad:** ${datos.prioridad.toUpperCase()}\\n\\n`;\r\n        mensaje += `💬 **Mensaje:**\\n${datos.mensaje}\\n\\n`;\r\n        mensaje += `⏰ **Fecha:** ${new Date().toLocaleString('es-PE')}\\n\\n`;\r\n        mensaje += `Por favor, responder lo antes posible. ¡Gracias!`;\r\n\r\n        return mensaje;\r\n    }\r\n\r\n    // ==================\r\n    // CHAT DE SOPORTE\r\n    // ==================\r\n    initChatSoporte() {\r\n        if (!this.chatButton) return;\r\n\r\n        this.chatButton.addEventListener('click', () => {\r\n            this.abrirChatSoporte();\r\n        });\r\n\r\n        // Auto-mostrar chat después de cierto tiempo\r\n        setTimeout(() => {\r\n            this.mostrarPrompChat();\r\n        }, 30000); // 30 segundos\r\n    }\r\n\r\n    abrirChatSoporte() {\r\n        const mensaje = `👋 ¡Hola! Necesito ayuda con:\\n\\n` +\r\n                       `(Selecciona una opción o escribe tu consulta)\\n\\n` +\r\n                       `🔧 Problema técnico\\n` +\r\n                       `📦 Información de productos\\n` +\r\n                       `💰 Cotización\\n` +\r\n                       `📞 Agendar visita técnica\\n` +\r\n                       `❓ Otra consulta`;\r\n\r\n        BombasAyalaUtils.openWhatsApp(mensaje);\r\n\r\n        // Tracking\r\n        BombasAyalaUtils.trackEvent('chat_soporte_click', 'soporte', 'whatsapp');\r\n    }\r\n\r\n    mostrarPrompChat() {\r\n        // Solo mostrar si no se ha interactuado mucho con la página\r\n        const interacciones = this.contarInteracciones();\r\n        \r\n        if (interacciones < 3) {\r\n            BombasAyalaUtils.showToast('¿Necesitas ayuda? Chatea con nosotros 💬', 'info', 5000);\r\n        }\r\n    }\r\n\r\n    contarInteracciones() {\r\n        // Contar clics, scrolls, etc. (implementación básica)\r\n        return parseInt(sessionStorage.getItem('bombas_interacciones') || '0');\r\n    }\r\n\r\n    // ==================\r\n    // ANIMACIONES\r\n    // ==================\r\n    initAnimaciones() {\r\n        // Animar FAQs al aparecer\r\n        BombasAyalaUtils.animateOnScroll('.faq-item');\r\n        \r\n        // Animación especial para el acordeón\r\n        const observer = BombasAyalaUtils.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                }\r\n            });\r\n        });\r\n\r\n        this.faqItems.forEach((item, index) => {\r\n            item.style.opacity = '0';\r\n            item.style.transform = 'translateY(20px)';\r\n            item.style.transition = `opacity 0.4s ease ${index * 0.1}s, transform 0.4s ease ${index * 0.1}s`;\r\n            observer.observe(item);\r\n        });\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    abrirFAQPorTexto(textoBusqueda) {\r\n        const faq = Array.from(this.faqItems).find(item => {\r\n            const pregunta = item.querySelector('.faq-pregunta')?.textContent.toLowerCase();\r\n            return pregunta?.includes(textoBusqueda.toLowerCase());\r\n        });\r\n\r\n        if (faq) {\r\n            const respuesta = faq.querySelector('.faq-respuesta');\r\n            const icono = faq.querySelector('.faq-pregunta i, .faq-icono');\r\n            \r\n            this.cerrarTodosFAQs();\r\n            this.abrirFAQ(faq, respuesta, icono);\r\n            \r\n            // Scroll al FAQ\r\n            faq.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        }\r\n    }\r\n\r\n    buscarFAQ(termino) {\r\n        if (this.buscadorFAQ) {\r\n            this.buscadorFAQ.value = termino;\r\n            this.filtrarFAQs(termino);\r\n        }\r\n    }\r\n\r\n    getStats() {\r\n        return {\r\n            totalFAQs: this.faqItems.length,\r\n            faqActivo: this.faqActivo ? this.faqActivo.querySelector('.faq-pregunta')?.textContent : null,\r\n            hasFormulario: !!this.formularioSoporte,\r\n            hasChat: !!this.chatButton\r\n        };\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN\r\n// ==================\r\nfunction initSoporte() {\r\n    window.soporteController = new SoporteController();\r\n    \r\n    // API global\r\n    window.Soporte = {\r\n        abrirFAQ: (texto) => window.soporteController?.abrirFAQPorTexto(texto),\r\n        buscar: (termino) => window.soporteController?.buscarFAQ(termino),\r\n        chat: () => window.soporteController?.abrirChatSoporte(),\r\n        stats: () => window.soporteController?.getStats()\r\n    };\r\n}\r\n\r\n// Auto-inicializar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initSoporte();\r\n    \r\n    // Incrementar contador de interacciones\r\n    let interacciones = parseInt(sessionStorage.getItem('bombas_interacciones') || '0');\r\n    sessionStorage.setItem('bombas_interacciones', (interacciones + 1).toString());\r\n});\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = SoporteController;\r\n}","/**\r\n * ========================================\r\n * MAIN.JS - BOMBAS AYALA\r\n * Coordinador principal y punto de entrada\r\n * ========================================\r\n */\r\n\r\nclass BombasAyalaApp {\r\n    constructor() {\r\n        // Estado de la aplicación\r\n        this.isInitialized = false;\r\n        this.currentPage = this.detectCurrentPage();\r\n        this.controllers = {};\r\n        this.config = {\r\n            phone: '51997984102',\r\n            email: 'info@bombasayala.com',\r\n            address: 'Lima, Perú',\r\n            analytics: {\r\n                enabled: true,\r\n                trackingId: 'GA_MEASUREMENT_ID' // Reemplazar con tu ID real\r\n            }\r\n        };\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        console.log('🚀 Iniciando Bombas Ayala App...');\r\n        \r\n        // Verificar dependencias\r\n        if (!this.checkDependencies()) {\r\n            console.error('❌ Dependencias no encontradas');\r\n            return;\r\n        }\r\n\r\n        // Inicializar componentes globales\r\n        this.initGlobalComponents();\r\n        \r\n        // Inicializar componentes específicos de página\r\n        this.initPageSpecificComponents();\r\n        \r\n        // Configurar eventos globales\r\n        this.setupGlobalEvents();\r\n        \r\n        // Finalizar inicialización\r\n        this.finishInitialization();\r\n    }\r\n\r\n    // ==================\r\n    // VERIFICACIÓN DE DEPENDENCIAS\r\n    // ==================\r\n    checkDependencies() {\r\n        const required = ['BombasAyalaUtils'];\r\n        \r\n        for (const dep of required) {\r\n            if (typeof window[dep] === 'undefined') {\r\n                console.error(`❌ Dependencia requerida no encontrada: ${dep}`);\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        console.log('✅ Todas las dependencias están disponibles');\r\n        return true;\r\n    }\r\n\r\n    // ==================\r\n    // DETECCIÓN DE PÁGINA\r\n    // ==================\r\n    detectCurrentPage() {\r\n        const path = window.location.pathname.toLowerCase();\r\n        const body = document.body;\r\n        \r\n        // Detectar por pathname\r\n        if (path.includes('inicio') || path === '/' || path.includes('index')) {\r\n            return 'inicio';\r\n        } else if (path.includes('productos')) {\r\n            return 'productos';\r\n        } else if (path.includes('servicios')) {\r\n            return 'servicios';\r\n        } else if (path.includes('galeria') || path.includes('proyectos') || path.includes('fotos')) {\r\n            return 'galeria';\r\n        } else if (path.includes('nosotros') || path.includes('about')) {\r\n            return 'nosotros';\r\n        } else if (path.includes('contacto') || path.includes('contact')) {\r\n            return 'contacto';\r\n        } else if (path.includes('soporte') || path.includes('faq') || path.includes('ayuda')) {\r\n            return 'soporte';\r\n        }\r\n        \r\n        // Detectar por clases del body o elementos específicos\r\n        if (body.classList.contains('page-inicio') || document.querySelector('#heroBackground')) {\r\n            return 'inicio';\r\n        } else if (body.classList.contains('page-productos') || document.querySelector('.producto-card')) {\r\n            return 'productos';\r\n        } else if (body.classList.contains('page-servicios') || document.querySelector('.servicio-card')) {\r\n            return 'servicios';\r\n        } else if (body.classList.contains('page-galeria') || document.querySelector('.tarjeta-proyecto')) {\r\n            return 'galeria';\r\n        } else if (body.classList.contains('page-nosotros') || document.querySelector('.numero-estadistica')) {\r\n            return 'nosotros';\r\n        } else if (body.classList.contains('page-contacto') || document.querySelector('#formularioContacto')) {\r\n            return 'contacto';\r\n        } else if (body.classList.contains('page-soporte') || document.querySelector('.faq-item')) {\r\n            return 'soporte';\r\n        }\r\n        \r\n        // Página genérica si no se detecta ninguna específica\r\n        return 'general';\r\n    }\r\n\r\n    // ==================\r\n    // COMPONENTES GLOBALES\r\n    // ==================\r\n    initGlobalComponents() {\r\n        console.log('🔧 Inicializando componentes globales...');\r\n        \r\n        // Header (siempre presente)\r\n        if (typeof HeaderController !== 'undefined') {\r\n            try {\r\n                this.controllers.header = new HeaderController();\r\n                console.log('✅ Header inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Header:', e.message);\r\n            }\r\n        }\r\n        \r\n        // Flotantes (siempre presente)\r\n        if (typeof FlotantesController !== 'undefined') {\r\n            try {\r\n                this.controllers.flotantes = new FlotantesController();\r\n                console.log('✅ Flotantes inicializados');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Flotantes:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // COMPONENTES ESPECÍFICOS DE PÁGINA\r\n    // ==================\r\n    initPageSpecificComponents() {\r\n        console.log(`📄 Inicializando componentes para página: ${this.currentPage}`);\r\n        \r\n        switch (this.currentPage) {\r\n            case 'inicio':\r\n                this.initInicioComponents();\r\n                break;\r\n            case 'productos':\r\n                this.initProductosComponents();\r\n                break;\r\n            case 'servicios':\r\n                this.initServiciosComponents();\r\n                break;\r\n            case 'galeria':\r\n                this.initGaleriaComponents();\r\n                break;\r\n            case 'nosotros':\r\n                this.initNosotrosComponents();\r\n                break;\r\n            case 'contacto':\r\n                this.initContactoComponents();\r\n                break;\r\n            case 'soporte':\r\n                this.initSoporteComponents();\r\n                break;\r\n            default:\r\n                console.log('📄 Página genérica - solo componentes globales');\r\n        }\r\n    }\r\n\r\n    initInicioComponents() {\r\n        if (typeof InicioController !== 'undefined') {\r\n            try {\r\n                this.controllers.inicio = new InicioController();\r\n                console.log('✅ Inicio inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Inicio:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initProductosComponents() {\r\n        if (typeof ProductosController !== 'undefined') {\r\n            try {\r\n                this.controllers.productos = new ProductosController();\r\n                console.log('✅ Productos inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Productos:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initServiciosComponents() {\r\n        if (typeof ServiciosController !== 'undefined') {\r\n            try {\r\n                this.controllers.servicios = new ServiciosController();\r\n                console.log('✅ Servicios inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Servicios:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initGaleriaComponents() {\r\n        if (typeof GaleriaController !== 'undefined') {\r\n            try {\r\n                this.controllers.galeria = new GaleriaController();\r\n                console.log('✅ Galería inicializada');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Galería:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initNosotrosComponents() {\r\n        if (typeof NosotrosController !== 'undefined') {\r\n            try {\r\n                this.controllers.nosotros = new NosotrosController();\r\n                console.log('✅ Nosotros inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Nosotros:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initContactoComponents() {\r\n        if (typeof ContactoController !== 'undefined') {\r\n            try {\r\n                this.controllers.contacto = new ContactoController();\r\n                console.log('✅ Contacto inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Contacto:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    initSoporteComponents() {\r\n        if (typeof SoporteController !== 'undefined') {\r\n            try {\r\n                this.controllers.soporte = new SoporteController();\r\n                console.log('✅ Soporte inicializado');\r\n            } catch (e) {\r\n                console.warn('⚠️ Error inicializando Soporte:', e.message);\r\n            }\r\n        }\r\n    }\r\n\r\n    // ==================\r\n    // EVENTOS GLOBALES\r\n    // ==================\r\n    setupGlobalEvents() {\r\n        // Manejo de errores globales\r\n        window.addEventListener('error', this.handleGlobalError.bind(this));\r\n        \r\n        // Manejo de promesas rechazadas\r\n        window.addEventListener('unhandledrejection', this.handleUnhandledRejection.bind(this));\r\n        \r\n        // Eventos de navegación\r\n        window.addEventListener('beforeunload', this.handleBeforeUnload.bind(this));\r\n        \r\n        // Eventos de rendimiento\r\n        window.addEventListener('load', this.handlePageLoad.bind(this));\r\n        \r\n        // Eventos de red\r\n        window.addEventListener('online', this.handleOnline.bind(this));\r\n        window.addEventListener('offline', this.handleOffline.bind(this));\r\n        \r\n        console.log('✅ Eventos globales configurados');\r\n    }\r\n\r\n    handleGlobalError(event) {\r\n        console.error('❌ Error global:', event.error);\r\n        \r\n        // Tracking de errores (opcional)\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('javascript_error', 'error', event.error.message);\r\n        }\r\n    }\r\n\r\n    handleUnhandledRejection(event) {\r\n        console.error('❌ Promesa rechazada:', event.reason);\r\n        \r\n        // Tracking de errores (opcional)\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('promise_rejection', 'error', event.reason.toString());\r\n        }\r\n    }\r\n\r\n    handleBeforeUnload(event) {\r\n        // Limpiar recursos si es necesario\r\n        console.log('🧹 Limpiando recursos antes de salir...');\r\n    }\r\n\r\n    handlePageLoad(event) {\r\n        const loadTime = performance.now();\r\n        console.log(`⚡ Página cargada en ${Math.round(loadTime)}ms`);\r\n        \r\n        // Tracking de rendimiento\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('page_load_time', 'performance', this.currentPage, Math.round(loadTime));\r\n        }\r\n    }\r\n\r\n    handleOnline(event) {\r\n        console.log('🟢 Conexión restaurada');\r\n        BombasAyalaUtils.showToast('Conexión restaurada', 'success');\r\n    }\r\n\r\n    handleOffline(event) {\r\n        console.log('🔴 Sin conexión a internet');\r\n        BombasAyalaUtils.showToast('Sin conexión a internet', 'warning');\r\n    }\r\n\r\n    // ==================\r\n    // FINALIZACIÓN\r\n    // ==================\r\n    finishInitialization() {\r\n        this.isInitialized = true;\r\n        \r\n        // Ocultar cualquier loader\r\n        this.hideLoaders();\r\n        \r\n        // Mostrar contenido\r\n        this.showContent();\r\n        \r\n        // Tracking de inicialización\r\n        if (this.config.analytics.enabled) {\r\n            BombasAyalaUtils.trackEvent('app_initialized', 'system', this.currentPage);\r\n        }\r\n        \r\n        console.log('🎉 Bombas Ayala App inicializada correctamente');\r\n        console.log('📊 Estado:', this.getAppState());\r\n    }\r\n\r\n    hideLoaders() {\r\n        const loaders = document.querySelectorAll('.loader, .loading, .preloader');\r\n        loaders.forEach(loader => {\r\n            loader.style.opacity = '0';\r\n            setTimeout(() => {\r\n                if (loader.parentNode) {\r\n                    loader.parentNode.removeChild(loader);\r\n                }\r\n            }, 300);\r\n        });\r\n    }\r\n\r\n    showContent() {\r\n        document.body.style.opacity = '1';\r\n        document.body.classList.add('loaded');\r\n    }\r\n\r\n    // ==================\r\n    // API PÚBLICA\r\n    // ==================\r\n    getAppState() {\r\n        return {\r\n            initialized: this.isInitialized,\r\n            currentPage: this.currentPage,\r\n            controllers: Object.keys(this.controllers),\r\n            isMobile: BombasAyalaUtils.isMobile(),\r\n            config: this.config\r\n        };\r\n    }\r\n\r\n    getController(name) {\r\n        return this.controllers[name] || null;\r\n    }\r\n\r\n    reload() {\r\n        window.location.reload();\r\n    }\r\n\r\n    // Métodos de conveniencia para acciones comunes\r\n    openWhatsApp(message) {\r\n        BombasAyalaUtils.openWhatsApp(message || '¡Hola! Me interesa conocer más sobre sus servicios.', this.config.phone);\r\n    }\r\n\r\n    callPhone() {\r\n        window.location.href = `tel:+${this.config.phone}`;\r\n    }\r\n\r\n    sendEmail(subject = 'Consulta desde el sitio web') {\r\n        const body = encodeURIComponent('Estimados,\\n\\nMe interesa conocer más información sobre sus servicios.\\n\\nSaludos cordiales.');\r\n        window.location.href = `mailto:${this.config.email}?subject=${encodeURIComponent(subject)}&body=${body}`;\r\n    }\r\n}\r\n\r\n// ==================\r\n// INICIALIZACIÓN AUTOMÁTICA\r\n// ==================\r\nfunction initBombasAyalaApp() {\r\n    // Verificar que estemos en el browser\r\n    if (typeof window === 'undefined') {\r\n        console.warn('⚠️ No estamos en un entorno de navegador');\r\n        return;\r\n    }\r\n\r\n    // Crear instancia global\r\n    window.BombasAyala = new BombasAyalaApp();\r\n    \r\n    // API global simplificada\r\n    window.BA = {\r\n        app: window.BombasAyala,\r\n        utils: window.BombasAyalaUtils,\r\n        whatsapp: (msg) => window.BombasAyala.openWhatsApp(msg),\r\n        call: () => window.BombasAyala.callPhone(),\r\n        email: (subject) => window.BombasAyala.sendEmail(subject),\r\n        state: () => window.BombasAyala.getAppState(),\r\n        reload: () => window.BombasAyala.reload()\r\n    };\r\n    \r\n    console.log('🌟 API global disponible como window.BA');\r\n}\r\n\r\n// Auto-inicializar cuando el DOM esté listo\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', initBombasAyalaApp);\r\n} else {\r\n    initBombasAyalaApp();\r\n}\r\n\r\n// Exportar para módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = BombasAyalaApp;\r\n}","/**\r\n * ========================================\r\n * UTILS.JS - BOMBAS AYALA\r\n * Funciones reutilizables y utilidades comunes\r\n * ========================================\r\n */\r\n\r\nwindow.BombasAyalaUtils = {\r\n    \r\n    // ==================\r\n    // SMOOTH SCROLL UNIVERSAL\r\n    // ==================\r\n    initSmoothScroll() {\r\n        document.querySelectorAll('a[href^=\"#\"]').forEach(link => {\r\n            link.addEventListener('click', function(e) {\r\n                e.preventDefault();\r\n                const target = document.querySelector(this.getAttribute('href'));\r\n                if (target) {\r\n                    target.scrollIntoView({\r\n                        behavior: 'smooth',\r\n                        block: 'start'\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // INTERSECTION OBSERVER UNIVERSAL\r\n    // ==================\r\n    createAnimationObserver(callback, options = {}) {\r\n        const defaultOptions = {\r\n            threshold: 0.1,\r\n            rootMargin: '0px 0px -50px 0px'\r\n        };\r\n        return new IntersectionObserver(callback, { ...defaultOptions, ...options });\r\n    },\r\n\r\n    // Animación de entrada estándar\r\n    animateOnScroll(selector) {\r\n        const elements = document.querySelectorAll(selector);\r\n        \r\n        const observer = this.createAnimationObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    entry.target.style.opacity = '1';\r\n                    entry.target.style.transform = 'translateY(0)';\r\n                    entry.target.classList.add('animated');\r\n                }\r\n            });\r\n        });\r\n\r\n        elements.forEach(el => {\r\n            el.style.opacity = '0';\r\n            el.style.transform = 'translateY(30px)';\r\n            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';\r\n            observer.observe(el);\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // VALIDACIÓN DE FORMULARIOS UNIVERSAL\r\n    // ==================\r\n    validateField(field) {\r\n        const value = field.value.trim();\r\n        const isRequired = field.hasAttribute('required');\r\n        \r\n        // Limpiar estados previos\r\n        field.classList.remove('error', 'success');\r\n        this.removeFieldError(field);\r\n        \r\n        // Validar campo requerido\r\n        if (isRequired && !value) {\r\n            this.showFieldError(field, 'Este campo es obligatorio');\r\n            return false;\r\n        }\r\n        \r\n        // Validar email\r\n        if (field.type === 'email' && value) {\r\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n            if (!emailRegex.test(value)) {\r\n                this.showFieldError(field, 'Ingresa un email válido');\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        // Validar teléfono\r\n        if (field.type === 'tel' && value) {\r\n            const phoneRegex = /^[0-9]{9,}$/;\r\n            if (!phoneRegex.test(value.replace(/\\s+/g, ''))) {\r\n                this.showFieldError(field, 'Ingresa un teléfono válido (mínimo 9 dígitos)');\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        // Campo válido\r\n        if (value) {\r\n            field.classList.add('success');\r\n        }\r\n        \r\n        return true;\r\n    },\r\n\r\n    showFieldError(field, message) {\r\n        field.classList.add('error');\r\n        \r\n        const errorDiv = document.createElement('div');\r\n        errorDiv.className = 'error-message';\r\n        errorDiv.textContent = message;\r\n        errorDiv.style.cssText = `\r\n            color: #E74C3C;\r\n            font-size: 0.85rem;\r\n            margin-top: 0.25rem;\r\n        `;\r\n        \r\n        field.parentNode.appendChild(errorDiv);\r\n    },\r\n\r\n    removeFieldError(field) {\r\n        const errorMsg = field.parentNode.querySelector('.error-message');\r\n        if (errorMsg) {\r\n            errorMsg.remove();\r\n        }\r\n    },\r\n\r\n    // Validar formulario completo\r\n    validateForm(formElement) {\r\n        const inputs = formElement.querySelectorAll('input, select, textarea');\r\n        let isValid = true;\r\n        \r\n        inputs.forEach(input => {\r\n            if (!this.validateField(input)) {\r\n                isValid = false;\r\n            }\r\n        });\r\n        \r\n        return isValid;\r\n    },\r\n\r\n    // ==================\r\n    // WHATSAPP UNIVERSAL\r\n    // ==================\r\n    openWhatsApp(message, phone = '51997984102') {\r\n        const encodedMessage = encodeURIComponent(message);\r\n        const url = `https://wa.me/${phone}?text=${encodedMessage}`;\r\n        window.open(url, '_blank');\r\n    },\r\n\r\n    // Crear mensaje de cotización\r\n    createQuoteMessage(data) {\r\n        let message = '🔧 *SOLICITUD DE COTIZACIÓN*\\n\\n';\r\n        \r\n        if (data.nombre) message += `👤 *Cliente:* ${data.nombre}\\n`;\r\n        if (data.telefono) message += `📞 *Teléfono:* ${data.telefono}\\n`;\r\n        if (data.email) message += `📧 *Email:* ${data.email}\\n`;\r\n        if (data.servicio) message += `🛠️ *Servicio:* ${data.servicio}\\n`;\r\n        if (data.producto) message += `📦 *Producto:* ${data.producto}\\n`;\r\n        if (data.descripcion) message += `📝 *Descripción:* ${data.descripcion}\\n`;\r\n        \r\n        message += '\\n¡Espero su cotización pronto!';\r\n        \r\n        return message;\r\n    },\r\n\r\n    // ==================\r\n    // EVENT TRACKING UNIVERSAL\r\n    // ==================\r\n    trackEvent(action, category, label, value) {\r\n        console.log(`📊 Evento: ${action} | ${category} | ${label || ''}`);\r\n        \r\n        // Google Analytics\r\n        if (typeof gtag !== 'undefined') {\r\n            gtag('event', action, {\r\n                event_category: category,\r\n                event_label: label,\r\n                value: value\r\n            });\r\n        }\r\n    },\r\n\r\n    // ==================\r\n    // LAZY LOADING UNIVERSAL\r\n    // ==================\r\n    initLazyLoading(selector = 'img[data-src]') {\r\n        const images = document.querySelectorAll(selector);\r\n        \r\n        if (images.length === 0) return;\r\n        \r\n        const imageObserver = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n                if (entry.isIntersecting) {\r\n                    const img = entry.target;\r\n                    img.src = img.dataset.src;\r\n                    img.removeAttribute('data-src');\r\n                    img.classList.remove('lazy');\r\n                    img.classList.add('loaded');\r\n                    imageObserver.unobserve(img);\r\n                }\r\n            });\r\n        }, {\r\n            threshold: 0.1,\r\n            rootMargin: '0px 0px 50px 0px'\r\n        });\r\n        \r\n        images.forEach(img => {\r\n            img.classList.add('lazy');\r\n            imageObserver.observe(img);\r\n        });\r\n    },\r\n\r\n    // ==================\r\n    // CONTADORES ANIMADOS\r\n    // ==================\r\n    animateCounter(element, start, end, duration = 2000) {\r\n        let startTime = null;\r\n        \r\n        function animation(currentTime) {\r\n            if (startTime === null) startTime = currentTime;\r\n            const timeElapsed = currentTime - startTime;\r\n            const progress = Math.min(timeElapsed / duration, 1);\r\n            \r\n            const value = Math.floor(progress * (end - start) + start);\r\n            \r\n            // Formatear según el tipo de número\r\n            if (end.toString().includes('%')) {\r\n                element.textContent = value + '%';\r\n            } else if (end.toString().includes('+')) {\r\n                element.textContent = value + '+';\r\n            } else if (end.toString().includes('/')) {\r\n                element.textContent = '24/7';\r\n            } else {\r\n                element.textContent = value.toLocaleString();\r\n            }\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(animation);\r\n            }\r\n        }\r\n        \r\n        requestAnimationFrame(animation);\r\n    },\r\n\r\n    // ==================\r\n    // UTILIDADES GENERALES\r\n    // ==================\r\n    \r\n    // Detectar dispositivo móvil\r\n    isMobile() {\r\n        return window.innerWidth <= 768;\r\n    },\r\n\r\n    // Debounce function\r\n    debounce(func, wait) {\r\n        let timeout;\r\n        return function executedFunction(...args) {\r\n            const later = () => {\r\n                clearTimeout(timeout);\r\n                func(...args);\r\n            };\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n        };\r\n    },\r\n\r\n    // Copiar texto al clipboard\r\n    copyToClipboard(text) {\r\n        if (navigator.clipboard) {\r\n            return navigator.clipboard.writeText(text);\r\n        } else {\r\n            // Fallback para navegadores antiguos\r\n            const textArea = document.createElement('textarea');\r\n            textArea.value = text;\r\n            document.body.appendChild(textArea);\r\n            textArea.select();\r\n            document.execCommand('copy');\r\n            document.body.removeChild(textArea);\r\n            return Promise.resolve();\r\n        }\r\n    },\r\n\r\n    // Mostrar notificación toast\r\n    showToast(message, type = 'info', duration = 3000) {\r\n        const toast = document.createElement('div');\r\n        toast.className = `toast toast-${type}`;\r\n        toast.textContent = message;\r\n        toast.style.cssText = `\r\n            position: fixed;\r\n            top: 20px;\r\n            right: 20px;\r\n            padding: 12px 20px;\r\n            border-radius: 8px;\r\n            color: white;\r\n            font-weight: 600;\r\n            z-index: 9999;\r\n            opacity: 0;\r\n            transform: translateX(100%);\r\n            transition: all 0.3s ease;\r\n        `;\r\n        \r\n        // Colores según tipo\r\n        const colors = {\r\n            success: '#27AE60',\r\n            error: '#E74C3C',\r\n            warning: '#F39C12',\r\n            info: '#3498DB'\r\n        };\r\n        \r\n        toast.style.backgroundColor = colors[type] || colors.info;\r\n        \r\n        document.body.appendChild(toast);\r\n        \r\n        // Animar entrada\r\n        setTimeout(() => {\r\n            toast.style.opacity = '1';\r\n            toast.style.transform = 'translateX(0)';\r\n        }, 100);\r\n        \r\n        // Animar salida\r\n        setTimeout(() => {\r\n            toast.style.opacity = '0';\r\n            toast.style.transform = 'translateX(100%)';\r\n            setTimeout(() => {\r\n                if (document.body.contains(toast)) {\r\n                    document.body.removeChild(toast);\r\n                }\r\n            }, 300);\r\n        }, duration);\r\n    },\r\n\r\n    // Precargar imágenes\r\n    preloadImages(imageUrls) {\r\n        imageUrls.forEach(url => {\r\n            const img = new Image();\r\n            img.src = url;\r\n        });\r\n    }\r\n};\r\n\r\n// ==================\r\n// AUTO-INICIALIZACIÓN\r\n// ==================\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    // Inicializar funciones comunes automáticamente\r\n    BombasAyalaUtils.initSmoothScroll();\r\n    BombasAyalaUtils.initLazyLoading();\r\n    \r\n    console.log('✅ BombasAyala Utils inicializados');\r\n});\r\n\r\n// Exportar para uso en módulos si es necesario\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = window.BombasAyalaUtils;\r\n}"]}
